/*! For license information please see main.26b4248a.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Dt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Dt.forEach(Vt),Rt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,be(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=be(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Jn;else if(Kn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?wi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Ui=null,Vi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{kt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Ji,Wi[Qi++]=$i,Wi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Ji=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function _a(e){var t=ya.current;Ei(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ai:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=Ya(!0),$a=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,wo=0,bo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:$o,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:$o,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ja(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Ps),Ps|=r;return bu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Ru,Pu,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Ji,Wi[Qi++]=$i,Wi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Wu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Pu(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":J(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Pu(e,t),null===e&&Br(t.stateNode.containerInfo),Wu(t),null;case 10:return _a(t.type._context),Wu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*$e()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ju=!1,$u=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!$u&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,ds(e,t,n),$u=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=$e())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ms(t,e),$u=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ju;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Ju;var c=$u;if(Ju=o,($u=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ws(a,t,n),a=a.sibling;Zu=i,Ju=u,$u=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,Es=Math.ceil,Ss=w.ReactCurrentDispatcher,Ts=w.ReactCurrentOwner,Cs=w.ReactCurrentBatchConfig,Ns=0,As=null,Ds=null,Rs=0,Ps=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,js=null,zs=null,Bs=0,qs=1/0,Ks=null,Gs=!1,Hs=null,Ws=null,Qs=!1,Ys=null,Js=0,$s=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?$e():-1!==Zs?Zs:Zs=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<$s)throw $s=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=$e()+500,Vi&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Rs===t||(Ks=null,qs=$e()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}ba(),Ss.current=o,Ns=i,null!==Ds?t=0:(As=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zs,Ks),t);break}_c(e,zs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zs,Ks),r);break}_c(e,zs,Ks);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zs,Ks),ic(e,$e()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=$e()+500,Vi&&Bi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function hc(){Ps=Os.current,Ei(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ds=e=Oc(e.current,null),Rs=Ps=t,Ls=0,Ms=null,Vs=Us=Fs=0,zs=js=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ds;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,wo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&Us)||sc(As,Rs)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Rs===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),Ns=n,Ss.current=r,null!==Ds)throw Error(a(261));return As=null,Rs=0,Ls}function gc(){for(;null!==Ds;)wc(Ds)}function kc(){for(;null!==Ds&&!Ye();)wc(Ds)}function wc(e){var t=Is(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):Ds=t,Ts.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ps)))return void(Ds=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Ls=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ds=As=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Je(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Js=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Hs,Hs=null,e;0!==(1&Js)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?$s++:($s=0,Xs=e):$s=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Ys){var e=wt(Js),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Js=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>$e()-Bs?dc(e,0):Vs|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return We(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Si(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Gu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Ns)&&(qs=$e()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));W(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=k.prototype=new g;w.constructor=k,v(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,w(e),!v)if(null!==r(c))v=!0,P(_);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){y(A,0)};function P(e){E=e,I||(I=!0,x())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".31646615.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="che_hsuan:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Che_Hsuan/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkche_hsuan=self.webpackChunkche_hsuan||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return K},SDK_VERSION:function(){return tt},_DEFAULT_ENTRY_NAME:function(){return Be},_addComponent:function(){return He},_addOrOverwriteComponent:function(){return We},_apps:function(){return Ke},_clearComponents:function(){return $e},_components:function(){return Ge},_getProvider:function(){return Ye},_registerComponent:function(){return Qe},_removeServiceInstance:function(){return Je},deleteApp:function(){return at},getApp:function(){return rt},getApps:function(){return it},initializeApp:function(){return nt},onLog:function(){return st},registerVersion:function(){return ut},setLogLevel:function(){return ct}});var t=n(791),r=n(250);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t=h();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,n)}}function v(){v=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var h={};function d(){}function p(){}function m(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,o)&&(y=k);var w=m.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,o,u,s){var c=f(e[r],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==a(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,u,s)}),(function(e){i("throw",e,u,s)})):t.resolve(h).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=m,r(w,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},b(_.prototype),c(_.prototype,u,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(w),c(w,s,"Generator"),c(w,o,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function m(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){m(a,r,i,o,u,"next",e)}function u(e){m(a,r,i,o,u,"throw",e)}o(void 0)}))}}function g(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){if(e){if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function _(e){if(Array.isArray(e))return e}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){return _(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||w(e,t)||x()}function E(e,t,n){return E=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},E.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return E(e,arguments,f(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},S(e)}var T=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new N;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},N=function(e){l(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return s(n)}(S(Error)),A=function(e){return function(e){var t=T(e);return C.encodeByteArray(t,!0)}(e).replace(/\./g,"")},D=function(e){try{return C.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function R(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=R(e[n],t[n]));return e}var P=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},O=function(){try{return P()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Che_Hsuan",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDDEtvcE8T4BCnvICWn-VXH67KIPIP9DKQ",REACT_APP_FIREBASE_APP_ID:"889485886292:web:d2e872024b9544bebbfec1",REACT_APP_FIREBASE_AUTH_DOMAIN:"che-hsuan-wedding-form.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://che-hsuan-wedding-form.asia-east1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"889485886292",REACT_APP_FIREBASE_PROJECT_ID:"che-hsuan-wedding-form",REACT_APP_FIREBASE_STORAGE_BUCKET:"che-hsuan-wedding-form.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&D(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},L=function(){var e;return null===(e=O())||void 0===e?void 0:e.config},M=function(){function e(){var t=this;i(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return s(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function F(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function U(){var e,t=null===(e=O())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function V(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function j(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function z(){var e=F();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function B(){try{return"object"===typeof indexedDB}catch(e){return!1}}var q="FirebaseError",K=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,r)).code=e,o.customData=a,o.name=q,Object.setPrototypeOf(d(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(d(o),G.prototype.create),o}return s(n)}(S(Error)),G=function(){function e(t,n,r){i(this,e),this.service=t,this.serviceName=n,this.errors=r}return s(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(H,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new K(n,a,t)}}]),e}();var H=/\{\$([^}]+)}/g;function W(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Q(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Y(u)&&Y(s)){if(!Q(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Y(e){return null!==e&&"object"===typeof e}function J(e){for(var t=[],n=function(){var e=I(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function $(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=I(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function X(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Z(e,t){var n=new ee(e,t);return n.subscribe.bind(n)}var ee=function(){function e(t,n){var r=this;i(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return s(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=te),void 0===r.error&&(r.error=te),void 0===r.complete&&(r.complete=te);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function te(){}function ne(e){return e&&e._delegate?e._delegate:e}function re(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ie(e){return function(e){if(Array.isArray(e))return k(e)}(e)||re(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ae=function(){function e(t,n,r){i(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return s(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),oe="[DEFAULT]",ue=function(){function e(t,n){i(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return s(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new M;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(s){}var t,n=b(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=I(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ie(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ie(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=b(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=I(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(bx){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===oe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(bx){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;return this.component?this.component.multipleInstances?e:oe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var se,ce,le=function(){function e(t){i(this,e),this.name=t,this.providers=new Map}return s(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ue(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),fe=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ce||(ce={}));var he={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},de=ce.INFO,pe=(g(se={},ce.DEBUG,"log"),g(se,ce.VERBOSE,"log"),g(se,ce.INFO,"info"),g(se,ce.WARN,"warn"),g(se,ce.ERROR,"error"),se),ve=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=pe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},me=function(){function e(t){i(this,e),this.name=t,this._logLevel=de,this._logHandler=ve,this._userLogHandler=null,fe.push(this)}return s(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ce))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?he[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.DEBUG].concat(t)),this._logHandler.apply(this,[this,ce.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ce.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.INFO].concat(t)),this._logHandler.apply(this,[this,ce.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.WARN].concat(t)),this._logHandler.apply(this,[this,ce.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.ERROR].concat(t)),this._logHandler.apply(this,[this,ce.ERROR].concat(t))}}]),e}();function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke,we,be=function(e,t){return t.some((function(t){return e instanceof t}))};var _e=new WeakMap,xe=new WeakMap,Ie=new WeakMap,Ee=new WeakMap,Se=new WeakMap;var Te={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ie.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ae(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ce(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(De(this),n),Ae(_e.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ae(e.apply(De(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[De(this),t].concat(r));return Ie.set(a,t.sort?t.sort():[t]),Ae(a)}}function Ne(e){return"function"===typeof e?Ce(e):(e instanceof IDBTransaction&&function(e){if(!xe.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));xe.set(e,t)}}(e),be(e,ke||(ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Te):e)}function Ae(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ae(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&_e.set(t,e)})).catch((function(){})),Se.set(t,e),t}(e);if(Ee.has(e))return Ee.get(e);var t=Ne(e);return t!==e&&(Ee.set(e,t),Se.set(t,e)),t}var De=function(e){return Se.get(e)};var Re,Pe,Oe=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],Me=new Map;function Fe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Me.get(t))return Me.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Le.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Oe.includes(n))){var a=function(){var e=y(v().mark((function e(t){var a,o,u,s,c,l,f=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Me.set(t,a),a}}}Te=function(e){return ge(ge({},e),{},{get:function(t,n,r){return Fe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Fe(t,n)||e.has(t,n)}})}(Te);var Ue=function(){function e(t){i(this,e),this.container=t}return s(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ve="@firebase/app",je="0.9.7",ze=new me("@firebase/app"),Be="[DEFAULT]",qe=(g(Re={},Ve,"fire-core"),g(Re,"@firebase/app-compat","fire-core-compat"),g(Re,"@firebase/analytics","fire-analytics"),g(Re,"@firebase/analytics-compat","fire-analytics-compat"),g(Re,"@firebase/app-check","fire-app-check"),g(Re,"@firebase/app-check-compat","fire-app-check-compat"),g(Re,"@firebase/auth","fire-auth"),g(Re,"@firebase/auth-compat","fire-auth-compat"),g(Re,"@firebase/database","fire-rtdb"),g(Re,"@firebase/database-compat","fire-rtdb-compat"),g(Re,"@firebase/functions","fire-fn"),g(Re,"@firebase/functions-compat","fire-fn-compat"),g(Re,"@firebase/installations","fire-iid"),g(Re,"@firebase/installations-compat","fire-iid-compat"),g(Re,"@firebase/messaging","fire-fcm"),g(Re,"@firebase/messaging-compat","fire-fcm-compat"),g(Re,"@firebase/performance","fire-perf"),g(Re,"@firebase/performance-compat","fire-perf-compat"),g(Re,"@firebase/remote-config","fire-rc"),g(Re,"@firebase/remote-config-compat","fire-rc-compat"),g(Re,"@firebase/storage","fire-gcs"),g(Re,"@firebase/storage-compat","fire-gcs-compat"),g(Re,"@firebase/firestore","fire-fst"),g(Re,"@firebase/firestore-compat","fire-fst-compat"),g(Re,"fire-js","fire-js"),g(Re,"firebase","fire-js-all"),Re),Ke=new Map,Ge=new Map;function He(e,t){try{e.container.addComponent(t)}catch(n){ze.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function We(e,t){e.container.addOrOverwriteComponent(t)}function Qe(e){var t=e.name;if(Ge.has(t))return ze.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ge.set(t,e);var n,r=b(Ke.values());try{for(r.s();!(n=r.n()).done;){He(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ye(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Be;Ye(e,t).clearInstance(n)}function $e(){Ge.clear()}var Xe=(g(Pe={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),g(Pe,"bad-app-name","Illegal App name: '{$appName}"),g(Pe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),g(Pe,"app-deleted","Firebase App named '{$appName}' already deleted"),g(Pe,"no-options","Need to provide options, when not being deployed to hosting via source."),g(Pe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),g(Pe,"invalid-log-argument","First argument to `onLog` must be null or a function."),g(Pe,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),g(Pe,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),g(Pe,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),g(Pe,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Pe),Ze=new G("app","Firebase",Xe),et=function(){function e(t,n,r){var a=this;i(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ae("app",(function(){return a}),"PUBLIC"))}return s(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ze.create("app-deleted",{appName:this._name})}}]),e}(),tt="9.19.1";function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Be,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ze.create("bad-app-name",{appName:String(i)});if(n||(n=L()),!n)throw Ze.create("no-options");var a=Ke.get(i);if(a){if(Q(n,a.options)&&Q(r,a.config))return a;throw Ze.create("duplicate-app",{appName:i})}var o,u=new le(i),s=b(Ge.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new et(n,r,u);return Ke.set(i,l),l}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=Ke.get(e);if(!t&&e===Be)return nt();if(!t)throw Ze.create("no-app",{appName:e});return t}function it(){return Array.from(Ke.values())}function at(e){return ot.apply(this,arguments)}function ot(){return(ot=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ke.has(n)){e.next=6;break}return Ke.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e,t,n){var r,i=null!==(r=qe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ze.warn(u.join(" "))}Qe(new ae("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function st(e,t){if(null!==e&&"function"!==typeof e)throw Ze.create("invalid-log-argument");!function(e,t){var n,r=b(fe);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=he[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ce[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ct(e){var t;t=e,fe.forEach((function(e){e.setLogLevel(t)}))}var lt="firebase-heartbeat-database",ft=1,ht="firebase-heartbeat-store",dt=null;function pt(){return dt||(dt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ae(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ae(u.result),e.oldVersion,e.newVersion,Ae(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(lt,ft,{upgrade:function(e,t){if(0===t)e.createObjectStore(ht)}}).catch((function(e){throw Ze.create("idb-open",{originalErrorMessage:e.message})}))),dt}function vt(e){return mt.apply(this,arguments)}function mt(){return mt=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt();case 3:return n=e.sent,e.abrupt("return",n.transaction(ht).objectStore(ht).get(kt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof K?ze.warn(e.t0.message):(r=Ze.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ze.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),mt.apply(this,arguments)}function yt(e,t){return gt.apply(this,arguments)}function gt(){return gt=y(v().mark((function e(t,n){var r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt();case 3:return r=e.sent,i=r.transaction(ht,"readwrite"),a=i.objectStore(ht),e.next=8,a.put(n,kt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof K?ze.warn(e.t0.message):(o=Ze.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ze.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),gt.apply(this,arguments)}function kt(e){return"".concat(e.name,"!").concat(e.options.appId)}var wt=1024,bt=function(){function e(t){var n=this;i(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new St(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return s(e,[{key:"triggerHeartbeat",value:function(){var e=y(v().mark((function e(){var t,n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=_t(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=y(v().mark((function e(){var t,n,r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=_t(),n=xt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=A(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _t(){return(new Date).toISOString().substring(0,10)}function xt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt,r=[],i=e.slice(),a=b(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Tt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Tt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var It,Et,St=function(){function e(t){i(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return s(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,vt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",yt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",yt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ie(r.heartbeats),ie(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Tt(e){return A(JSON.stringify({version:2,heartbeats:e})).length}It="",Qe(new ae("platform-logger",(function(e){return new Ue(e)}),"PRIVATE")),Qe(new ae("heartbeat",(function(e){return new bt(e)}),"PRIVATE")),ut(Ve,je,It),ut(Ve,je,"esm2017"),ut("fire-js","");var Ct=function(){function e(t,n){var r=this;i(this,e),this._delegate=t,this.firebase=n,He(t,new ae("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return s(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),at(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Be;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Be;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){He(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){We(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Nt=(g(Et={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),g(Et,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Et),At=new G("app-compat","Firebase",Nt);var Dt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=nt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(W(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ut,setLogLevel:ct,onLog:st,apps:null,SDK_VERSION:tt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Qe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw At.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&R(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!W(n,e=e||Be))throw At.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Ct);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){R(n,e)},createSubscribe:Z,ErrorFactory:G,deepExtend:R}),n}(),Rt=new me("@firebase/app-compat"),Pt="@firebase/app-compat",Ot="0.2.7";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Rt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Lt=self.firebase.SDK_VERSION;Lt&&Lt.indexOf("LITE")>=0&&Rt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Mt=Dt;!function(e){ut(Pt,Ot,e)}();function Ft(){return Ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ft.apply(this,arguments)}Mt.registerVersion("firebase","9.19.1","app-compat");function Ut(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Vt;Object.create;var jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},zt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function Bt(){return g({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var qt=function(){var e;return g(e={},"admin-restricted-operation","This operation is restricted to administrators only."),g(e,"argument-error",""),g(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),g(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),g(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),g(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),g(e,"cordova-not-ready","Cordova framework is not ready."),g(e,"cors-unsupported","This browser is not supported."),g(e,"credential-already-in-use","This credential is already associated with a different user account."),g(e,"custom-token-mismatch","The custom token corresponds to a different audience."),g(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),g(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),g(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),g(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),g(e,"email-already-in-use","The email address is already in use by another account."),g(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),g(e,"expired-action-code","The action code has expired."),g(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),g(e,"internal-error","An internal AuthError has occurred."),g(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),g(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),g(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),g(e,"invalid-auth-event","An internal AuthError has occurred."),g(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),g(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),g(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),g(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),g(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),g(e,"invalid-email","The email address is badly formatted."),g(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),g(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),g(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),g(e,"invalid-credential","The supplied auth credential is malformed or has expired."),g(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),g(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),g(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),g(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),g(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),g(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),g(e,"wrong-password","The password is invalid or the user does not have a password."),g(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),g(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),g(e,"invalid-provider-id","The specified provider ID is invalid."),g(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),g(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),g(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),g(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),g(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),g(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),g(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),g(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),g(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),g(e,"missing-continue-uri","A continue URL must be provided in the request."),g(e,"missing-iframe-start","An internal AuthError has occurred."),g(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),g(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),g(e,"missing-password","A non-empty password must be provided"),g(e,"missing-multi-factor-info","No second factor identifier is provided."),g(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),g(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),g(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),g(e,"app-deleted","This instance of FirebaseApp has been deleted."),g(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),g(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),g(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),g(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),g(e,"no-auth-event","An internal AuthError has occurred."),g(e,"no-such-provider","User was not linked to an account with the given provider."),g(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),g(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),g(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),g(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),g(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),g(e,"provider-already-linked","User can only be linked to one identity for the given provider."),g(e,"quota-exceeded","The project's quota for this operation has been exceeded."),g(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),g(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),g(e,"rejected-credential","The request contains malformed or mismatching credentials."),g(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),g(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),g(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),g(e,"timeout","The operation has timed out."),g(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),g(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),g(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),g(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),g(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),g(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),g(e,"unverified-email","The operation requires a verified email."),g(e,"user-cancelled","The user did not grant your application the permissions it requested."),g(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),g(e,"user-disabled","The user account has been disabled by an administrator."),g(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),g(e,"user-signed-out",""),g(e,"weak-password","The password must be 6 characters long or more."),g(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),g(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Kt=Bt,Gt=new G("auth","Firebase",Bt()),Ht=new me("@firebase/auth");function Wt(e){if(Ht.logLevel<=ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ht.error.apply(Ht,["Auth (".concat(tt,"): ").concat(e)].concat(n))}}function Qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Xt.apply(void 0,[e].concat(n))}function Yt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xt.apply(void 0,[e].concat(n))}function Jt(e,t,n){var r=Object.assign(Object.assign({},Kt()),g({},t,n));return new G("auth","Firebase",r).create(t,{appName:e.name})}function $t(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Qt(e,"argument-error"),Jt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ie(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ie(o)))}return Gt.create.apply(Gt,[e].concat(n))}function Zt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Xt.apply(void 0,[t].concat(r))}}function en(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Wt(t),new Error(t)}function tn(e,t){e||en(t)}var nn=new Map;function rn(e){tn(e instanceof Function,"Expected a class definition");var t=nn.get(e);return t?(tn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,nn.set(e,t),t)}function an(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function on(){return"http:"===un()||"https:"===un()}function un(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var sn=function(){function e(t,n){i(this,e),this.shortDelay=t,this.longDelay=n,tn(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(F())||j()}return s(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(on()||V()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function cn(e,t){tn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ln=function(){function e(){i(this,e)}return s(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void en("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void en("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void en("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),fn=(g(Vt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),g(Vt,"MISSING_CUSTOM_TOKEN","internal-error"),g(Vt,"INVALID_IDENTIFIER","invalid-email"),g(Vt,"MISSING_CONTINUE_URI","internal-error"),g(Vt,"INVALID_PASSWORD","wrong-password"),g(Vt,"MISSING_PASSWORD","missing-password"),g(Vt,"EMAIL_EXISTS","email-already-in-use"),g(Vt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),g(Vt,"INVALID_IDP_RESPONSE","invalid-credential"),g(Vt,"INVALID_PENDING_TOKEN","invalid-credential"),g(Vt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),g(Vt,"MISSING_REQ_TYPE","internal-error"),g(Vt,"EMAIL_NOT_FOUND","user-not-found"),g(Vt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),g(Vt,"EXPIRED_OOB_CODE","expired-action-code"),g(Vt,"INVALID_OOB_CODE","invalid-action-code"),g(Vt,"MISSING_OOB_CODE","internal-error"),g(Vt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),g(Vt,"INVALID_ID_TOKEN","invalid-user-token"),g(Vt,"TOKEN_EXPIRED","user-token-expired"),g(Vt,"USER_NOT_FOUND","user-token-expired"),g(Vt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),g(Vt,"INVALID_CODE","invalid-verification-code"),g(Vt,"INVALID_SESSION_INFO","invalid-verification-id"),g(Vt,"INVALID_TEMPORARY_PROOF","invalid-credential"),g(Vt,"MISSING_SESSION_INFO","missing-verification-id"),g(Vt,"SESSION_EXPIRED","code-expired"),g(Vt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),g(Vt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),g(Vt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),g(Vt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),g(Vt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),g(Vt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),g(Vt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),g(Vt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),g(Vt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),g(Vt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),g(Vt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Vt),hn=new sn(3e4,6e4);function dn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function pn(e,t,n,r){return vn.apply(this,arguments)}function vn(){return vn=y(v().mark((function e(t,n,r,i){var a,o=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",mn(t,a,y(v().mark((function e(){var a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=J(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ln.fetch()(wn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),vn.apply(this,arguments)}function mn(e,t,n){return yn.apply(this,arguments)}function yn(){return(yn=y(v().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},fn),n),e.prev=2,a=new bn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw _n(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=I(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw _n(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw _n(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw _n(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Jt(t,d,h);case 34:Qt(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof K)){e.next=41;break}throw e.t0;case 41:Qt(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function gn(e,t,n,r){return kn.apply(this,arguments)}function kn(){return kn=y(v().mark((function e(t,n,r,i){var a,o,u=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,pn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Qt(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),kn.apply(this,arguments)}function wn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?cn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var bn=function(){function e(t){var n=this;i(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Yt(n.auth,"network-request-failed"))}),hn.get())}))}return s(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function _n(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Yt(e,t,r);return i.customData._tokenResponse=n,i}function xn(e,t){return In.apply(this,arguments)}function In(){return(In=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function En(e,t){return Sn.apply(this,arguments)}function Sn(){return(Sn=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tn(e,t){return Cn.apply(this,arguments)}function Cn(){return(Cn=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function An(){return An=y(v().mark((function e(t){var n,r,i,a,o,u,s=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ne(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Zt((a=Rn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Nn(Dn(a.auth_time)),issuedAtTime:Nn(Dn(a.iat)),expirationTime:Nn(Dn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),An.apply(this,arguments)}function Dn(e){return 1e3*Number(e)}function Rn(e){var t=I(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Wt("JWT malformed, contained fewer than 3 sections"),null;try{var a=D(r);return a?JSON.parse(a):(Wt("Failed to decode base64 JWT payload"),null)}catch(o){return Wt("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Pn(e,t){return On.apply(this,arguments)}function On(){return On=y(v().mark((function e(t,n){var r=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof K&&Ln(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),On.apply(this,arguments)}function Ln(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Mn=function(){function e(t){i(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return s(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(y(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Fn=function(){function e(t,n){i(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return s(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Nn(this.lastLoginAt),this.creationTime=Nn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Un(e){return Vn.apply(this,arguments)}function Vn(){return Vn=y(v().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Pn(t,Tn(r,{idToken:i}));case 6:Zt(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Ut(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=zn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Fn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Vn.apply(this,arguments)}function jn(){return(jn=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ne(t),e.next=3,Un(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ie(n),ie(t))}function Bn(e,t){return qn.apply(this,arguments)}function qn(){return(qn=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn(t,{},y(v().mark((function e(){var r,i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=J({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=wn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ln.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kn=function(){function e(){i(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return s(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Zt(e.idToken,"internal-error"),Zt("undefined"!==typeof e.idToken,"internal-error"),Zt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Rn(e);return Zt(t,"internal-error"),Zt("undefined"!==typeof t.exp,"internal-error"),Zt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=y(v().mark((function e(t){var n,r=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Zt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=y(v().mark((function e(t,n){var r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return en("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Zt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Zt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Zt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Gn(e,t){Zt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Hn=function(){function e(t){i(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,o=Ut(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?ie(o.providerData):[],this.metadata=new Fn(o.createdAt||void 0,o.lastLoginAt||void 0)}return s(e,[{key:"getIdToken",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Zt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return An.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return jn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Zt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=y(v().mark((function e(t){var n,r,i=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Un(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Pn(this,xn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Zt(k&&x,t,"internal-error");var I=Kn.fromJSON(this.name,x);Zt("string"===typeof k,t,"internal-error"),Gn(f,t.name),Gn(h,t.name),Zt("boolean"===typeof w,t,"internal-error"),Zt("boolean"===typeof b,t,"internal-error"),Gn(d,t.name),Gn(p,t.name),Gn(v,t.name),Gn(m,t.name),Gn(y,t.name),Gn(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=y(v().mark((function t(n,r){var i,a,o,u=arguments;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Kn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Un(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Wn=function(){function e(){i(this,e),this.type="NONE",this.storage={}}return s(e,[{key:"_isAvailable",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Wn.type="NONE";var Qn=Wn;function Yn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Jn=function(){function e(t,n,r){i(this,e),this.persistence=t,this.auth=n,this.userKey=r;var a=this.auth,o=a.config,u=a.name;this.fullUserKey=Yn(this.userKey,o.apiKey,u),this.fullPersistenceKey=Yn("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return s(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Hn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=y(v().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,m=arguments;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(rn(Qn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||rn(Qn),u=Yn(i,n.config.apiKey,n.name),s=null,c=b(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Hn._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function $n(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(tr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Xn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(rr(t))return"Blackberry";if(ir(t))return"Webos";if(Zn(t))return"Safari";if((t.includes("chrome/")||er(t))&&!t.includes("edge/"))return"Chrome";if(nr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/firefox\//i.test(e)}function Zn(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:F()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/crios\//i.test(e)}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/iemobile/i.test(e)}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/android/i.test(e)}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/blackberry/i.test(e)}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/webos/i.test(e)}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return ar(e)||nr(e)||ir(e)||rr(e)||/windows phone/i.test(e)||tr(e)}function ur(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=$n(F());break;case"Worker":t="".concat($n(F()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(tt,"/").concat(r)}var sr=function(){function e(t){i(this,e),this.auth=t,this.queue=[]}return s(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=y(v().mark((function e(t){var n,r,i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=b(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=b(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),cr=function(){function e(t,n,r){i(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fr(this),this.idTokenSubscription=new fr(this),this.beforeStateQueue=new sr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return s(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=rn(t)),this._initializationPromise=this.queue(y(v().mark((function r(){var i,a;return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Jn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=y(v().mark((function e(t){var n,r,i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Zt(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Un(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ne(t):null)&&Zt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=y(v().mark((function e(t){var n,r=this,i=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Zt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(y(v().mark((function n(){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(rn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new G("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Zt(n=t&&rn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Jn.create(this,[rn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=y(v().mark((function e(t){var n=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Zt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ur(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=y(v().mark((function e(){var t,n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function lr(e){return ne(e)}var fr=function(){function e(t){var n=this;i(this,e),this.auth=t,this.observer=null,this.addObserver=Z((function(e){return n.observer=e}))}return s(e,[{key:"next",get:function(){return Zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function hr(e,t,n){var r=lr(e);Zt(r._canInitEmulator,r,"emulator-config-failed"),Zt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=dr(t),o=function(e){var t=dr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:pr(r.substr(a.length+1))}}var o=I(r.split(":"),2);return{host:o[0],port:pr(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function dr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var vr=function(){function e(t,n){i(this,e),this.providerId=t,this.signInMethod=n}return s(e,[{key:"toJSON",value:function(){return en("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return en("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return en("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return en("not implemented")}}]),e}();function mr(e,t){return yr.apply(this,arguments)}function yr(){return(yr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:resetPassword",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gr(e,t){return kr.apply(this,arguments)}function kr(){return(kr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wr(e,t){return br.apply(this,arguments)}function br(){return(br=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:update",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _r(e,t){return xr.apply(this,arguments)}function xr(){return(xr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gn(t,"POST","/v1/accounts:signInWithPassword",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(e,t){return Er.apply(this,arguments)}function Er(){return(Er=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:sendOobCode",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e,t){return Tr.apply(this,arguments)}function Tr(){return(Tr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e,t){return Nr.apply(this,arguments)}function Nr(){return(Nr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e,t){return Dr.apply(this,arguments)}function Dr(){return(Dr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rr(e,t){return Pr.apply(this,arguments)}function Pr(){return(Pr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Or(e,t){return Lr.apply(this,arguments)}function Lr(){return(Lr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gn(t,"POST","/v1/accounts:signInWithEmailLink",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(e,t){return Fr.apply(this,arguments)}function Fr(){return(Fr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gn(t,"POST","/v1/accounts:signInWithEmailLink",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ur=function(e){l(n,e);var t=p(n);function n(e,r,a){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return i(this,n),(o=t.call(this,"password",a))._email=e,o._password=r,o._tenantId=u,o}return s(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_r(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Or(t,{email:this._email,oobCode:this._password}));case 5:Qt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",gr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Mr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Qt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(vr);function Vr(e,t){return jr.apply(this,arguments)}function jr(){return(jr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gn(t,"POST","/v1/accounts:signInWithIdp",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zr=function(e){l(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return s(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Vr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Vr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Vr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=J(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ut(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(vr);function Br(e,t){return qr.apply(this,arguments)}function qr(){return(qr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:sendVerificationCode",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kr(){return(Kr=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gn(t,"POST","/v1/accounts:signInWithPhoneNumber",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gr(){return(Gr=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(t,"POST","/v1/accounts:signInWithPhoneNumber",dn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw _n(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hr=g({},"USER_NOT_FOUND","user-not-found");function Wr(){return(Wr=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",gn(t,"POST","/v1/accounts:signInWithPhoneNumber",dn(t,r),Hr));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qr=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,"phone","phone")).params=e,r}return s(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Kr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Gr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Wr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(vr);var Yr=function(){function e(t){var n,r,a,o,u,s;i(this,e);var c=$(X(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=c.mode)&&void 0!==a?a:null);Zt(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(u=c.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return s(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=$(X(e)).link,n=t?$(X(t)).deep_link_id:null,r=$(X(e)).deep_link_id;return(r?$(X(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(bx){return null}}}]),e}();var Jr=function(){function e(){i(this,e),this.providerId=e.PROVIDER_ID}return s(e,null,[{key:"credential",value:function(e,t){return Ur._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Yr.parseLink(t);return Zt(n,"argument-error"),Ur._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Jr.PROVIDER_ID="password",Jr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Jr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var $r=function(){function e(t){i(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return s(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Xr=function(e){l(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).scopes=[],e}return s(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ie(this.scopes)}}]),n}($r),Zr=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Zt(e.idToken||e.accessToken,"argument-error"),zr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Zt("providerId"in t&&"signInMethod"in t,"argument-error"),zr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Xr),ei=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.call(this,"facebook.com")}return s(n,null,[{key:"credential",value:function(e){return zr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(bx){return null}}}]),n}(Xr);ei.FACEBOOK_SIGN_IN_METHOD="facebook.com",ei.PROVIDER_ID="facebook.com";var ti=function(e){l(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return s(n,null,[{key:"credential",value:function(e,t){return zr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(bx){return null}}}]),n}(Xr);ti.GOOGLE_SIGN_IN_METHOD="google.com",ti.PROVIDER_ID="google.com";var ni=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.call(this,"github.com")}return s(n,null,[{key:"credential",value:function(e){return zr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(bx){return null}}}]),n}(Xr);ni.GITHUB_SIGN_IN_METHOD="github.com",ni.PROVIDER_ID="github.com";var ri=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,e)).pendingToken=r,a}return s(n,[{key:"_getIdTokenResponse",value:function(e){return Vr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Vr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Vr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(vr),ii="saml.",ai=function(e){l(n,e);var t=p(n);function n(e){return i(this,n),Zt(e.startsWith(ii),"argument-error"),t.call(this,e)}return s(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ri.fromJSON(e);return Zt(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ri._create(r,n)}catch(i){return null}}}]),n}($r),oi=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.call(this,"twitter.com")}return s(n,null,[{key:"credential",value:function(e,t){return zr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(bx){return null}}}]),n}(Xr);function ui(e,t){return si.apply(this,arguments)}function si(){return(si=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gn(t,"POST","/v1/accounts:signUp",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}oi.TWITTER_SIGN_IN_METHOD="twitter.com",oi.PROVIDER_ID="twitter.com";var ci=function(){function e(t){i(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return s(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=y(v().mark((function t(n,r,i){var a,o,u,s,c=arguments;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Hn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=li(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=y(v().mark((function t(n,r,i){var a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=li(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function li(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function fi(){return fi=y(v().mark((function e(t){var n,r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ci({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ui(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ci._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}var hi=function(e){l(n,e);var t=p(n);function n(e,r,a,o){var u,s;return i(this,n),(u=t.call(this,r.code,r.message)).operationType=a,u.user=o,Object.setPrototypeOf(d(u),n.prototype),u.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:a},u}return s(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(K);function di(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw hi._fromErrorAndOperation(e,n,t,r);throw n}))}function pi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function vi(e,t){return mi.apply(this,arguments)}function mi(){return mi=y(v().mark((function e(t,n){var r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ne(t),e.next=3,ki(!0,r,n);case 3:return e.t0=En,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=pi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),mi.apply(this,arguments)}function yi(e,t){return gi.apply(this,arguments)}function gi(){return gi=y(v().mark((function e(t,n){var r,i,a=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Pn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ci._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}function ki(e,t,n){return wi.apply(this,arguments)}function wi(){return(wi=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(n);case 2:i=pi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Zt(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bi(e,t){return _i.apply(this,arguments)}function _i(){return _i=y(v().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Pn(t,di(i,a,n,t),r);case 6:return Zt((o=e.sent).idToken,i,"internal-error"),Zt(u=Rn(o.idToken),i,"internal-error"),s=u.sub,Zt(t.uid===s,i,"user-mismatch"),e.abrupt("return",ci._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Qt(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),_i.apply(this,arguments)}function xi(e,t){return Ii.apply(this,arguments)}function Ii(){return Ii=y(v().mark((function e(t,n){var r,i,a,o,u=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,di(t,i,n);case 4:return a=e.sent,e.next=7,ci._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Ei(e,t){return Si.apply(this,arguments)}function Si(){return(Si=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xi(lr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ti(e,t){return Ci.apply(this,arguments)}function Ci(){return(Ci=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ne(t),e.next=3,ki(!1,r,n.providerId);case 3:return e.abrupt("return",yi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ni(e,t){return Ai.apply(this,arguments)}function Ai(){return(Ai=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bi(ne(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Di(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gn(t,"POST","/v1/accounts:signInWithCustomToken",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(){return(Pi=y(v().mark((function e(t,n){var r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lr(t),e.next=3,Di(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ci._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oi=function(){function e(t,n){i(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return s(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Li._fromServerResponse(e,t):"totpInfo"in t?Mi._fromServerResponse(e,t):Qt(e,"internal-error")}}]),e}(),Li=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return s(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Oi),Mi=function(e){l(n,e);var t=p(n);function n(e){return i(this,n),t.call(this,"totp",e)}return s(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Oi);function Fi(e,t,n){var r;Zt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Zt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Zt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Zt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ui(){return(Ui=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ne(t),a={requestType:"PASSWORD_RESET",email:n},r&&Fi(i,a,r),e.next=5,Cr(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vi(){return(Vi=y(v().mark((function e(t,n,r){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(ne(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ji(){return(ji=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(ne(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=y(v().mark((function e(t,n){var r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ne(t),e.next=3,mr(r,{oobCode:n});case 3:i=e.sent,Zt(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Zt(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Zt(i.mfaInfo,r,"internal-error");case 13:Zt(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Oi._fromServerResponse(lr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(){return(qi=y(v().mark((function e(t,n){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(ne(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(e,t,n){return Gi.apply(this,arguments)}function Gi(){return(Gi=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lr(t),e.next=3,ui(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ci._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hi(){return(Hi=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ne(t),a={requestType:"EMAIL_SIGNIN",email:n},Zt(r.handleCodeInApp,i,"argument-error"),r&&Fi(i,a,r),e.next=6,Ar(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wi(){return(Wi=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ne(t),Zt((a=Jr.credentialWithLink(n,r||an()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ei(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(e,t){return Yi.apply(this,arguments)}function Yi(){return(Yi=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:createAuthUri",dn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ji(){return(Ji=y(v().mark((function e(t,n){var r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=on()?an():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Qi(ne(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $i(){return($i=y(v().mark((function e(t,n){var r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ne(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Fi(r.auth,a,n),e.next=8,Sr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(){return(Xi=y(v().mark((function e(t,n,r){var i,a,o,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ne(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Fi(i.auth,o,r),e.next=8,Rr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return(ea=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(){return(ta=y(v().mark((function e(t,n){var r,i,a,o,u,s,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ne(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Pn(a,Zi(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t,n){return ra.apply(this,arguments)}function ra(){return(ra=y(v().mark((function e(t,n,r){var i,a,o,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Pn(t,gr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ia=s((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),aa=function(e){l(n,e);var t=p(n);function n(e,r,a,o){var u;return i(this,n),(u=t.call(this,e,r,a)).username=o,u}return s(n)}(ia),oa=function(e){l(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"facebook.com",r)}return s(n)}(ia),ua=function(e){l(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return s(n)}(aa),sa=function(e){l(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"google.com",r)}return s(n)}(ia),ca=function(e){l(n,e);var t=p(n);function n(e,r,a){return i(this,n),t.call(this,e,"twitter.com",r,a)}return s(n)}(aa);function la(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Rn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ia(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new oa(a,i);case"github.com":return new ua(a,i);case"google.com":return new sa(a,i);case"twitter.com":return new ca(a,i,e.screenName||null);case"custom":case"anonymous":return new ia(a,null);default:return new ia(a,r,i)}}(n)}var fa=function(){function e(t,n,r){i(this,e),this.type=t,this.credential=n,this.auth=r}return s(e,[{key:"toJSON",value:function(){return{multiFactorSession:g({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ha=function(){function e(t,n,r){i(this,e),this.session=t,this.hints=n,this.signInResolver=r}return s(e,[{key:"resolveSignIn",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=lr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Oi._fromServerResponse(r,e)}));Zt(i.mfaPendingCredential,r,"internal-error");var o=fa._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=y(v().mark((function e(t){var a,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ci._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Zt(n.user,r,"internal-error"),e.abrupt("return",ci._forOperation(n.user,n.operationType,u));case 17:Qt(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function da(e,t){return pn(e,"POST","/v2/accounts/mfaEnrollment:start",dn(e,t))}function pa(e,t){return pn(e,"POST","/v2/accounts/mfaEnrollment:finalize",dn(e,t))}var va=function(){function e(t){var n=this;i(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Oi._fromServerResponse(t.auth,e)})))}))}return s(e,[{key:"getSession",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fa,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=y(v().mark((function e(t,n){var r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Pn(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=y(v().mark((function e(t){var n,r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Pn(this.user,pn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",dn(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ma=new WeakMap;var ya="__sak",ga=function(){function e(t,n){i(this,e),this.storageRetriever=t,this.type=n}return s(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ya,"1"),this.storage.removeItem(ya),Promise.resolve(!0)):Promise.resolve(!1)}catch(bx){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ka=10,wa=function(e){l(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=F();return Zn(e)||ar(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=or(),e._shouldAllowMigration=!0,e}return s(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);z()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ka):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=y(v().mark((function e(t,r){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(f(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=y(v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(f(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(f(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ga);wa.type="LOCAL";var ba=wa,_a=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return s(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ga);_a.type="SESSION";var xa=_a;function Ia(e){return Promise.all(e.map(function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ea=function(){function e(t){i(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return s(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=y(v().mark((function e(t){var n,r,i,a,o,u,s,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ia(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Sa(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ea.receivers=[];var Ta=function(){function e(t){i(this,e),this.target=t,this.handlers=new Set}return s(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=y(v().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Sa("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ca(){return window}function Na(){return"undefined"!==typeof Ca().WorkerGlobalScope&&"function"===typeof Ca().importScripts}function Aa(){return Da.apply(this,arguments)}function Da(){return(Da=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ra(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Pa="firebaseLocalStorageDb",Oa=1,La="firebaseLocalStorage",Ma="fbase_key",Fa=function(){function e(t){i(this,e),this.request=t}return s(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ua(e,t){return e.transaction([La],t?"readwrite":"readonly").objectStore(La)}function Va(){var e=indexedDB.deleteDatabase(Pa);return new Fa(e).toPromise()}function ja(){var e=indexedDB.open(Pa,Oa);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(La,{keyPath:Ma})}catch(r){n(r)}})),e.addEventListener("success",y(v().mark((function n(){var r;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(La)){n.next=12;break}return r.close(),n.next=5,Va();case 5:return n.t0=t,n.next=8,ja();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function za(e,t,n){return Ba.apply(this,arguments)}function Ba(){return Ba=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ua(t,!0).put((g(i={},Ma,n),g(i,"value",r),i)),e.abrupt("return",new Fa(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function qa(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=y(v().mark((function e(t,n){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ua(t,!1).get(n),e.next=3,new Fa(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Ga(e,t){var n=Ua(e,!0).delete(t);return new Fa(n).toPromise()}var Ha=function(){function e(){i(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return s(e,[{key:"_openDb",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,ja();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Na()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=y(v().mark((function e(){var t=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ea._getInstance(Na()?self:null),this.receiver._subscribe("keyChanged",function(){var e=y(v().mark((function e(n,r){var i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=y(v().mark((function e(){var t,n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aa();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ta(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ra()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ja();case 5:return t=e.sent,e.next=8,za(t,ya,"1");case 8:return e.next=10,Ga(t,ya);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=y(v().mark((function e(t,n){var r=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return za(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qa(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=y(v().mark((function e(t){var n=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ga(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=y(v().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ua(e,!1).getAll();return new Fa(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=b(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(y(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ha.type="LOCAL";var Wa=Ha;function Qa(e,t){return pn(e,"POST","/v2/accounts/mfaSignIn:start",dn(e,t))}function Ya(e,t){return pn(e,"POST","/v2/accounts/mfaSignIn:finalize",dn(e,t))}function Ja(e){return $a.apply(this,arguments)}function $a(){return($a=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Yt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Za(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var eo=1e12,to=function(){function e(t){i(this,e),this.auth=t,this.counter=eo,this._widgets=new Map}return s(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new no(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||eo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||eo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||eo,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),no=function(){function e(t,n,r){var a=this;i(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){a.execute()};var o="string"===typeof t?document.getElementById(t):t;Zt(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return s(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ro=Za("rcb"),io=new sn(3e4,6e4),ao="https://www.google.com/recaptcha/api.js?",oo=function(){function e(){var t;i(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Ca().grecaptcha)||void 0===t?void 0:t.render)}return s(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Zt(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ca().grecaptcha):new Promise((function(r,i){var a=Ca().setTimeout((function(){i(Yt(e,"network-request-failed"))}),io.get());Ca()[ro]=function(){Ca().clearTimeout(a),delete Ca()[ro];var o=Ca().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Yt(e,"internal-error"))},Xa("".concat(ao,"?").concat(J({onload:ro,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Yt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Ca().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var uo=function(){function e(){i(this,e)}return s(e,[{key:"load",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new to(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),so="recaptcha",co={theme:"light",type:"image"},lo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},co),r=arguments.length>2?arguments[2]:void 0;i(this,e),this.parameters=n,this.type=so,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lr(r),this.isInvisible="invisible"===this.parameters.size,Zt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var a="string"===typeof t?document.getElementById(t):t;Zt(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uo:new oo,this.validateStartingState()}return s(e,[{key:"verify",value:function(){var e=y(v().mark((function e(){var t,n,r,i=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Zt(!this.parameters.sitekey,this.auth,"argument-error"),Zt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Zt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ca()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Zt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=y(v().mark((function e(){var t,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt(on()&&!Na(),this.auth,"internal-error"),e.next=3,fo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ja(this.auth);case 8:Zt(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Zt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function fo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ho=function(){function e(t,n){i(this,e),this.verificationId=t,this.onConfirmation=n}return s(e,[{key:"confirm",value:function(e){var t=Qr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function po(){return(po=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lr(t),e.next=3,go(i,n,ne(r));case 3:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ei(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vo(e,t,n){return mo.apply(this,arguments)}function mo(){return(mo=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ne(t),e.next=3,ki(!1,i,"phone");case 3:return e.next=5,go(i.auth,n,ne(r));case 5:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ti(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yo(){return(yo=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ne(t),e.next=3,go(i.auth,n,ne(r));case 3:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ni(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=y(v().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Zt("string"===typeof a,t,"argument-error"),Zt(r.type===so,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Zt("enroll"===u.type,t,"internal-error"),e.next=13,da(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Zt("signin"===u.type,t,"internal-error"),Zt(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qa(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Br(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ko.apply(this,arguments)}function wo(){return(wo=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yi(ne(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bo=function(){function e(t){i(this,e),this.providerId=e.PROVIDER_ID,this.auth=lr(t)}return s(e,[{key:"verifyPhoneNumber",value:function(e,t){return go(this.auth,e,ne(t))}}],[{key:"credential",value:function(e,t){return Qr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Qr._fromTokenResponse(n,r):null}}]),e}();function _o(e,t){return t?rn(t):(Zt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}bo.PROVIDER_ID="phone",bo.PHONE_SIGN_IN_METHOD="phone";var xo=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,"custom","custom")).params=e,r}return s(n,[{key:"_getIdTokenResponse",value:function(e){return Vr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Vr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Vr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(vr);function Io(e){return xi(e.auth,new xo(e),e.bypassAuthState)}function Eo(e){var t=e.auth,n=e.user;return Zt(n,t,"internal-error"),bi(n,new xo(e),e.bypassAuthState)}function So(e){return To.apply(this,arguments)}function To(){return(To=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Zt(r=t.user,n,"internal-error"),e.abrupt("return",yi(r,new xo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Co=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i(this,e),this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return s(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=y(v().mark((function t(n,r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=y(v().mark((function e(t){var n,r,i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Io;case"linkViaPopup":case"linkViaRedirect":return So;case"reauthViaPopup":case"reauthViaRedirect":return Eo;default:Qt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),No=new sn(2e3,1e4);function Ao(e,t,n){return Do.apply(this,arguments)}function Do(){return(Do=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lr(t),$t(t,n,$r),a=_o(i,r),o=new Lo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(){return(Ro=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t((i=ne(t)).auth,n,$r),a=_o(i.auth,r),o=new Lo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Po(e,t,n){return Oo.apply(this,arguments)}function Oo(){return(Oo=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t((i=ne(t)).auth,n,$r),a=_o(i.auth,r),o=new Lo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lo=function(e){l(n,e);var t=p(n);function n(e,r,a,o,u){var s;return i(this,n),(s=t.call(this,e,r,o,u)).provider=a,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=d(s),s}return s(n,[{key:"executeNotNull",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Zt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=y(v().mark((function e(){var t,n=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tn(1===this.filter.length,"Popup operations only handle one event"),t=Sa(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Yt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Yt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Yt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,No.get())}()}}]),n}(Co);Lo.currentPopupAction=null;var Mo="pendingRedirect",Fo=new Map,Uo=function(e){l(n,e);var t=p(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i(this,n),(a=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,a}return s(n,[{key:"execute",value:function(){var e=y(v().mark((function e(){var t,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Vo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ft(f(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Fo.set(this.auth._key(),t);case 21:return this.bypassAuthState||Fo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=y(v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ft(f(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ft(f(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Co);function Vo(e,t){return jo.apply(this,arguments)}function jo(){return(jo=y(v().mark((function e(t,n){var r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Go(n),i=Ko(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(e,t){return Bo.apply(this,arguments)}function Bo(){return(Bo=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ko(t)._set(Go(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(e,t){Fo.set(e._key(),t)}function Ko(e){return rn(e._redirectPersistence)}function Go(e){return Yn(Mo,e.config.apiKey,e.name)}function Ho(e,t,n){return function(e,t,n){return Wo.apply(this,arguments)}(e,t,n)}function Wo(){return(Wo=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lr(t),$t(t,n,$r),e.next=4,i._initializationPromise;case 4:return a=_o(i,r),e.next=7,zo(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e,t,n){return function(e,t,n){return Yo.apply(this,arguments)}(e,t,n)}function Yo(){return(Yo=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t((i=ne(t)).auth,n,$r),e.next=4,i.auth._initializationPromise;case 4:return a=_o(i.auth,r),e.next=7,zo(a,i.auth);case 7:return e.next=9,nu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(e,t,n){return function(e,t,n){return $o.apply(this,arguments)}(e,t,n)}function $o(){return($o=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t((i=ne(t)).auth,n,$r),e.next=4,i.auth._initializationPromise;case 4:return a=_o(i.auth,r),e.next=7,ki(!1,i,n.providerId);case 7:return e.next=9,zo(a,i.auth);case 9:return e.next=11,nu(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(e,t){return Zo.apply(this,arguments)}function Zo(){return(Zo=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr(t)._initializationPromise;case 2:return e.abrupt("return",eu(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eu(e,t){return tu.apply(this,arguments)}function tu(){return tu=y(v().mark((function e(t,n){var r,i,a,o,u,s=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=lr(t),a=_o(i,n),o=new Uo(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}function nu(e){return ru.apply(this,arguments)}function ru(){return(ru=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sa("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iu=function(){function e(t){i(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return s(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ou(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ou(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(au(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(au(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function au(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ou(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function uu(e){return su.apply(this,arguments)}function su(){return su=y(v().mark((function e(t){var n,r=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",pn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}var cu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lu=/^https?/;function fu(){return(fu=y(v().mark((function e(t){var n,r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uu(t);case 4:n=e.sent,r=n.authorizedDomains,i=b(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!hu(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Qt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function hu(e){var t=an(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!lu.test(r))return!1;if(cu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var du=new sn(3e4,6e4);function pu(){var e=Ca().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ie(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var vu=null;function mu(e){return vu=vu||function(e){return new Promise((function(t,n){var r,i,a;function o(){pu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){pu(),n(Yt(e,"network-request-failed"))},timeout:du.get()})}if(null===(i=null===(r=Ca().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ca().gapi)||void 0===a?void 0:a.load)){var u=Za("iframefcb");return Ca()[u]=function(){gapi.load?o():n(Yt(e,"network-request-failed"))},Xa("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw vu=null,e}))}(e),vu}var yu=new sn(5e3,15e3),gu="__/auth/iframe",ku="emulator/auth/iframe",wu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _u(e){var t=e.config;Zt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?cn(t,ku):"https://".concat(e.config.authDomain,"/").concat(gu),r={apiKey:t.apiKey,appName:e.name,v:tt},i=bu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(J(r).slice(1))}function xu(e){return Iu.apply(this,arguments)}function Iu(){return Iu=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mu(t);case 2:return n=e.sent,Zt(r=Ca().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:_u(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wu,dontclear:!0},(function(e){return new Promise(function(){var n=y(v().mark((function n(r,i){var a,o,u;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ca().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Yt(t,"network-request-failed"),o=Ca().setTimeout((function(){i(a)}),yu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Iu.apply(this,arguments)}var Eu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Su=500,Tu=600,Cu="_blank",Nu="http://localhost",Au=function(){function e(t){i(this,e),this.window=t,this.associatedEvent=null}return s(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Du(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Su,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tu,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Eu),{width:r.toString(),height:i.toString(),top:a,left:o}),c=F().toLowerCase();n&&(u=er(c)?Cu:n),Xn(c)&&(t=t||Nu,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=I(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return ar(arguments.length>0&&void 0!==arguments[0]?arguments[0]:F())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Au(null);var f=window.open(t||"",u,l);Zt(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Au(f)}var Ru="__/auth/handler",Pu="emulator/auth/handler";function Ou(e,t,n,r,i,a){Zt(e.config.authDomain,e,"auth-domain-config-required"),Zt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tt,eventId:i};if(t instanceof $r){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=I(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Xr){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var m=v[p];void 0===d[m]&&delete d[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ru);return cn(t,Pu)}(e),"?").concat(J(d).slice(1))}var Lu="webStorageSupport",Mu=function(){function e(){i(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xa,this._completeRedirectFn=eu,this._overrideRedirectResult=qo}return s(e,[{key:"_openPopup",value:function(){var e=y(v().mark((function e(t,n,r,i){var a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ou(t,n,r,an(),i),e.abrupt("return",Du(t,o,Sa()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=y(v().mark((function e(t,n,r,i){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ou(t,n,r,an(),i),Ca().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(tn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xu(t);case 2:return n=e.sent,r=new iu(t),n.register("authEvent",(function(e){return Zt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Lu,{type:Lu},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Lu];void 0!==i&&t(!!i),Qt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return or()||Zn()||ar()}}]),e}(),Fu=Mu,Uu=function(){function e(t){i(this,e),this.factorId=t}return s(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return en("unexpected MultiFactorSessionType")}}}]),e}(),Vu=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,"phone")).credential=e,r}return s(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return pn(e,"POST","/v2/accounts/mfaEnrollment:finalize",dn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return pn(e,"POST","/v2/accounts/mfaSignIn:finalize",dn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Uu),ju=function(){function e(){i(this,e)}return s(e,null,[{key:"assertion",value:function(e){return Vu._fromCredential(e)}}]),e}();ju.FACTOR_ID="phone";var zu=function(){function e(){i(this,e)}return s(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Bu._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Bu._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},pn(i,"POST","/v2/accounts/mfaEnrollment:start",dn(i,a));case 4:return r=e.sent,e.abrupt("return",qu._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();zu.FACTOR_ID="totp";var Bu=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,"totp")).otp=e,o.enrollmentId=r,o.secret=a,o}return s(n,[{key:"_finalizeEnroll",value:function(){var e=y(v().mark((function e(t,n,r){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",pa(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Ya(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Uu),qu=function(){function e(t,n,r,a,o,u,s){i(this,e),this.sessionInfo=u,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=a,this.enrollmentCompletionDeadline=o}return s(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Ku(e)||Ku(t))&&(r=!0),r&&(Ku(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Ku(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Ku(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Gu="@firebase/auth",Hu="0.22.0",Wu=function(){function e(t){i(this,e),this.auth=t,this.internalListeners=new Map}return s(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Qu;!function(e){var t;null===(t=O())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Yu(){return window}Qu="Browser",Qe(new ae("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Zt(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Zt(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Qu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ur(Qu)},i=new cr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Qe(new ae("auth-internal",(function(e){return function(e){return new Wu(e)}(lr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ut(Gu,Hu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Qu)),ut(Gu,Hu,"esm2017");var Ju=2e3;function $u(e,t,n){return Xu.apply(this,arguments)}function Xu(){return Xu=y(v().mark((function e(t,n,r){var i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Yu(),o=a.BuildInfo,tn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,is(n.sessionId);case 4:return u=e.sent,s={},ar()?s.ibi=o.packageName:nr()?s.apn=o.packageName:Qt(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ou(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function Zu(){return(Zu=y(v().mark((function e(t){var n,r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yu(),r=n.BuildInfo,i={},ar()?i.iosBundleId=r.packageName:nr()?i.androidPackageName=r.packageName:Qt(t,"operation-not-supported-in-this-environment"),e.next=5,uu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e){var t=Yu().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function ts(e,t,n){return ns.apply(this,arguments)}function ns(){return ns=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yu(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Yt(t,"redirect-cancelled-by-user"))}),Ju))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),nr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),ns.apply(this,arguments)}function rs(e){var t,n,r,i,a,o,u,s,c,l,f=Yu();Zt("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Zt("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Zt("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zt("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zt("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function is(e){return as.apply(this,arguments)}function as(){return(as=y(v().mark((function e(t){var n,r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=os(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(e){if(tn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var us=20,ss=function(e){l(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return s(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ft(f(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(iu);function cs(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:ps(),postBody:null,tenantId:e.tenantId,error:Yt(e,"no-auth-event")}}function ls(e,t){return vs()._set(ms(e),t)}function fs(e){return hs.apply(this,arguments)}function hs(){return(hs=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vs()._get(ms(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,vs()._remove(ms(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ds(e,t){var n,r,i=function(e){var t=ys(e),n=t.link?decodeURIComponent(t.link):void 0,r=ys(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ys(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ys(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Yt(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ps(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<us;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function vs(){return rn(ba)}function ms(e){return Yn("authEvent",e.config.apiKey,e.name)}function ys(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=_(t=n)||re(t)||w(t)||x();r[0];return $(r.slice(1).join("?"))}var gs=function(){function e(){i(this,e),this._redirectPersistence=xa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=eu,this._overrideRedirectResult=qo}return s(e,[{key:"_initialize",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new ss(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Qt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=y(v().mark((function e(t,n,r,i){var a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rs(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Fo.clear(),e.next=10,this._originValidation(t);case 10:return o=cs(t,r,i),e.next=13,ls(t,o);case 13:return e.next=15,$u(t,o,n);case 15:return u=e.sent,e.next=18,es(u);case 18:return s=e.sent,e.abrupt("return",ts(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Zu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Yu(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(y(v().mark((function n(){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fs(e);case 2:t.onEvent(ws());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=y(v().mark((function n(r){var i,a;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,fs(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ds(i,r.url)),t.onEvent(a||ws());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Yu().handleOpenURL=function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ks=gs;function ws(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yt("no-auth-event")}}var bs="@firebase/auth-compat",_s="0.3.7",xs=1e3;function Is(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Es(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return!("file:"!==Is()&&"ionic:"!==Is()&&"capacitor:"!==Is()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ss(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return z()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/Edge\/\d+/.test(e)}(e)}function Ts(){try{var e=self.localStorage,t=Sa();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ss()||B()}catch(n){return Cs()&&B()}return!1}function Cs(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ns(){return("http:"===Is()||"https:"===Is()||V()||Es())&&!(j()||U())&&Ts()&&!Cs()}function As(){return Es()&&"undefined"!==typeof document}function Ds(){return Rs.apply(this,arguments)}function Rs(){return(Rs=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(As()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),xs);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ps={LOCAL:"local",NONE:"none",SESSION:"session"},Os=Zt,Ls="persistence";function Ms(e,t){Os(Object.values(Ps).includes(t),e,"invalid-persistence-type"),j()?Os(t!==Ps.SESSION,e,"unsupported-persistence-type"):U()?Os(t===Ps.NONE,e,"unsupported-persistence-type"):Cs()?Os(t===Ps.NONE||t===Ps.LOCAL&&B(),e,"unsupported-persistence-type"):Os(t===Ps.NONE||Ts(),e,"unsupported-persistence-type")}function Fs(e){return Us.apply(this,arguments)}function Us(){return(Us=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Vs(),r=Yn(Ls,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vs(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var js=Zt,zs=function(){function e(){i(this,e),this.browserResolver=rn(Fu),this.cordovaResolver=rn(ks),this.underlyingResolver=null,this._redirectPersistence=xa,this._completeRedirectFn=eu,this._overrideRedirectResult=qo}return s(e,[{key:"_initialize",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=y(v().mark((function e(t,n,r,i){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=y(v().mark((function e(t,n,r,i){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return As()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return js(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ds();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bs(e){return e.unwrap()}function qs(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Qs(e,function(e,t){var n,r=ne(e),i=t;return Zt(t.customData.operationType,r,"argument-error"),Zt(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ha._fromError(r,i)}(e,t));else if(r){var i=Ks(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Ks(e){var t=(e instanceof K?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof K)&&"temporaryProof"in t&&"phoneNumber"in t)return bo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===jt.PASSWORD)return null;switch(r){case jt.GOOGLE:n=ti;break;case jt.FACEBOOK:n=ei;break;case jt.GITHUB:n=ni;break;case jt.TWITTER:n=oi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ri._create(r,u):zr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Zr(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof K?n.credentialFromError(e):n.credentialFromResult(e)}function Gs(e,t){return t.catch((function(t){throw t instanceof K&&qs(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ks(t)),additionalUserInfo:la(e),user:Ys.getOrCreate(r)}}))}function Hs(e,t){return Ws.apply(this,arguments)}function Ws(){return(Ws=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Gs(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qs=function(){function e(t,n){i(this,e),this.resolver=n,this.auth=t.wrapped()}return s(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Gs(Bs(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Ys=function(){function e(t){i(this,e),this._delegate=t,this.multiFactor=function(e){var t=ne(e);return ma.has(t)||ma.set(t,va._fromUser(t)),ma.get(t)}(t)}return s(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gs(this.auth,Ti(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hs(this.auth,vo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gs(this.auth,Po(this._delegate,t,zs)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fs(lr(this.auth));case 2:return e.abrupt("return",Jo(this._delegate,t,zs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gs(this.auth,Ni(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Hs(this.auth,function(e,t,n){return yo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Gs(this.auth,function(e,t,n){return Ro.apply(this,arguments)}(this._delegate,e,zs))}},{key:"reauthenticateWithRedirect",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fs(lr(this.auth));case 2:return e.abrupt("return",Qo(this._delegate,t,zs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return $i.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return na(ne(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return na(ne(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return wo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ta.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Xi.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Ys.USER_MAP=new WeakMap;var Js=Zt,$s=function(){function e(t,n){if(i(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Js(r,"invalid-api-key",{appName:t.name}),Js(r,"invalid-api-key",{appName:t.name});var a="undefined"!==typeof window?zs:void 0;this._delegate=n.initialize({options:{persistence:Zs(r,t.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(qt),this.linkUnderlyingAuth()}return s(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Ys.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){hr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ji.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return zi(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Vi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gs(this._delegate,Ki(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ji.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Yr.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Js(Ns(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Xo(this._delegate,zs);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Gs(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){lr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Xs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Xs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Hi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ui.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ms(this._delegate,t),e.t0=t,e.next=e.t0===Ps.SESSION?4:e.t0===Ps.LOCAL?6:e.t0===Ps.NONE?11:13;break;case 4:return n=xa,e.abrupt("break",14);case 6:return e.next=8,rn(Wa)._isAvailable();case 8:return r=e.sent,n=r?Wa:ba,e.abrupt("break",14);case 11:return n=Qn,e.abrupt("break",14);case 13:return e.abrupt("return",Qt("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Gs(this._delegate,function(e){return fi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Gs(this._delegate,Ei(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Gs(this._delegate,function(e,t){return Pi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Gs(this._delegate,function(e,t,n){return Ei(ne(e),Jr.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Gs(this._delegate,function(e,t,n){return Wi.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Hs(this._delegate,function(e,t,n){return po.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Js(Ns(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Gs(this._delegate,Ao(this._delegate,t,zs)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Js(Ns(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Fs(this._delegate);case 3:return e.abrupt("return",Ho(this._delegate,t,zs));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return qi.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Xs(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Ys.getOrCreate(e))},error:t,complete:n}}function Zs(e,t){var n=function(e,t){var n=Vs();if(!n)return[];var r=Yn(Ls,e,t);switch(n.getItem(r)){case Ps.NONE:return[Qn];case Ps.LOCAL:return[Wa,xa];case Ps.SESSION:return[xa];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Wa)||n.push(Wa),"undefined"!==typeof window)for(var r=0,i=[ba,xa];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Qn)||n.push(Qn),n}$s.Persistence=Ps;var ec=function(){function e(){i(this,e),this.providerId="phone",this._delegate=new bo(Bs(Mt.auth()))}return s(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return bo.credential(e,t)}}]),e}();ec.PHONE_SIGN_IN_METHOD=bo.PHONE_SIGN_IN_METHOD,ec.PROVIDER_ID=bo.PROVIDER_ID;var tc,nc=Zt,rc=function(){function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt.app();i(this,e),nc(null===(r=a.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:a.name}),this._delegate=new lo(t,n,a.auth()),this.type=this._delegate.type}return s(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),ic="auth-compat";(tc=Mt).INTERNAL.registerComponent(new ae(ic,(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new $s(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:zt.EMAIL_SIGNIN,PASSWORD_RESET:zt.PASSWORD_RESET,RECOVER_EMAIL:zt.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:zt.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:zt.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:zt.VERIFY_EMAIL}},EmailAuthProvider:Jr,FacebookAuthProvider:ei,GithubAuthProvider:ni,GoogleAuthProvider:ti,OAuthProvider:Zr,SAMLAuthProvider:ai,PhoneAuthProvider:ec,PhoneMultiFactorGenerator:ju,RecaptchaVerifier:rc,TwitterAuthProvider:oi,Auth:$s,AuthCredential:vr,Error:K}).setInstantiationMode("LAZY").setMultipleInstances(!1)),tc.registerVersion(bs,_s);var ac,oc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},uc={},sc=sc||{},cc=oc||self;function lc(){}function fc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function hc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var dc="closure_uid_"+(1e9*Math.random()>>>0),pc=0;function vc(e,t,n){return e.call.apply(e.bind,arguments)}function mc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function yc(e,t,n){return(yc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vc:mc).apply(null,arguments)}function gc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function kc(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function wc(){this.s=this.s,this.o=this.o}wc.prototype.s=!1,wc.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,dc)&&e[dc]||(e[dc]=++pc))},wc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function _c(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function xc(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(fc(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Ic(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ic.prototype.h=function(){this.defaultPrevented=!0};var Ec=function(){if(!cc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{cc.addEventListener("test",lc,t),cc.removeEventListener("test",lc,t)}catch(n){}return e}();function Sc(e){return/^[\s\xa0]*$/.test(e)}var Tc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Cc(e,t){return e<t?-1:e>t?1:0}function Nc(){var e=cc.navigator;return e&&(e=e.userAgent)?e:""}function Ac(e){return-1!=Nc().indexOf(e)}function Dc(e){return Dc[" "](e),e}Dc[" "]=lc;var Rc,Pc=Ac("Opera"),Oc=Ac("Trident")||Ac("MSIE"),Lc=Ac("Edge"),Mc=Lc||Oc,Fc=Ac("Gecko")&&!(-1!=Nc().toLowerCase().indexOf("webkit")&&!Ac("Edge"))&&!(Ac("Trident")||Ac("MSIE"))&&!Ac("Edge"),Uc=-1!=Nc().toLowerCase().indexOf("webkit")&&!Ac("Edge");function Vc(){var e=cc.document;return e?e.documentMode:void 0}e:{var jc="",zc=function(){var e=Nc();return Fc?/rv:([^\);]+)(\)|;)/.exec(e):Lc?/Edge\/([\d\.]+)/.exec(e):Oc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Uc?/WebKit\/(\S+)/.exec(e):Pc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(zc&&(jc=zc?zc[1]:""),Oc){var Bc=Vc();if(null!=Bc&&Bc>parseFloat(jc)){Rc=String(Bc);break e}}Rc=jc}var qc,Kc={};function Gc(){return function(e){var t=Kc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Tc(String(Rc)).split("."),n=Tc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Cc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Cc(0==a[2].length,0==o[2].length)||Cc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(cc.document&&Oc){var Hc=Vc();qc=Hc||(parseInt(Rc,10)||void 0)}else qc=void 0;var Wc=qc;function Qc(e,t){if(Ic.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fc){e:{try{Dc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Yc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Qc.X.h.call(this)}}kc(Qc,Ic);var Yc={2:"touch",3:"pen",4:"mouse"};Qc.prototype.h=function(){Qc.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jc="closure_listenable_"+(1e6*Math.random()|0),$c=0;function Xc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++$c,this.ba=this.ea=!1}function Zc(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function el(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function tl(e){var t={};for(var n in e)t[n]=e[n];return t}var nl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<nl.length;a++)n=nl[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function il(e){this.src=e,this.g={},this.h=0}function al(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=bc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Zc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ol(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}il.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ol(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Xc(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var ul="closure_lm_"+(1e6*Math.random()|0),sl={};function cl(e,t,n,r,i){if(r&&r.once)return fl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)cl(e,t[a],n,r,i);return null}return n=gl(n),e&&e[Jc]?e.N(t,n,hc(r)?!!r.capture:!!r,i):ll(e,t,n,!1,r,i)}function ll(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=hc(i)?!!i.capture:!!i,u=ml(e);if(u||(e[ul]=u=new il(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=vl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ec||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(pl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function fl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)fl(e,t[a],n,r,i);return null}return n=gl(n),e&&e[Jc]?e.O(t,n,hc(r)?!!r.capture:!!r,i):ll(e,t,n,!0,r,i)}function hl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)hl(e,t[a],n,r,i);else r=hc(r)?!!r.capture:!!r,n=gl(n),e&&e[Jc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ol(a=e.g[t],n,r,i))&&(Zc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ml(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ol(t,n,r,i)),(n=-1<e?t[e]:null)&&dl(n))}function dl(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Jc])al(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(pl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ml(t))?(al(n,e),0==n.h&&(n.src=null,t[ul]=null)):Zc(e)}}}function pl(e){return e in sl?sl[e]:sl[e]="on"+e}function vl(e,t){if(e.ba)e=!0;else{t=new Qc(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&dl(e),e=n.call(r,t)}return e}function ml(e){return(e=e[ul])instanceof il?e:null}var yl="__closure_events_fn_"+(1e9*Math.random()>>>0);function gl(e){return"function"===typeof e?e:(e[yl]||(e[yl]=function(t){return e.handleEvent(t)}),e[yl])}function kl(){wc.call(this),this.i=new il(this),this.P=this,this.I=null}function wl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ic(t,e);else if(t instanceof Ic)t.target=t.target||e;else{var i=t;rl(t=new Ic(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=bl(o,r,!0,t)&&i}if(i=bl(o=t.g=e,r,!0,t)&&i,i=bl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=bl(o=t.g=n[a],r,!1,t)&&i}function bl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&al(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}kc(kl,wc),kl.prototype[Jc]=!0,kl.prototype.removeEventListener=function(e,t,n,r){hl(this,e,t,n,r)},kl.prototype.M=function(){if(kl.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zc(n[r]);delete t.g[e],t.h--}}this.I=null},kl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},kl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var _l=cc.JSON.stringify;function xl(){var e=Dl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Il,El=function(){function e(){i(this,e),this.h=this.g=null}return s(e,[{key:"add",value:function(e,t){var n=Sl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Sl=new(function(){function e(t,n){i(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return s(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Tl}),(function(e){return e.reset()})),Tl=function(){function e(){i(this,e),this.next=this.g=this.h=null}return s(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Cl(e){cc.setTimeout((function(){throw e}),0)}function Nl(e,t){Il||function(){var e=cc.Promise.resolve(void 0);Il=function(){e.then(Rl)}}(),Al||(Il(),Al=!0),Dl.add(e,t)}var Al=!1,Dl=new El;function Rl(){for(var e;e=xl();){try{e.h.call(e.g)}catch(n){Cl(n)}var t=Sl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Al=!1}function Pl(e,t){kl.call(this),this.h=e||1,this.g=t||cc,this.j=yc(this.lb,this),this.l=Date.now()}function Ol(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Ll(e,t,n){if("function"===typeof e)n&&(e=yc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=yc(e.handleEvent,e)}return 2147483647<Number(t)?-1:cc.setTimeout(e,t||0)}function Ml(e){e.g=Ll((function(){e.g=null,e.i&&(e.i=!1,Ml(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}kc(Pl,kl),(ac=Pl.prototype).ca=!1,ac.R=null,ac.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),wl(this,"tick"),this.ca&&(Ol(this),this.start()))}},ac.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ac.M=function(){Pl.X.M.call(this),Ol(this),delete this.g};var Fl=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return s(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ml(this)}},{key:"M",value:function(){Ft(f(n.prototype),"M",this).call(this),this.g&&(cc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(wc);function Ul(e){wc.call(this),this.h=e,this.g={}}kc(Ul,wc);var Vl=[];function jl(e,t,n,r){Array.isArray(n)||(n&&(Vl[0]=n.toString()),n=Vl);for(var i=0;i<n.length;i++){var a=cl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function zl(e){el(e.g,(function(e,t){this.g.hasOwnProperty(t)&&dl(e)}),e),e.g={}}function Bl(){this.g=!0}function ql(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return _l(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ul.prototype.M=function(){Ul.X.M.call(this),zl(this)},Ul.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bl.prototype.Aa=function(){this.g=!1},Bl.prototype.info=function(){};var Kl={},Gl=null;function Hl(){return Gl=Gl||new kl}function Wl(e){Ic.call(this,Kl.Pa,e)}function Ql(e){var t=Hl();wl(t,new Wl(t))}function Yl(e,t){Ic.call(this,Kl.STAT_EVENT,e),this.stat=t}function Jl(e){var t=Hl();wl(t,new Yl(t,e))}function $l(e,t){Ic.call(this,Kl.Qa,e),this.size=t}function Xl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return cc.setTimeout((function(){e()}),t)}Kl.Pa="serverreachability",kc(Wl,Ic),Kl.STAT_EVENT="statevent",kc(Yl,Ic),Kl.Qa="timingevent",kc($l,Ic);var Zl={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ef={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function tf(){}function nf(e){return e.h||(e.h=e.i())}function rf(){}tf.prototype.h=null;var af,of={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function uf(){Ic.call(this,"d")}function sf(){Ic.call(this,"c")}function cf(){}function lf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Ul(this),this.O=hf,e=Mc?125:void 0,this.T=new Pl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ff}function ff(){this.i=null,this.g="",this.h=!1}kc(uf,Ic),kc(sf,Ic),kc(cf,tf),cf.prototype.g=function(){return new XMLHttpRequest},cf.prototype.i=function(){return{}},af=new cf;var hf=45e3,df={},pf={};function vf(e,t,n){e.K=1,e.v=Of(Nf(t)),e.s=n,e.P=!0,mf(e,null)}function mf(e,t){e.F=Date.now(),wf(e),e.A=Nf(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Wf(n.i,"t",r),e.C=0,n=e.l.H,e.h=new ff,e.g=Qh(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Fl(yc(e.La,e,e.g),e.N)),jl(e.S,e.g,"readystatechange",e.ib),t=e.H?tl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Ql(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function yf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function gf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=kf(e,n))==pf){4==t&&(e.o=4,Jl(14),i=!1),ql(e.j,e.m,null,"[Incomplete Response]");break}if(r==df){e.o=4,Jl(15),ql(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ql(e.j,e.m,r,null),Ef(e,r)}yf(e)&&r!=pf&&r!=df&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Jl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),jh(t),t.K=!0,Jl(11))):(ql(e.j,e.m,n,"[Invalid Chunked Response]"),If(e),xf(e))}function kf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?pf:(n=Number(t.substring(n,r)),isNaN(n)?df:(r+=1)+n>t.length?pf:(t=t.substr(r,n),e.C=r+n,t))}function wf(e){e.V=Date.now()+e.O,bf(e,e.O)}function bf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Xl(yc(e.gb,e),t)}function _f(e){e.B&&(cc.clearTimeout(e.B),e.B=null)}function xf(e){0==e.l.G||e.I||qh(e.l,e)}function If(e){_f(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ol(e.T),zl(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ef(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||th(n.h,e)))if(!e.J&&th(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Bh(n),Rh(n)}Vh(n),Jl(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Xl(yc(n.cb,n),6e3));if(1>=eh(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Gh(n,11)}else if((e.J||n.g==e)&&Bh(n),!Sc(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(nh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Pf(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Wh(r,r.H?r.ka:null,r.V),d.J){rh(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(_f(p),wf(p)),r.g=d}else Uh(r);0<n.i.length&&Oh(n)}else"stop"!=a[0]&&"close"!=a[0]||Gh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Gh(n,7):Dh(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Ql()}catch(a){}}function Sf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(fc(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(fc(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(fc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(ac=lf.prototype).setTimeout=function(e){this.O=e},ac.ib=function(e){e=e.target;var t=this.L;t&&3==Eh(e)?t.l():this.La(e)},ac.La=function(e){try{if(e==this.g)e:{var t=Eh(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Mc||this.g&&(this.h.h||this.g.fa()||Sh(this.g)))){this.I||4!=t||7==n||Ql(),_f(this);var r=this.g.aa();this.Y=r;t:if(yf(this)){var i=Sh(this.g);e="";var a=i.length,o=4==Eh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){If(this),xf(this);var u="";break t}this.h.i=new cc.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sc(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Jl(12),If(this),xf(this);break e}ql(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ef(this,r)}this.P?(gf(this,t,u),Mc&&this.i&&3==t&&(jl(this.S,this.T,"tick",this.hb),this.T.start())):(ql(this.j,this.m,u,null),Ef(this,u)),4==t&&If(this),this.i&&!this.I&&(4==t?qh(this.l,this):(this.i=!1,wf(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Jl(12)):(this.o=0,Jl(13)),If(this),xf(this)}}}catch(t){}},ac.hb=function(){if(this.g){var e=Eh(this.g),t=this.g.fa();this.C<t.length&&(_f(this),gf(this,e,t),this.i&&4!=e&&wf(this))}},ac.cancel=function(){this.I=!0,If(this)},ac.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ql(),Jl(17)),If(this),this.o=2,xf(this)):bf(this,this.V-e)};var Tf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cf(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Cf){this.h=void 0!==t?t:e.h,Af(this,e.j),this.s=e.s,this.g=e.g,Df(this,e.m),this.l=e.l,t=e.i;var n=new qf;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Rf(this,n),this.o=e.o}else e&&(n=String(e).match(Tf))?(this.h=!!t,Af(this,n[1]||"",!0),this.s=Lf(n[2]||""),this.g=Lf(n[3]||"",!0),Df(this,n[4]),this.l=Lf(n[5]||"",!0),Rf(this,n[6]||"",!0),this.o=Lf(n[7]||"")):(this.h=!!t,this.i=new qf(null,this.h))}function Nf(e){return new Cf(e)}function Af(e,t,n){e.j=n?Lf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Df(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Rf(e,t,n){t instanceof qf?(e.i=t,function(e,t){t&&!e.j&&(Kf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Gf(this,t),Wf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Mf(t,zf)),e.i=new qf(t,e.h))}function Pf(e,t,n){e.i.set(t,n)}function Of(e){return Pf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Lf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Mf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ff),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ff(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Cf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Mf(t,Uf,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Mf(t,Uf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Mf(n,"/"==n.charAt(0)?jf:Vf,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Mf(n,Bf)),e.join("")};var Uf=/[#\/\?@]/g,Vf=/[#\?:]/g,jf=/[#\?]/g,zf=/[#\?@]/g,Bf=/#/g;function qf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Kf(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Gf(e,t){Kf(e),t=Qf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Hf(e,t){return Kf(e),t=Qf(e,t),e.g.has(t)}function Wf(e,t,n){Gf(e,t),0<n.length&&(e.i=null,e.g.set(Qf(e,t),_c(n)),e.h+=n.length)}function Qf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ac=qf.prototype).add=function(e,t){Kf(this),this.i=null,e=Qf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ac.forEach=function(e,t){Kf(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},ac.oa=function(){Kf(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},ac.W=function(e){Kf(this);var t=[];if("string"===typeof e)Hf(this,e)&&(t=t.concat(this.g.get(Qf(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},ac.set=function(e,t){return Kf(this),this.i=null,Hf(this,e=Qf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ac.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},ac.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Yf=s((function e(t,n){i(this,e),this.h=t,this.g=n}));function Jf(e){this.l=e||Xf,cc.PerformanceNavigationTiming?e=0<(e=cc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(cc.g&&cc.g.Ga&&cc.g.Ga()&&cc.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $f,Xf=10;function Zf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function eh(e){return e.h?1:e.g?e.g.size:0}function th(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function nh(e,t){e.g?e.g.add(t):e.h=t}function rh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ih(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=b(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return _c(e.i)}function ah(){}function oh(){this.g=new ah}function uh(e,t,n){var r=n||"";try{Sf(e,(function(e,n){var i=e;hc(e)&&(i=_l(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ch(e){this.l=e.ac||null,this.j=e.jb||!1}function lh(e,t){kl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=fh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jf.prototype.cancel=function(){if(this.i=ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=b(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ah.prototype.stringify=function(e){return cc.JSON.stringify(e,void 0)},ah.prototype.parse=function(e){return cc.JSON.parse(e,void 0)},kc(ch,tf),ch.prototype.g=function(){return new lh(this.l,this.j)},ch.prototype.i=($f={},function(){return $f}),kc(lh,kl);var fh=0;function hh(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function dh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ph(e)}function ph(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ac=lh.prototype).open=function(e,t){if(this.readyState!=fh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ph(this)},ac.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||cc).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},ac.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dh(this)),this.readyState=fh},ac.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ph(this)),this.g&&(this.readyState=3,ph(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof cc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hh(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},ac.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?dh(this):ph(this),3==this.readyState&&hh(this)}},ac.Va=function(e){this.g&&(this.response=this.responseText=e,dh(this))},ac.Ua=function(e){this.g&&(this.response=e,dh(this))},ac.ga=function(){this.g&&dh(this)},ac.setRequestHeader=function(e,t){this.v.append(e,t)},ac.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ac.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(lh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var vh=cc.JSON.parse;function mh(e){kl.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yh,this.K=this.L=!1}kc(mh,kl);var yh="",gh=/^https?$/i,kh=["POST","PUT"];function wh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,bh(e),xh(e)}function bh(e){e.D||(e.D=!0,wl(e,"complete"),wl(e,"error"))}function _h(e){if(e.h&&"undefined"!=typeof sc&&(!e.C[1]||4!=Eh(e)||2!=e.aa()))if(e.v&&4==Eh(e))Ll(e.Ha,0,e);else if(wl(e,"readystatechange"),4==Eh(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Tf)[1]||null;if(!a&&cc.self&&cc.self.location){var o=cc.self.location.protocol;a=o.substr(0,o.length-1)}i=!gh.test(a?a.toLowerCase():"")}t=i}if(t)wl(e,"complete"),wl(e,"success");else{e.m=6;try{var u=2<Eh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",bh(e)}}finally{xh(e)}}}function xh(e,t){if(e.g){Ih(e);var n=e.g,r=e.C[0]?lc:null;e.g=null,e.C=null,t||wl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ih(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(cc.clearTimeout(e.A),e.A=null)}function Eh(e){return e.g?e.g.readyState:0}function Sh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case yh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(fd){return null}}function Th(e){var t="";return el(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ch(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Th(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pf(e,t,n))}function Nh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ah(e){this.Ca=0,this.i=[],this.j=new Bl,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Nh("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Nh("baseRetryDelayMs",5e3,e),this.bb=Nh("retryDelaySeedMs",1e4,e),this.$a=Nh("forwardChannelMaxRetries",2,e),this.ta=Nh("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Jf(e&&e.concurrentRequestLimit),this.Fa=new oh,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Dh(e){if(Ph(e),3==e.G){var t=e.U++,n=Nf(e.F);Pf(n,"SID",e.I),Pf(n,"RID",t),Pf(n,"TYPE","terminate"),Mh(e,n),(t=new lf(e,e.j,t,void 0)).K=2,t.v=Of(Nf(n)),n=!1,cc.navigator&&cc.navigator.sendBeacon&&(n=cc.navigator.sendBeacon(t.v.toString(),"")),!n&&cc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Qh(t.l,null),t.g.da(t.v)),t.F=Date.now(),wf(t)}Hh(e)}function Rh(e){e.g&&(jh(e),e.g.cancel(),e.g=null)}function Ph(e){Rh(e),e.u&&(cc.clearTimeout(e.u),e.u=null),Bh(e),e.h.cancel(),e.m&&("number"===typeof e.m&&cc.clearTimeout(e.m),e.m=null)}function Oh(e){Zf(e.h)||e.m||(e.m=!0,Nl(e.Ja,e),e.C=0)}function Lh(e,t){var n;n=t?t.m:e.U++;var r=Nf(e.F);Pf(r,"SID",e.I),Pf(r,"RID",n),Pf(r,"AID",e.T),Mh(e,r),e.o&&e.s&&Ch(r,e.o,e.s),n=new lf(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Fh(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),nh(e.h,n),vf(n,r,t)}function Mh(e,t){e.ia&&el(e.ia,(function(e,n){Pf(t,n,e)})),e.l&&Sf({},(function(e,n){Pf(t,n,e)}))}function Fh(e,t,n){n=Math.min(e.i.length,n);var r=e.l?yc(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{uh(l,o,"req"+c+"_")}catch(bd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Uh(e){e.g||e.u||(e.Z=1,Nl(e.Ia,e),e.A=0)}function Vh(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Xl(yc(e.Ia,e),Kh(e,e.A)),e.A++,!0)}function jh(e){null!=e.B&&(cc.clearTimeout(e.B),e.B=null)}function zh(e){e.g=new lf(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Nf(e.sa);Pf(t,"RID","rpc"),Pf(t,"SID",e.I),Pf(t,"CI",e.L?"0":"1"),Pf(t,"AID",e.T),Pf(t,"TYPE","xmlhttp"),Mh(e,t),e.o&&e.s&&Ch(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Of(Nf(t)),n.s=null,n.P=!0,mf(n,e)}function Bh(e){null!=e.v&&(cc.clearTimeout(e.v),e.v=null)}function qh(e,t){var n=null;if(e.g==t){Bh(e),jh(e),e.g=null;var r=2}else{if(!th(e.h,t))return;n=t.D,rh(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;wl(r=Hl(),new $l(r,n)),Oh(e)}else Uh(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(eh(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Xl(yc(e.Ja,e,t),Kh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Vh(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Gh(e,5);break;case 4:Gh(e,10);break;case 3:Gh(e,6);break;default:Gh(e,2)}}function Kh(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Gh(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=yc(e.kb,e);n||(n=new Cf("//www.google.com/images/cleardot.gif"),cc.location&&"http"==cc.location.protocol||Af(n,"https"),Of(n)),function(e,t){var n=new Bl;if(cc.Image){var r=new Image;r.onload=gc(sh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=gc(sh,n,r,"TestLoadImage: error",!1,t),r.onabort=gc(sh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=gc(sh,n,r,"TestLoadImage: timeout",!1,t),cc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Jl(2);e.G=0,e.l&&e.l.va(t),Hh(e),Ph(e)}function Hh(e){if(e.G=0,e.la=[],e.l){var t=ih(e.h);0==t.length&&0==e.i.length||(xc(e.la,t),xc(e.la,e.i),e.h.i.length=0,_c(e.i),e.i.length=0),e.l.ua()}}function Wh(e,t,n){var r=n instanceof Cf?Nf(n):new Cf(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Df(r,r.m);else{var i=cc.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Cf(null,void 0);r&&Af(a,r),t&&(a.g=t),i&&Df(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Pf(r,n,t),Pf(r,"VER",e.ma),Mh(e,r),r}function Qh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new mh(new ch({jb:!0})):new mh(e.ra)).Ka(e.H),t}function Yh(){}function Jh(){if(Oc&&!(10<=Number(Wc)))throw Error("Environmental error: no available transport.")}function $h(e,t){kl.call(this),this.g=new Ah(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Sc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Sc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ed(this)}function Xh(e){uf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zh(){sf.call(this),this.status=1}function ed(e){this.g=e}(ac=mh.prototype).Ka=function(e){this.L=e},ac.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():af.g(),this.C=this.u?nf(this.u):nf(af),this.g.onreadystatechange=yc(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void wh(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=b(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=cc.FormData&&e instanceof cc.FormData,!(0<=bc(kh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=b(n);try{for(c.s();!(s=c.n()).done;){var l=I(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ih(this),0<this.B&&((this.K=function(e){return Oc&&Gc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yc(this.qa,this)):this.A=Ll(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){wh(this,u)}},ac.qa=function(){"undefined"!=typeof sc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wl(this,"timeout"),this.abort(8))},ac.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wl(this,"complete"),wl(this,"abort"),xh(this))},ac.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xh(this,!0)),mh.X.M.call(this)},ac.Ha=function(){this.s||(this.F||this.v||this.l?_h(this):this.fb())},ac.fb=function(){_h(this)},ac.aa=function(){try{return 2<Eh(this)?this.g.status:-1}catch($f){return-1}},ac.fa=function(){try{return this.g?this.g.responseText:""}catch($f){return""}},ac.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),vh(t)}},ac.Ea=function(){return this.m},ac.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ac=Ah.prototype).ma=8,ac.G=1,ac.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new lf(this,this.j,e,void 0),n=this.s;if(this.S&&(n?rl(n=tl(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Fh(this,t,r),Pf(i=Nf(this.F),"RID",e),Pf(i,"CVER",22),this.D&&Pf(i,"X-HTTP-Session-Id",this.D),Mh(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Th(n)))+"&"+r:this.o&&Ch(i,this.o,n)),nh(this.h,t),this.Ya&&Pf(i,"TYPE","init"),this.O?(Pf(i,"$req",r),Pf(i,"SID","null"),t.Z=!0,vf(t,i,null)):vf(t,i,r),this.G=2}}else 3==this.G&&(e?Lh(this,e):0==this.i.length||Zf(this.h)||Lh(this))},ac.Ia=function(){if(this.u=null,zh(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Xl(yc(this.eb,this),e)}},ac.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Jl(10),Rh(this),zh(this))},ac.cb=function(){null!=this.v&&(this.v=null,Rh(this),Vh(this),Jl(19))},ac.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Jl(2)):(this.j.info("Failed to ping google.com"),Jl(1))},(ac=Yh.prototype).xa=function(){},ac.wa=function(){},ac.va=function(){},ac.ua=function(){},ac.Ra=function(){},Jh.prototype.g=function(e,t){return new $h(e,t)},kc($h,kl),$h.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Jl(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Wh(e,null,e.V),Oh(e)},$h.prototype.close=function(){Dh(this.g)},$h.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=_l(e),e=n);t.i.push(new Yf(t.ab++,e)),3==t.G&&Oh(t)},$h.prototype.M=function(){this.g.l=null,delete this.j,Dh(this.g),delete this.g,$h.X.M.call(this)},kc(Xh,uf),kc(Zh,sf),kc(ed,Yh),ed.prototype.xa=function(){wl(this.g,"a")},ed.prototype.wa=function(e){wl(this.g,new Xh(e))},ed.prototype.va=function(e){wl(this.g,new Zh)},ed.prototype.ua=function(){wl(this.g,"b")},Jh.prototype.createWebChannel=Jh.prototype.g,$h.prototype.send=$h.prototype.u,$h.prototype.open=$h.prototype.m,$h.prototype.close=$h.prototype.close,Zl.NO_ERROR=0,Zl.TIMEOUT=8,Zl.HTTP_ERROR=6,ef.COMPLETE="complete",rf.EventType=of,of.OPEN="a",of.CLOSE="b",of.ERROR="c",of.MESSAGE="d",kl.prototype.listen=kl.prototype.N,mh.prototype.listenOnce=mh.prototype.O,mh.prototype.getLastError=mh.prototype.Oa,mh.prototype.getLastErrorCode=mh.prototype.Ea,mh.prototype.getStatus=mh.prototype.aa,mh.prototype.getResponseJson=mh.prototype.Sa,mh.prototype.getResponseText=mh.prototype.fa,mh.prototype.send=mh.prototype.da,mh.prototype.setWithCredentials=mh.prototype.Ka;var td=uc.createWebChannelTransport=function(){return new Jh},nd=uc.getStatEventTarget=function(){return Hl()},rd=uc.ErrorCode=Zl,id=uc.EventType=ef,ad=uc.Event=Kl,od=uc.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ud=uc.FetchXmlHttpFactory=ch,sd=uc.WebChannel=rf,cd=uc.XhrIo=mh,ld="@firebase/firestore",fd=function(){function e(t){i(this,e),this.uid=t}return s(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();fd.UNAUTHENTICATED=new fd(null),fd.GOOGLE_CREDENTIALS=new fd("google-credentials-uid"),fd.FIRST_PARTY=new fd("first-party-uid"),fd.MOCK_USER=new fd("mock-user");var hd="9.19.0",dd=new me("@firebase/firestore");function pd(){return dd.logLevel}function vd(e){if(dd.logLevel<=ce.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.debug.apply(dd,["Firestore (".concat(hd,"): ").concat(e)].concat(ie(i)))}}function md(e){if(dd.logLevel<=ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.error.apply(dd,["Firestore (".concat(hd,"): ").concat(e)].concat(ie(i)))}}function yd(e){if(dd.logLevel<=ce.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.warn.apply(dd,["Firestore (".concat(hd,"): ").concat(e)].concat(ie(i)))}}function gd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function kd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(hd,") INTERNAL ASSERTION FAILED: ")+e;throw md(t),new Error(t)}function wd(e,t){e||kd()}function bd(e,t){return e}var _d={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xd=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return s(n)}(K),Id=s((function e(){var t=this;i(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ed=s((function e(t,n){i(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Sd=function(){function e(){i(this,e)}return s(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Td=function(){function e(t){i(this,e),this.token=t,this.changeListener=null}return s(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Cd=function(){function e(t){i(this,e),this.t=t,this.currentUser=fd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return s(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Id;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Id,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){vd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(vd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Id)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(vd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(wd("string"==typeof n.accessToken),new Ed(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return wd(null===e||"string"==typeof e),new fd(e)}}]),e}(),Nd=function(){function e(t,n,r){i(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=fd.FIRST_PARTY,this.g=new Map}return s(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Ad=function(){function e(t,n,r){i(this,e),this.h=t,this.l=n,this.m=r}return s(e,[{key:"getToken",value:function(){return Promise.resolve(new Nd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Dd=s((function e(t){i(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Rd=function(){function e(t){i(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return s(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&vd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,vd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){vd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):vd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(wd("string"==typeof t.token),e.T=t.token,new Dd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Pd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Od=function(){function e(){i(this,e)}return s(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Pd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ld(e,t){return e<t?-1:e>t?1:0}function Md(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Fd(e){return e+"\0"}var Ud=function(){function e(t,n){if(i(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new xd(_d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xd(_d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new xd(_d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xd(_d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return s(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ld(this.nanoseconds,e.nanoseconds):Ld(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Vd=function(){function e(t){i(this,e),this.timestamp=t}return s(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ud(0,0))}},{key:"max",value:function(){return new e(new Ud(253402300799,999999999))}}]),e}(),jd=function(){function e(t,n,r){i(this,e),void 0===n?n=0:n>t.length&&kd(),void 0===r?r=t.length-n:r>t.length-n&&kd(),this.segments=t,this.offset=n,this.len=r}return s(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),zd=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new xd(_d.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ie(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jd),Bd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qd=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Bd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new xd(_d.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new xd(_d.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new xd(_d.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new xd(_d.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jd),Kd=function(){function e(t){i(this,e),this.path=t}return s(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===zd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(zd.fromString(t))}},{key:"fromName",value:function(t){return new e(zd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(zd.emptyPath())}},{key:"comparator",value:function(e,t){return zd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new zd(t.slice()))}}]),e}(),Gd=s((function e(t,n,r,a){i(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));function Hd(e){return e.fields.find((function(e){return 2===e.kind}))}function Wd(e){return e.fields.filter((function(e){return 2!==e.kind}))}Gd.UNKNOWN_ID=-1;var Qd=s((function e(t,n){i(this,e),this.fieldPath=t,this.kind=n}));var Yd=function(){function e(t,n){i(this,e),this.sequenceNumber=t,this.offset=n}return s(e,null,[{key:"empty",value:function(){return new e(0,Xd.min())}}]),e}();function Jd(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vd.fromTimestamp(1e9===r?new Ud(n+1,0):new Ud(n,r));return new Xd(i,Kd.empty(),t)}function $d(e){return new Xd(e.readTime,e.key,-1)}var Xd=function(){function e(t,n,r){i(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return s(e,null,[{key:"min",value:function(){return new e(Vd.min(),Kd.empty(),-1)}},{key:"max",value:function(){return new e(Vd.max(),Kd.empty(),-1)}}]),e}();function Zd(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Kd.comparator(e.documentKey,t.documentKey))?n:Ld(e.largestBatchId,t.largestBatchId)}var ep="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tp=function(){function e(){i(this,e),this.onCommittedListeners=[]}return s(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function np(e){return rp.apply(this,arguments)}function rp(){return rp=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===_d.FAILED_PRECONDITION&&t.message===ep){e.next=2;break}throw t;case 2:vd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),rp.apply(this,arguments)}var ip=function(){function e(t){var n=this;i(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return s(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&kd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=b(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),ap=function(){function e(t,n){var r=this;i(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new Id,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new sp(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=dp(e.target.error);r.R.reject(new sp(t,n))}}return s(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(vd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new lp(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new sp(n,t)}}}]),e}(),op=function(){function e(t,n,r){i(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(F())&&md("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return s(e,[{key:"$",value:function(){var e=y(v().mark((function e(t){var n=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return vd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new sp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xd(_d.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new xd(_d.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new sp(t,n))},i.onupgradeneeded=function(e){vd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,i.transaction,e.oldVersion,n.version).next((function(){vd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=y(v().mark((function e(t,n,r,i){var a,o,u,s,c=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=v().mark((function e(){var n,u,s,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=ap.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),ip.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,vd("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return vd("SimpleDb","Removing database:",e),fp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!B())return!1;if(e.C())return!0;var t=F(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Che_Hsuan",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDDEtvcE8T4BCnvICWn-VXH67KIPIP9DKQ",REACT_APP_FIREBASE_APP_ID:"889485886292:web:d2e872024b9544bebbfec1",REACT_APP_FIREBASE_AUTH_DOMAIN:"che-hsuan-wedding-form.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://che-hsuan-wedding-form.asia-east1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"889485886292",REACT_APP_FIREBASE_PROJECT_ID:"che-hsuan-wedding-form",REACT_APP_FIREBASE_STORAGE_BUCKET:"che-hsuan-wedding-form.appspot.com"})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),up=function(){function e(t){i(this,e),this.L=t,this.q=!1,this.U=null}return s(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return fp(this.L.delete())}}]),e}(),sp=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,_d.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",a}return s(n)}(xd);function cp(e){return"IndexedDbTransactionError"===e.name}var lp=function(){function e(t){i(this,e),this.store=t}return s(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(vd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(vd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fp(n)}},{key:"add",value:function(e){return vd("SimpleDb","ADD",this.store.name,e,e),fp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return fp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),vd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return vd("SimpleDb","DELETE",this.store.name,e),fp(this.store.delete(e))}},{key:"count",value:function(){return vd("SimpleDb","COUNT",this.store.name),fp(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ip((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ip((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){vd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new ip((function(n,r){t.onerror=function(e){var t=dp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new ip((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new up(i),o=t(i.primaryKey,i.value,a);if(o instanceof ip){var u=o.catch((function(e){return a.done(),ip.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return ip.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function fp(e){return new ip((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=dp(e.target.error);n(t)}}))}var hp=!1;function dp(e){var t=op.S(F());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new xd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return hp||(hp=!0,setTimeout((function(){throw r}),0)),r}}return e}var pp=function(){function e(t,n){i(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return s(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;vd("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=vd,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!cp(e.t4)){e.next=17;break}vd("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,np(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),vp=function(){function e(t,n){i(this,e),this.localStore=t,this.persistence=n}return s(e,[{key:"nt",value:function(){var e=y(v().mark((function e(){var t,n=this,r=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return ip.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return vd("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return vd("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=$d(t);Zd(r,n)>0&&(n=r)})),new Xd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),mp=function(){function e(t,n){var r=this;i(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return s(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function yp(e){return null==e}function gp(e){return 0===e&&1/e==-1/0}function kp(e){return"number"==typeof e&&Number.isInteger(e)&&!gp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function wp(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=_p(t)),t=bp(e.get(n),t);return _p(t)}function bp(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function _p(e){return e+"\x01\x01"}function xp(e){var t=e.length;if(wd(t>=2),2===t)return wd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),zd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&kd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:kd()}a=o+2}return new zd(r)}mp.ct=-1;var Ip=["userId","batchId"];function Ep(e,t){return[e,wp(t)]}function Sp(e,t,n){return[e,wp(t),n]}var Tp={},Cp=["prefixPath","collectionGroup","readTime","documentId"],Np=["prefixPath","collectionGroup","documentId"],Ap=["collectionGroup","readTime","prefixPath","documentId"],Dp=["canonicalId","targetId"],Rp=["targetId","path"],Pp=["path","targetId"],Op=["collectionId","parent"],Lp=["indexId","uid"],Mp=["uid","sequenceNumber"],Fp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Up=["indexId","uid","orderedDocumentKey"],Vp=["userId","collectionPath","documentId"],jp=["userId","collectionPath","largestBatchId"],zp=["userId","collectionGroup","largestBatchId"],Bp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),qp=[].concat(ie(Bp),["documentOverlays"]),Kp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gp=Kp,Hp=[].concat(Gp,["indexConfiguration","indexState","indexEntries"]),Wp=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).at=e,a.currentSequenceNumber=r,a}return s(n)}(tp);function Qp(e,t){var n=bd(e);return op.O(n.at,t)}function Yp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $p(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Xp=function(){function e(t,n){i(this,e),this.comparator=t,this.root=n||ev.EMPTY}return s(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ev.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ev.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Zp(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Zp(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Zp(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Zp(this.root,e,this.comparator,!0)}}]),e}(),Zp=function(){function e(t,n,r,a){i(this,e),this.isReverse=a,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&a&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return s(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ev=function(){function e(t,n,r,a,o){i(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return s(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw kd();if(this.right.isRed())throw kd();var e=this.left.check();if(e!==this.right.check())throw kd();return e+(this.isRed()?0:1)}}]),e}();ev.EMPTY=null,ev.RED=!0,ev.BLACK=!1,ev.EMPTY=new(function(){function e(){i(this,e),this.size=0}return s(e,[{key:"key",get:function(){throw kd()}},{key:"value",get:function(){throw kd()}},{key:"color",get:function(){throw kd()}},{key:"left",get:function(){throw kd()}},{key:"right",get:function(){throw kd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ev(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var tv=function(){function e(t){i(this,e),this.comparator=t,this.data=new Xp(this.comparator)}return s(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new nv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new nv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),nv=function(){function e(t){i(this,e),this.iter=t}return s(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function rv(e){return e.hasNext()?e.getNext():void 0}var iv=function(){function e(t){i(this,e),this.fields=t,t.sort(qd.comparator)}return s(e,[{key:"unionWith",value:function(t){var n,r=new tv(qd.comparator),i=b(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=b(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=b(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Md(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),av=function(e){l(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return s(n)}(S(Error));var ov=function(e){function t(e){i(this,t),this.binaryString=e}return s(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ld(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new av("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ov.EMPTY_BYTE_STRING=new ov("");var uv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sv(e){if(wd(!!e),"string"==typeof e){var t=0,n=uv.exec(e);if(wd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:cv(e.seconds),nanos:cv(e.nanos)}}function cv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function lv(e){return"string"==typeof e?ov.fromBase64String(e):ov.fromUint8Array(e)}function fv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hv(e){var t=e.mapValue.fields.__previous_value__;return fv(t)?hv(t):t}function dv(e){var t=sv(e.mapValue.fields.__local_write_time__.timestampValue);return new Ud(t.seconds,t.nanos)}var pv=s((function e(t,n,r,a,o,u,s,c){i(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=s,this.useFetchStreams=c})),vv=function(){function e(t,n){i(this,e),this.projectId=t,this.database=n||"(default)"}return s(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),mv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yv={nullValue:"NULL_VALUE"};function gv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fv(e)?4:Rv(e)?9007199254740991:10:kd()}function kv(e,t){if(e===t)return!0;var n=gv(e);if(n!==gv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dv(e).isEqual(dv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=sv(e.timestampValue),r=sv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return lv(e.bytesValue).isEqual(lv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cv(e.geoPointValue.latitude)===cv(t.geoPointValue.latitude)&&cv(e.geoPointValue.longitude)===cv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cv(e.integerValue)===cv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=cv(e.doubleValue),r=cv(t.doubleValue);return n===r?gp(n)===gp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Md(e.arrayValue.values||[],t.arrayValue.values||[],kv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yp(n)!==Yp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kv(n[i],r[i])))return!1;return!0}(e,t);default:return kd()}}function wv(e,t){return void 0!==(e.values||[]).find((function(e){return kv(e,t)}))}function bv(e,t){if(e===t)return 0;var n=gv(e),r=gv(t);if(n!==r)return Ld(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ld(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=cv(e.integerValue||e.doubleValue),r=cv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _v(e.timestampValue,t.timestampValue);case 4:return _v(dv(e),dv(t));case 5:return Ld(e.stringValue,t.stringValue);case 6:return function(e,t){var n=lv(e),r=lv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ld(n[i],r[i]);if(0!==a)return a}return Ld(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ld(cv(e.latitude),cv(t.latitude));return 0!==n?n:Ld(cv(e.longitude),cv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=bv(n[i],r[i]);if(a)return a}return Ld(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===mv.mapValue&&t===mv.mapValue)return 0;if(e===mv.mapValue)return 1;if(t===mv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ld(r[o],a[o]);if(0!==u)return u;var s=bv(n[r[o]],i[a[o]]);if(0!==s)return s}return Ld(r.length,a.length)}(e.mapValue,t.mapValue);default:throw kd()}}function _v(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ld(e,t);var n=sv(e),r=sv(t),i=Ld(n.seconds,r.seconds);return 0!==i?i:Ld(n.nanos,r.nanos)}function xv(e){return Iv(e)}function Iv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=sv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Kd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=b(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Iv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=b(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Iv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):kd();var t,n}function Ev(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Sv(e){return!!e&&"integerValue"in e}function Tv(e){return!!e&&"arrayValue"in e}function Cv(e){return!!e&&"nullValue"in e}function Nv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Av(e){return!!e&&"mapValue"in e}function Dv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Jp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Dv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Dv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Rv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pv(e){return"nullValue"in e?yv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ev(vv.empty(),Kd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:kd()}function Ov(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ev(vv.empty(),Kd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?mv:kd()}function Lv(e,t){var n=bv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Mv(e,t){var n=bv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Fv=function(){function e(t){i(this,e),this.value=t}return s(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Av(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dv(t)}},{key:"setAll",value:function(e){var t=this,n=qd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Dv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Av(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return kv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Av(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Jp(t,(function(t,n){return e[t]=n}));var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Dv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Uv(e){var t=[];return Jp(e.fields,(function(e,n){var r=new qd([e]);if(Av(n)){var i=Uv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=b(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new iv(t)}var Vv=function(){function e(t,n,r,a,o,u,s){i(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=o,this.data=u,this.documentState=s}return s(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Vd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Fv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Fv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Vd.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Vd.min(),Vd.min(),Vd.min(),Fv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Vd.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Vd.min(),Vd.min(),Fv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Vd.min(),Vd.min(),Fv.empty(),2)}}]),e}(),jv=s((function e(t,n){i(this,e),this.position=t,this.inclusive=n}));function zv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Kd.comparator(Kd.fromName(o.referenceValue),n.key):bv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Bv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!kv(e.position[n],t.position[n]))return!1;return!0}var qv=s((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";i(this,e),this.field=t,this.dir=n}));function Kv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Gv=s((function e(){i(this,e)})),Hv=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).field=e,o.op=r,o.value=a,o}return s(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bv(t,this.value)):null!==t&&gv(this.value)===gv(t)&&this.matchesComparison(bv(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return kd()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nm(e,t,r):"array-contains"===t?new om(e,r):"in"===t?new um(e,r):"not-in"===t?new sm(e,r):"array-contains-any"===t?new cm(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new rm(e,n):new im(e,n)}}]),n}(Gv),Wv=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).filters=e,a.op=r,a.ht=null,a}return s(n,[{key:"matches",value:function(e){return Qv(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=b(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Gv);function Qv(e){return"and"===e.op}function Yv(e){return"or"===e.op}function Jv(e){return $v(e)&&Qv(e)}function $v(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Wv)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Xv(e){if(e instanceof Hv)return e.field.canonicalString()+e.op.toString()+xv(e.value);if(Jv(e))return e.filters.map((function(e){return Xv(e)})).join(",");var t=e.filters.map((function(e){return Xv(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Zv(e,t){return e instanceof Hv?function(e,t){return t instanceof Hv&&e.op===t.op&&e.field.isEqual(t.field)&&kv(e.value,t.value)}(e,t):e instanceof Wv?function(e,t){return t instanceof Wv&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Zv(n,t.filters[r])}),!0)}(e,t):void kd()}function em(e,t){var n=e.filters.concat(t);return Wv.create(n,e.op)}function tm(e){return e instanceof Hv?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xv(e.value))}(e):e instanceof Wv?function(e){return e.op.toString()+" {"+e.getFilters().map(tm).join(" ,")+"}"}(e):"Filter"}var nm=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,e,r,a)).key=Kd.fromName(a.referenceValue),o}return s(n,[{key:"matches",value:function(e){var t=Kd.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Hv),rm=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,"in",r)).keys=am("in",r),a}return s(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hv),im=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,"not-in",r)).keys=am("not-in",r),a}return s(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hv);function am(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Kd.fromName(e.referenceValue)}))}var om=function(e){l(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"array-contains",r)}return s(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Tv(t)&&wv(t.arrayValue,this.value)}}]),n}(Hv),um=function(e){l(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"in",r)}return s(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&wv(this.value.arrayValue,t)}}]),n}(Hv),sm=function(e){l(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"not-in",r)}return s(n,[{key:"matches",value:function(e){if(wv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!wv(this.value.arrayValue,t)}}]),n}(Hv),cm=function(e){l(n,e);var t=p(n);function n(e,r){return i(this,n),t.call(this,e,"array-contains-any",r)}return s(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Tv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return wv(t.value.arrayValue,e)}))}}]),n}(Hv),lm=s((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;i(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=u,this.endAt=s,this.ft=null}));function fm(e){return new lm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function hm(e){var t=bd(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Xv(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),yp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xv(e)})).join(",")),t.ft=n}return t.ft}function dm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Kv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Zv(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bv(e.startAt,t.startAt)&&Bv(e.endAt,t.endAt)}function pm(e){return Kd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function vm(e,t){return e.filters.filter((function(e){return e instanceof Hv&&e.field.isEqual(t)}))}function mm(e,t,n){var r,i=yv,a=!0,o=b(vm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=yv,c=!0;switch(u.op){case"<":case"<=":s=Pv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=yv}Lv({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Lv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ym(e,t,n){var r,i=mv,a=!0,o=b(vm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=mv,c=!0;switch(u.op){case">=":case">":s=Ov(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=mv}Mv({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Mv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var gm=s((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;i(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=u,this.startAt=s,this.endAt=c,this.dt=null,this.wt=null,this.startAt,this.endAt}));function km(e,t,n,r,i,a,o,u){return new gm(e,t,n,r,i,a,o,u)}function wm(e){return new gm(e)}function bm(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _m(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function xm(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Im(e){return null!==e.collectionGroup}function Em(e){var t=bd(e);if(null===t.dt){t.dt=[];var n=xm(t),r=_m(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new qv(n)),t.dt.push(new qv(qd.keyField(),"asc"));else{var i,a=!1,o=b(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new qv(qd.keyField(),s))}}}return t.dt}function Sm(e){var t=bd(e);if(!t.wt)if("F"===t.limitType)t.wt=fm(t.path,t.collectionGroup,Em(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=b(Em(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new qv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new jv(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new jv(t.startAt.position,t.startAt.inclusive):null;t.wt=fm(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Tm(e,t){t.getFirstInequalityField(),xm(e);var n=e.filters.concat([t]);return new gm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cm(e,t,n){return new gm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nm(e,t){return dm(Sm(e),Sm(t))&&e.limitType===t.limitType}function Am(e){return"".concat(hm(Sm(e)),"|lt:").concat(e.limitType)}function Dm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return tm(e)})).join(", "),"]")),yp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xv(e)})).join(",")),"Target(".concat(t,")")}(Sm(e)),"; limitType=").concat(e.limitType,")")}function Rm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Kd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=b(Em(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=zv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Em(e),t))&&!(e.endAt&&!function(e,t,n){var r=zv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Em(e),t))}(e,t)}function Pm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Om(e){return function(t,n){var r,i=!1,a=b(Em(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Lm(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Lm(e,t,n){var r=e.field.isKeyField()?Kd.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bv(r,i):kd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return kd()}}var Mm=function(){function e(t,n){i(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return s(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=I(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Jp(this.inner,(function(t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=I(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return $p(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Fm=new Xp(Kd.comparator);function Um(){return Fm}var Vm=new Xp(Kd.comparator);function jm(){for(var e=Vm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function zm(e){var t=Vm;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Bm(){return Km()}function qm(){return Km()}function Km(){return new Mm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Gm=new Xp(Kd.comparator),Hm=new tv(Kd.comparator);function Wm(){for(var e=Hm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Qm=new tv(Ld);function Ym(){return Qm}function Jm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gp(t)?"-0":t}}function $m(e){return{integerValue:""+e}}function Xm(e,t){return kp(t)?$m(t):Jm(e,t)}var Zm=s((function e(){i(this,e),this._=void 0}));function ey(e,t,n){return e instanceof ry?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof iy?ay(e,t):e instanceof oy?uy(e,t):function(e,t){var n=ny(e,t),r=cy(n)+cy(e._t);return Sv(n)&&Sv(e._t)?$m(r):Jm(e.serializer,r)}(e,t)}function ty(e,t,n){return e instanceof iy?ay(e,t):e instanceof oy?uy(e,t):n}function ny(e,t){return e instanceof sy?Sv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var ry=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n)}(Zm),iy=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).elements=e,r}return s(n)}(Zm);function ay(e,t){var n,r=ly(t),i=b(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return kv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var oy=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).elements=e,r}return s(n)}(Zm);function uy(e,t){var n,r=ly(t),i=b(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!kv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var sy=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).serializer=e,a._t=r,a}return s(n)}(Zm);function cy(e){return cv(e.integerValue||e.doubleValue)}function ly(e){return Tv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var fy=s((function e(t,n){i(this,e),this.field=t,this.transform=n}));var hy=s((function e(t,n){i(this,e),this.version=t,this.transformResults=n})),dy=function(){function e(t,n){i(this,e),this.updateTime=t,this.exists=n}return s(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function py(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var vy=s((function e(){i(this,e)}));function my(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cy(e.key,dy.none()):new by(e.key,e.data,dy.none());var n,r=e.data,i=Fv.empty(),a=new tv(qd.comparator),o=b(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new _y(e.key,i,new iv(a.toArray()),dy.none())}function yy(e,t,n){e instanceof by?function(e,t,n){var r=e.value.clone(),i=Iy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _y?function(e,t,n){if(py(e.precondition,t)){var r=Iy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gy(e,t,n,r){return e instanceof by?function(e,t,n,r){if(!py(e.precondition,t))return n;var i=e.value.clone(),a=Ey(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof _y?function(e,t,n,r){if(!py(e.precondition,t))return n;var i=Ey(e.fieldTransforms,r,t),a=t.data;return a.setAll(xy(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return py(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ky(e,t){var n,r=null,i=b(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=ny(a.transform,o||null);null!=u&&(null===r&&(r=Fv.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function wy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Md(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof iy&&t instanceof iy||e instanceof oy&&t instanceof oy?Md(e.elements,t.elements,kv):e instanceof sy&&t instanceof sy?kv(e._t,t._t):e instanceof ry&&t instanceof ry}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var by=function(e){l(n,e);var t=p(n);function n(e,r,a){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return i(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=a,o.fieldTransforms=u,o.type=0,o}return s(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vy),_y=function(e){l(n,e);var t=p(n);function n(e,r,a,o){var u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return i(this,n),(u=t.call(this)).key=e,u.data=r,u.fieldMask=a,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return s(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(vy);function xy(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Iy(e,t,n){var r=new Map;wd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ty(o,u,n[i]))}return r}function Ey(e,t,n){var r,i=new Map,a=b(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ey(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sy,Ty,Cy=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return s(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vy),Ny=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=3,a.fieldTransforms=[],a}return s(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vy),Ay=function(){function e(t,n,r,a){i(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return s(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&yy(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=b(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=gy(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=b(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=gy(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=qm();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=my(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Vd.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Wm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Md(this.mutations,e.mutations,(function(e,t){return wy(e,t)}))&&Md(this.baseMutations,e.baseMutations,(function(e,t){return wy(e,t)}))}}]),e}(),Dy=function(){function e(t,n,r,a){i(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return s(e,null,[{key:"from",value:function(t,n,r){wd(t.mutations.length===r.length);for(var i=Gm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ry=function(){function e(t,n){i(this,e),this.largestBatchId=t,this.mutation=n}return s(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Py=s((function e(t){i(this,e),this.count=t}));function Oy(e){switch(e){default:return kd();case _d.CANCELLED:case _d.UNKNOWN:case _d.DEADLINE_EXCEEDED:case _d.RESOURCE_EXHAUSTED:case _d.INTERNAL:case _d.UNAVAILABLE:case _d.UNAUTHENTICATED:return!1;case _d.INVALID_ARGUMENT:case _d.NOT_FOUND:case _d.ALREADY_EXISTS:case _d.PERMISSION_DENIED:case _d.FAILED_PRECONDITION:case _d.ABORTED:case _d.OUT_OF_RANGE:case _d.UNIMPLEMENTED:case _d.DATA_LOSS:return!0}}function Ly(e){if(void 0===e)return md("GRPC error has no .code"),_d.UNKNOWN;switch(e){case Sy.OK:return _d.OK;case Sy.CANCELLED:return _d.CANCELLED;case Sy.UNKNOWN:return _d.UNKNOWN;case Sy.DEADLINE_EXCEEDED:return _d.DEADLINE_EXCEEDED;case Sy.RESOURCE_EXHAUSTED:return _d.RESOURCE_EXHAUSTED;case Sy.INTERNAL:return _d.INTERNAL;case Sy.UNAVAILABLE:return _d.UNAVAILABLE;case Sy.UNAUTHENTICATED:return _d.UNAUTHENTICATED;case Sy.INVALID_ARGUMENT:return _d.INVALID_ARGUMENT;case Sy.NOT_FOUND:return _d.NOT_FOUND;case Sy.ALREADY_EXISTS:return _d.ALREADY_EXISTS;case Sy.PERMISSION_DENIED:return _d.PERMISSION_DENIED;case Sy.FAILED_PRECONDITION:return _d.FAILED_PRECONDITION;case Sy.ABORTED:return _d.ABORTED;case Sy.OUT_OF_RANGE:return _d.OUT_OF_RANGE;case Sy.UNIMPLEMENTED:return _d.UNIMPLEMENTED;case Sy.DATA_LOSS:return _d.DATA_LOSS;default:return kd()}}(Ty=Sy||(Sy={}))[Ty.OK=0]="OK",Ty[Ty.CANCELLED=1]="CANCELLED",Ty[Ty.UNKNOWN=2]="UNKNOWN",Ty[Ty.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ty[Ty.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ty[Ty.NOT_FOUND=5]="NOT_FOUND",Ty[Ty.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ty[Ty.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ty[Ty.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ty[Ty.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ty[Ty.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ty[Ty.ABORTED=10]="ABORTED",Ty[Ty.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ty[Ty.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ty[Ty.INTERNAL=13]="INTERNAL",Ty[Ty.UNAVAILABLE=14]="UNAVAILABLE",Ty[Ty.DATA_LOSS=15]="DATA_LOSS";var My=function(){function e(){i(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return s(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Fy}},{key:"getOrCreateInstance",value:function(){return null===Fy&&(Fy=new e),Fy}}]),e}(),Fy=null,Uy=function(){function e(t,n,r,a,o){i(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}return s(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Vy.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Vd.min(),i,Ym(),Um(),Wm())}}]),e}(),Vy=function(){function e(t,n,r,a,o){i(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}return s(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Wm(),Wm(),Wm())}}]),e}(),jy=s((function e(t,n,r,a){i(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=a})),zy=s((function e(t,n){i(this,e),this.targetId=t,this.Et=n})),By=s((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ov.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),qy=function(){function e(){i(this,e),this.At=0,this.Rt=Hy(),this.vt=ov.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return s(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=Wm(),t=Wm(),n=Wm();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:kd()}})),new Vy(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=Hy()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),Ky=function(){function e(t){i(this,e),this.Ft=t,this.Bt=new Map,this.Lt=Um(),this.qt=Gy(),this.Ut=new tv(Ld)}return s(e,[{key:"Kt",value:function(e){var t,n=b(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=b(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:kd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(pm(a))if(0===r){var o=new Kd(a.path);this.Qt(n,o,Vv.newNoDocument(o,Vd.min()))}else wd(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=My.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&pm(a.target)){var o=new Kd(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,Vv.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=Wm();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Uy(e,n,this.Ut,this.Lt,r);return this.Lt=Um(),this.qt=Gy(),this.Ut=new tv(Ld),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new qy,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new tv(Ld),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||vd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new qy),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function Gy(){return new Xp(Kd.comparator)}function Hy(){return new Xp(Kd.comparator)}var Wy={asc:"ASCENDING",desc:"DESCENDING"},Qy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yy={and:"AND",or:"OR"},Jy=s((function e(t,n){i(this,e),this.databaseId=t,this.useProto3Json=n}));function $y(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xy(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zy(e,t){return $y(e,t.toTimestamp())}function eg(e){return wd(!!e),Vd.fromTimestamp(function(e){var t=sv(e);return new Ud(t.seconds,t.nanos)}(e))}function tg(e,t){return function(e){return new zd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ng(e){var t=zd.fromString(e);return wd(Eg(t)),t}function rg(e,t){return tg(e.databaseId,t.path)}function ig(e,t){var n=ng(t);if(n.get(1)!==e.databaseId.projectId)throw new xd(_d.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xd(_d.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Kd(sg(n))}function ag(e,t){return tg(e.databaseId,t)}function og(e){var t=ng(e);return 4===t.length?zd.emptyPath():sg(t)}function ug(e){return new zd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sg(e){return wd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function cg(e,t,n){return{name:rg(e,t),fields:n.value.mapValue.fields}}function lg(e,t,n){var r=ig(e,t.name),i=eg(t.updateTime),a=t.createTime?eg(t.createTime):Vd.min(),o=new Fv({mapValue:{fields:t.fields}}),u=Vv.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function fg(e,t){return"found"in t?function(e,t){wd(!!t.found),t.found.name,t.found.updateTime;var n=ig(e,t.found.name),r=eg(t.found.updateTime),i=t.found.createTime?eg(t.found.createTime):Vd.min(),a=new Fv({mapValue:{fields:t.found.fields}});return Vv.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){wd(!!t.missing),wd(!!t.readTime);var n=ig(e,t.missing),r=eg(t.readTime);return Vv.newNoDocument(n,r)}(e,t):kd()}function hg(e,t){var n;if(t instanceof by)n={update:cg(e,t.key,t.value)};else if(t instanceof Cy)n={delete:rg(e,t.key)};else if(t instanceof _y)n={update:cg(e,t.key,t.data),updateMask:Ig(t.fieldMask)};else{if(!(t instanceof Ny))return kd();n={verify:rg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof ry)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof iy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof oy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sy)return{fieldPath:t.field.canonicalString(),increment:n._t};throw kd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:kd()}(e,t.precondition)),n}function dg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?dy.updateTime(eg(e.updateTime)):void 0!==e.exists?dy.exists(e.exists):dy.none()}(t.currentDocument):dy.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)wd("REQUEST_TIME"===t.setToServerValue),n=new ry;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new iy(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new oy(i)}else"increment"in t?n=new sy(e,t.increment):kd();var a=qd.fromServerFormat(t.fieldPath);return new fy(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ig(e,t.update.name),a=new Fv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new iv(t.map((function(e){return qd.fromServerFormat(e)})))}(t.updateMask);return new _y(i,a,o,n,r)}return new by(i,a,n,r)}if(t.delete){var u=ig(e,t.delete);return new Cy(u,n)}if(t.verify){var s=ig(e,t.verify);return new Ny(s,n)}return kd()}function pg(e,t){return{documents:[ag(e,t.path)]}}function vg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ag(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ag(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return xg(Wv.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:bg(e.field),direction:gg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||yp(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function mg(e){var t=og(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){wd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=yg(e);return t instanceof Wv&&Jv(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new qv(_g(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return yp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new jv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new jv(n,t)}(n.endAt)),km(t,i,u,o,s,"F",c,l)}function yg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=_g(e.unaryFilter.field);return Hv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=_g(e.unaryFilter.field);return Hv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=_g(e.unaryFilter.field);return Hv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=_g(e.unaryFilter.field);return Hv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return kd()}}(e):void 0!==e.fieldFilter?function(e){return Hv.create(_g(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kd()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Wv.create(e.compositeFilter.filters.map((function(e){return yg(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return kd()}}(e.compositeFilter.op))}(e):kd()}function gg(e){return Wy[e]}function kg(e){return Qy[e]}function wg(e){return Yy[e]}function bg(e){return{fieldPath:e.canonicalString()}}function _g(e){return qd.fromServerFormat(e.fieldPath)}function xg(e){return e instanceof Hv?function(e){if("=="===e.op){if(Nv(e.value))return{unaryFilter:{field:bg(e.field),op:"IS_NAN"}};if(Cv(e.value))return{unaryFilter:{field:bg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Nv(e.value))return{unaryFilter:{field:bg(e.field),op:"IS_NOT_NAN"}};if(Cv(e.value))return{unaryFilter:{field:bg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bg(e.field),op:kg(e.op),value:e.value}}}(e):e instanceof Wv?function(e){var t=e.getFilters().map((function(e){return xg(e)}));return 1===t.length?t[0]:{compositeFilter:{op:wg(e.op),filters:t}}}(e):kd()}function Ig(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Eg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Sg=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vd.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vd.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ov.EMPTY_BYTE_STRING;i(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s}return s(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Tg=s((function e(t){i(this,e),this.se=t}));function Cg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ng(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:rg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:$y(e,t.version.toTimestamp()),createTime:$y(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ag(t.version)};else{if(!t.isUnknownDocument())return kd();r.unknownDocument={path:n.path.toArray(),version:Ag(t.version)}}return r}function Ng(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ag(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Dg(e){var t=new Ud(e.seconds,e.nanoseconds);return Vd.fromTimestamp(t)}function Rg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return dg(e.se,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return dg(e.se,t)})),u=Ud.fromMillis(t.localWriteTimeMs);return new Ay(t.batchId,u,n,o)}function Pg(e){var t,n,r=Dg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Dg(e.lastLimboFreeSnapshotVersion):Vd.min();return void 0!==e.query.documents?(wd(1===(n=e.query).documents.length),t=Sm(wm(og(n.documents[0])))):t=function(e){return Sm(mg(e))}(e.query),new Sg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,ov.fromBase64String(e.resumeToken))}function Og(e,t){var n,r=Ag(t.snapshotVersion),i=Ag(t.lastLimboFreeSnapshotVersion);n=pm(t.target)?pg(e.se,t.target):vg(e.se,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:hm(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Lg(e){var t=mg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cm(t,t.limit,"L"):t}function Mg(e,t){return new Ry(t.largestBatchId,dg(e.se,t.overlayMutation))}function Fg(e,t){var n=t.path.lastSegment();return[e,wp(t.path.popLast()),n]}function Ug(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Ag(r.readTime),documentKey:wp(r.documentKey.path),largestBatchId:r.largestBatchId}}var Vg=function(){function e(){i(this,e)}return s(e,[{key:"getBundleMetadata",value:function(e,t){return jg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Dg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return jg(e).put({bundleId:(n=t).id,createTime:Ag(eg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return zg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Lg(t.bundledQuery),readTime:Dg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return zg(e).put(function(e){return{name:e.name,readTime:Ag(eg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function jg(e){return Qp(e,"bundles")}function zg(e){return Qp(e,"namedQueries")}var Bg=function(){function e(t,n){i(this,e),this.serializer=t,this.userId=n}return s(e,[{key:"getOverlay",value:function(e,t){var n=this;return qg(e).get(Fg(this.userId,t)).next((function(e){return e?Mg(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Bm();return ip.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Ry(t,a);i.push(r.re(e,o))})),ip.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(wp(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(qg(e).J("collectionPathOverlayIndex",i))})),ip.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Bm(),a=wp(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return qg(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Mg(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Bm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qg(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Mg(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return qg(e).put(function(e,t,n){var r=I(Fg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:hg(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function qg(e){return Qp(e,"documentOverlays")}var Kg=function(){function e(){i(this,e)}return s(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(cv(e.integerValue));else if("doubleValue"in e){var n=cv(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),gp(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(lv(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?Rv(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):kd()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),Kd.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function Gg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Hg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Gg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Kg.pe=new Kg;var Wg=function(){function e(){i(this,e),this.buffer=new Uint8Array(1024),this.position=0}return s(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{var a=r.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=Hg(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=Hg(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Qg=function(){function e(t){i(this,e),this.Me=t}return s(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),Yg=function(){function e(t){i(this,e),this.Me=t}return s(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),Jg=function(){function e(){i(this,e),this.Me=new Wg,this.Fe=new Qg(this.Me),this.Be=new Yg(this.Me)}return s(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),$g=function(){function e(t,n,r,a){i(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=a}return s(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Xg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Zg(e.arrayValue,t.arrayValue))?n:0!==(n=Zg(e.directionalValue,t.directionalValue))?n:Kd.comparator(e.documentKey,t.documentKey)}function Zg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var ek=function(){function e(t){i(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=b(t.filters);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.isInequality()?this.Ge=a:this.Ke.push(a)}}catch(o){r.e(o)}finally{r.f()}}return s(e,[{key:"Qe",value:function(e){wd(e.collectionGroup===this.collectionId);var t=Hd(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Wd(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var a=n[r];if(!this.je(this.Ge,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=b(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function tk(e){var t,n;if(wd(e instanceof Hv||e instanceof Wv),e instanceof Hv){if(e instanceof um){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Hv.create(e.field,"==",t)})))||[];return Wv.create(r,"or")}return e}var i=e.filters.map((function(e){return tk(e)}));return Wv.create(i,e.op)}function nk(e){if(0===e.getFilters().length)return[];var t=ok(tk(e));return wd(ak(t)),rk(t)||ik(t)?[t]:t.getFilters()}function rk(e){return e instanceof Hv}function ik(e){return e instanceof Wv&&Jv(e)}function ak(e){return rk(e)||ik(e)||function(e){if(e instanceof Wv&&Yv(e)){var t,n=b(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!rk(r)&&!ik(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function ok(e){if(wd(e instanceof Hv||e instanceof Wv),e instanceof Hv)return e;if(1===e.filters.length)return ok(e.filters[0]);var t=e.filters.map((function(e){return ok(e)})),n=Wv.create(t,e.op);return ak(n=ck(n))?n:(wd(n instanceof Wv),wd(Qv(n)),wd(n.filters.length>1),n.filters.reduce((function(e,t){return uk(e,t)})))}function uk(e,t){var n;return wd(e instanceof Hv||e instanceof Wv),wd(t instanceof Hv||t instanceof Wv),n=e instanceof Hv?t instanceof Hv?function(e,t){return Wv.create([e,t],"and")}(e,t):sk(e,t):t instanceof Hv?sk(t,e):function(e,t){if(wd(e.filters.length>0&&t.filters.length>0),Qv(e)&&Qv(t))return em(e,t.getFilters());var n=Yv(e)?e:t,r=Yv(e)?t:e,i=n.filters.map((function(e){return uk(e,r)}));return Wv.create(i,"or")}(e,t),ck(n)}function sk(e,t){if(Qv(t))return em(t,e.getFilters());var n=t.filters.map((function(t){return uk(e,t)}));return Wv.create(n,"or")}function ck(e){if(wd(e instanceof Hv||e instanceof Wv),e instanceof Hv)return e;var t=e.getFilters();if(1===t.length)return ck(t[0]);if($v(e))return e;var n=t.map((function(e){return ck(e)})),r=[];return n.forEach((function(t){t instanceof Hv?r.push(t):t instanceof Wv&&(t.op===e.op?r.push.apply(r,ie(t.filters)):r.push(t))})),1===r.length?r[0]:Wv.create(r,e.op)}var lk=function(){function e(){i(this,e),this.He=new fk}return s(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),ip.resolve()}},{key:"getCollectionParents",value:function(e,t){return ip.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ip.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ip.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ip.resolve(null)}},{key:"getIndexType",value:function(e,t){return ip.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return ip.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ip.resolve(null)}},{key:"getMinOffset",value:function(e,t){return ip.resolve(Xd.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return ip.resolve(Xd.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return ip.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ip.resolve()}}]),e}(),fk=function(){function e(){i(this,e),this.index={}}return s(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tv(zd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new tv(zd.comparator)).toArray()}}]),e}(),hk=new Uint8Array(0),dk=function(){function e(t,n){i(this,e),this.user=t,this.databaseId=n,this.Je=new fk,this.Ye=new Mm((function(e){return hm(e)}),(function(e,t){return dm(e,t)})),this.uid=t.uid||""}return s(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var a={collectionId:r,parent:wp(i)};return pk(e).put(a)}return ip.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fd(t),""],!1,!0);return pk(e).j(r).next((function(e){var r,i=b(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(xp(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=mk(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=yk(e);return a.next((function(e){o.put(Ug(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=mk(e),r=yk(e),i=vk(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=vk(e),i=!0,a=new Map;return ip.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Wm(),o=[];return ip.forEach(a,(function(i,a){var u;vd("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(hm(t)));var s=function(e,t){var n=Hd(t);if(void 0===n)return null;var r,i=b(vm(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=b(Wd(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=b(vm(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=b(Wd(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?mm(e,o.fieldPath,e.startAt):ym(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new jv(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=b(Wd(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ym(e,o.fieldPath,e.endAt):mm(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new jv(r,i)}(a,i),h=n.tn(i,a,l),d=n.tn(i,a,f),p=n.en(i,a,c),v=n.nn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return ip.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Kd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return ip.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:nk(Wv.create(e.filters,"and")).map((function(t){return fm(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.sn(t[h/c]):hk,f=u.rn(e,s,n[h%c],r),d=u.on(e,s,i[h%c],a),p=o.map((function(t){return u.rn(e,s,t,!0)}));l.push.apply(l,ie(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"rn",value:function(e,t,n,r){var i=new $g(e,Kd.empty(),t,n);return r?i:i.qe()}},{key:"on",value:function(e,t,n,r){var i=new $g(e,Kd.empty(),t,n);return r?i.qe():i}},{key:"Xe",value:function(e,t){var n=new ek(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Qe(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return ip.forEach(i,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new tv(qd.comparator),r=!1,i=b(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=b(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=b(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new Jg,i=b(Wd(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Le(a.kind);Kg.pe.oe(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"sn",value:function(e){var t=new Jg;return Kg.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new Jg;return Kg.pe.oe(Ev(this.databaseId,t),n.Le(function(e){var t=Wd(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Jg);var i,a=0,o=b(Wd(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=b(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.an(t,s.fieldPath)&&Tv(c))r=this.hn(r,s,c);else{var h=f.Le(s.kind);Kg.pe.oe(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,i=ie(e),a=[],o=b(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=b(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Jg;f.seed(l.$e()),Kg.pe.oe(s,f.Le(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Hv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=mk(e),i=yk(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return ip.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Yd(t.sequenceNumber,new Xd(Dg(t.readTime),new Kd(xp(t.documentKey)),t.largestBatchId)):Yd.empty(),r=e.fields.map((function(e){var t=I(e,2),n=t[0],r=t[1];return new Qd(qd.fromServerFormat(n),r)}));return new Gd(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ld(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=mk(e),a=yk(e);return this.fn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ip.forEach(t,(function(t){return a.put(Ug(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ip.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ip.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ip.forEach(a,(function(r){return n.dn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?ip.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return vk(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return vk(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=vk(e),i=new tv(Xg);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){i=i.add(new $g(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new tv(Xg),r=this.un(t,e);if(null==r)return n;var i=Hd(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Tv(a)){var o,u=b(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new $g(t.indexId,e.key,this.sn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new $g(t.indexId,e.key,hk,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;vd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=rv(a),s=rv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=rv(o)):l?(i(u),u=rv(a)):(u=rv(a),s=rv(o))}}(r,i,Xg,(function(r){o.push(a.mn(e,t,n,r))}),(function(r){o.push(a.gn(e,t,n,r))})),ip.waitFor(o)}},{key:"fn",value:function(e){var t=1;return yk(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Xg(e,t)})).filter((function(e,t,n){return!t||0!==Xg(e,n[t-1])}));var r=[];r.push(e);var i,a=b(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Xg(o,e),s=Xg(o,t);if(0===u)r[0]=e.qe();else if(u>0&&s<0)r.push(o),r.push(o.qe());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,hk,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,hk,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"yn",value:function(e,t){return Xg(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(gk)}},{key:"getMinOffset",value:function(e,t){var n=this;return ip.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||kd()}))})).next(gk)}}]),e}();function pk(e){return Qp(e,"collectionParents")}function vk(e){return Qp(e,"indexEntries")}function mk(e){return Qp(e,"indexConfiguration")}function yk(e){return Qp(e,"indexState")}function gk(e){wd(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Zd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Xd(t.readTime,t.documentKey,n)}var kk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wk=function(){function e(t,n,r){i(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return s(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function bk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){wd(1===u)})));var c,l=[],f=b(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Sp(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return ip.waitFor(a).next((function(){return l}))}function _k(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw kd();t=e.noDocument}return JSON.stringify(t).length}wk.DEFAULT_COLLECTION_PERCENTILE=10,wk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wk.DEFAULT=new wk(41943040,wk.DEFAULT_COLLECTION_PERCENTILE,wk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wk.DISABLED=new wk(-1,0,0);var xk=function(){function e(t,n,r,a){i(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=a,this.pn={}}return s(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ek(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Sk(e),o=Ek(e);return o.add({}).next((function(u){wd("number"==typeof u);var s,c=new Ay(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return hg(e.se,t)})),i=n.mutations.map((function(t){return hg(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new tv((function(e,t){return Ld(e.canonicalString(),t.canonicalString())})),d=b(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Sp(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Tp))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.pn[u]=c.keys()})),ip.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ek(e).get(t).next((function(e){return e?(wd(e.userId===n.userId),Rg(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?ip.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ek(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(wd(t.batchId>=r),a=Rg(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ek(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ek(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Rg(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ep(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Sk(e).Z({range:i},(function(r,i,o){var u=I(r,3),s=u[0],c=u[1],l=u[2],f=xp(c);if(s===n.userId&&t.path.isEqual(f))return Ek(e).get(l).next((function(e){if(!e)throw kd();wd(e.userId===n.userId),a.push(Rg(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tv(Ld),i=[];return t.forEach((function(t){var a=Ep(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Sk(e).Z({range:o},(function(e,i,a){var o=I(e,3),u=o[0],s=o[1],c=o[2],l=xp(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),ip.waitFor(i).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ep(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new tv(Ld);return Sk(e).Z({range:o},(function(e,t,a){var o=I(e,3),s=o[0],c=o[1],l=o[2],f=xp(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Tn(e,u)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ek(e).get(t).next((function(e){if(null===e)throw kd();wd(e.userId===n.userId),r.push(Rg(n.serializer,e))})))})),ip.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return bk(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),ip.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ip.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Sk(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=xp(e[1]);i.push(a)}else r.done()})).next((function(){wd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Ik(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return Tk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,i){return wd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ik(e,t,n){var r=Ep(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Sk(e).Z({range:a,Y:!0},(function(e,n,r){var a=I(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Ek(e){return Qp(e,"mutations")}function Sk(e){return Qp(e,"documentMutations")}function Tk(e){return Qp(e,"mutationQueues")}var Ck=function(){function e(t){i(this,e),this.Rn=t}return s(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),Nk=function(){function e(t,n){i(this,e),this.referenceDelegate=t,this.serializer=n}return s(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new Ck(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return Vd.fromTimestamp(new Ud(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Vn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ak(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return wd(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ak(e).Z((function(o,u){var s=Pg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return ip.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ak(e).Z((function(e,n){var r=Pg(n);t(r)}))}},{key:"Pn",value:function(e){return Dk(e).get("targetGlobalKey").next((function(e){return wd(null!==e),e}))}},{key:"Vn",value:function(e,t){return Dk(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return Ak(e).put(Og(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=hm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ak(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Pg(n);dm(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Rk(e);return t.forEach((function(t){var o=wp(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ip.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Rk(e);return ip.forEach(t,(function(t){var a=wp(t.path);return ip.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Rk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Rk(e),i=Wm();return r.Z({range:n,Y:!0},(function(e,t,n){var r=xp(e[1]),a=new Kd(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=wp(t.path),r=IDBKeyRange.bound([n],[Fd(n)],!1,!0),i=0;return Rk(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=I(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return Ak(e).get(t).next((function(e){return e?Pg(e):null}))}}]),e}();function Ak(e){return Qp(e,"targets")}function Dk(e){return Qp(e,"targetGlobal")}function Rk(e){return Qp(e,"targetDocuments")}function Pk(e,t){var n=I(e,2),r=n[0],i=n[1],a=I(t,2),o=a[0],u=a[1],s=Ld(r,o);return 0===s?Ld(i,u):s}var Ok=function(){function e(t){i(this,e),this.Cn=t,this.buffer=new tv(Pk),this.xn=0}return s(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Pk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Lk=function(){function e(t,n,r){i(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return s(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;vd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!cp(e.t0)){e.next=12;break}vd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,np(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Mk=function(){function e(t,n){i(this,e),this.Mn=t,this.params=n}return s(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ip.resolve(mp.ct);var r=new Ok(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(vd("LruGarbageCollector","Garbage collection skipped; disabled"),ip.resolve(kk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(vd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),kk):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(vd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),pd()<=ce.DEBUG&&vd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ip.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Fk=function(){function e(t,n){i(this,e),this.db=t,this.garbageCollector=function(e,t){return new Mk(e,t)}(this,n)}return s(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Uk(e,n)}},{key:"removeReference",value:function(e,t,n){return Uk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Uk(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return Tk(e).X((function(r){return Ik(e,r,t).next((function(e){return e&&(n=!0),ip.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Un(e,(function(o,u){if(u<=t){var s=n.Kn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Vd.min()),Rk(e).delete([0,wp(o.path)])}))}));i.push(s)}})).next((function(){return ip.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Uk(e,t)}},{key:"Un",value:function(e,t){var n,r=Rk(e),i=mp.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=I(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==mp.ct&&t(new Kd(xp(n)),i),i=s,n=u):i=mp.ct})).next((function(){i!==mp.ct&&t(new Kd(xp(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Uk(e,t){return Rk(e).put(function(e,t){return{targetId:0,path:wp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Vk=function(){function e(){i(this,e),this.changes=new Mm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return s(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Vv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ip.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),jk=function(){function e(t){i(this,e),this.serializer=t}return s(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Kk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Kk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ng(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Vv.newInvalidDocument(t);return Kk(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Gk(t))},(function(e,i){r=n.Qn(t,i)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:Vv.newInvalidDocument(t)};return Kk(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Gk(t))},(function(e,i){r={document:n.Qn(t,i),size:_k(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Um();return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=Um(),i=new Xp(Kd.comparator);return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a),i=i.insert(e,_k(t))})).next((function(){return{documents:r,Hn:i}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return ip.resolve();var r=new tv(Wk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Gk(r.first()),Gk(r.last())),a=r.getIterator(),o=a.getNext();return Kk(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Kd.fromSegments([].concat(ie(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Wk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Gk(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Ng(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kk(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Um(),o=b(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Qn(Kd.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Rm(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Um(),o=Hk(t,n),u=Hk(t,Xd.max());return Kk(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Qn(Kd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Bk(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return qk(e).get("remoteDocumentGlobalKey").next((function(e){return wd(!!e),e}))}},{key:"Gn",value:function(e,t){return qk(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=lg(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Kd.fromSegments(t.noDocument.path),i=Dg(t.noDocument.readTime);n=Vv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return kd();var a=Kd.fromSegments(t.unknownDocument.path),o=Dg(t.unknownDocument.version);n=Vv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ud(e[0],e[1]);return Vd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Vd.min()))return n}return Vv.newInvalidDocument(e)}}]),e}();function zk(e){return new jk(e)}var Bk=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).Jn=e,a.trackRemovals=r,a.Yn=new Mm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),a}return s(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new tv((function(e,t){return Ld(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Yn.get(a);if(n.push(t.Jn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Cg(t.Jn.serializer,o);i=i.add(a.path.popLast());var c=_k(s);r+=c-u.size,n.push(t.Jn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Cg(t.Jn.serializer,o.convertToNoDocument(Vd.min()));n.push(t.Jn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),ip.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Vk);function qk(e){return Qp(e,"remoteDocumentGlobal")}function Kk(e){return Qp(e,"remoteDocumentsV14")}function Gk(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Hk(e,t){var n=t.documentKey.path.toArray();return[e,Ng(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Wk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ld(n[a],r[a]))return i;return(i=Ld(n.length,r.length))||((i=Ld(n[n.length-2],r[r.length-2]))||Ld(n[n.length-1],r[r.length-1]))}var Qk=s((function e(t,n){i(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Yk=function(){function e(t,n,r,a){i(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}return s(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&gy(r.mutation,e,iv.empty(),Ud.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Wm()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wm(),i=Bm();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=jm();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Bm();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Wm())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Um(),a=Km(),o=Km();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof _y)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),gy(o.mutation,t,o.mutation.getFieldMask(),Ud.now())):a.set(t.key,iv.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Qk(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Km(),i=new Xp((function(e,t){return e-t})),a=Wm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=b(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||iv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Wm()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=qm();c.forEach((function(e){if(!a.has(e)){var n=my(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return ip.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Kd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Im(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):ip.resolve(Bm()),u=-1,s=a;return o.next((function(t){return ip.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?ip.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Wm())})).next((function(e){return{batchId:u,changes:zm(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Kd(t)).next((function(e){var t=jm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=jm();return this.indexManager.getCollectionParents(e,i).next((function(o){return ip.forEach(o,(function(o){var u=function(e,t){return new gm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Vv.newInvalidDocument(r)))}));var n=jm();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&gy(a.mutation,i,iv.empty(),Ud.now()),Rm(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Jk=function(){function e(t){i(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return s(e,[{key:"getBundleMetadata",value:function(e,t){return ip.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:eg(n.createTime)}),ip.resolve()}},{key:"getNamedQuery",value:function(e,t){return ip.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:Lg(e.bundledQuery),readTime:eg(e.readTime)}}(t)),ip.resolve()}}]),e}(),$k=function(){function e(){i(this,e),this.overlays=new Xp(Kd.comparator),this.ts=new Map}return s(e,[{key:"getOverlay",value:function(e,t){return ip.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Bm();return ip.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),ip.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),ip.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Bm(),i=t.length+1,a=new Kd(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ip.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Xp((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Bm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Bm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return ip.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ry(t,n));var a=this.ts.get(t);void 0===a&&(a=Wm(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),Xk=function(){function e(){i(this,e),this.es=new tv(Zk.ns),this.ss=new tv(Zk.rs)}return s(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Zk(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new Zk(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new Kd(new zd([])),r=new Zk(n,e),i=new Zk(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new Kd(new zd([])),n=new Zk(t,e),r=new Zk(t,e+1),i=Wm();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Zk(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Zk=function(){function e(t,n){i(this,e),this.key=t,this.ds=n}return s(e,null,[{key:"ns",value:function(e,t){return Kd.comparator(e.key,t.key)||Ld(e.ds,t.ds)}},{key:"rs",value:function(e,t){return Ld(e.ds,t.ds)||Kd.comparator(e.key,t.key)}}]),e}(),ew=function(){function e(t,n){i(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new tv(Zk.ns)}return s(e,[{key:"checkEmpty",value:function(e){return ip.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ay(i,t,n,r);this.mutationQueue.push(a);var o,u=b(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._s=this._s.add(new Zk(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return ip.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ip.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return ip.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ip.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return ip.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Zk(t,0),i=new Zk(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),ip.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tv(Ld);return t.forEach((function(e){var t=new Zk(e,0),i=new Zk(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),ip.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Kd.isDocumentKey(i)||(i=i.child(""));var a=new Zk(new Kd(i),0),o=new tv(Ld);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),ip.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;wd(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return ip.forEach(t.mutations,(function(i){var a=new Zk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Zk(t,0),r=this._s.firstAfterOrEqual(n);return ip.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,ip.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),tw=function(){function e(t){i(this,e),this.Ts=t,this.docs=new Xp(Kd.comparator),this.size=0}return s(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ip.resolve(n?n.document.mutableCopy():Vv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Um();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Vv.newInvalidDocument(e))})),ip.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Um(),a=t.path,o=new Kd(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Zd($d(l),n)<=0||(r.has(l.key)||Rm(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return ip.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){kd()}},{key:"Es",value:function(e,t){return ip.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new nw(this)}},{key:"getSize",value:function(e){return ip.resolve(this.size)}}]),e}(),nw=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).Jn=e,r}return s(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),ip.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(Vk),rw=function(){function e(t){i(this,e),this.persistence=t,this.As=new Mm((function(e){return hm(e)}),dm),this.lastRemoteSnapshotVersion=Vd.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Xk,this.targetCount=0,this.bs=Ck.vn()}return s(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),ip.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ip.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ip.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),ip.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),ip.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new Ck(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,ip.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),ip.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,ip.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ip.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ip.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return ip.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),ip.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ip.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),ip.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return ip.resolve(n)}},{key:"containsKey",value:function(e,t){return ip.resolve(this.vs.containsKey(t))}}]),e}(),iw=function(){function e(t,n){var r=this;i(this,e),this.Ps={},this.overlays={},this.Vs=new mp(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new rw(this),this.indexManager=new lk,this.remoteDocumentCache=new tw((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new Tg(n),this.xs=new Jk(this.serializer)}return s(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new $k,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new ew(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;vd("MemoryPersistence","Starting transaction:",e);var i=new aw(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return ip.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),aw=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return s(n)}(tp),ow=function(){function e(t){i(this,e),this.persistence=t,this.$s=new Xk,this.Ms=null}return s(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw kd()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),ip.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),ip.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),ip.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ip.forEach(this.Bs,(function(r){var i=Kd.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,Vd.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return ip.or([function(){return ip.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),uw=function(){function e(t){i(this,e),this.serializer=t}return s(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new ap("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ip,{unique:!0}),e.createObjectStore("documentMutations")}(e),sw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ip.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),sw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ip,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ip.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Us(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Ks(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Gs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Qs(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Vp});t.createIndex("collectionPathOverlayIndex",jp,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",zp,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Cp});t.createIndex("documentKeyIndex",Np),t.createIndex("collectionGroupIndex",Ap)}(e)})).next((function(){return i.zs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Lp}).createIndex("sequenceNumberIndex",Mp,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Fp}).createIndex("documentKeyIndex",Up,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=_k(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return ip.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return ip.forEach(r,(function(r){wd(r.userId===n.userId);var i=Rg(t.serializer,r);return bk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new zd(n),o=function(e){return[0,wp(e)]}(a);r.push(t.get(o).next((function(n){return n?ip.resolve():function(n){return t.put({targetId:0,path:wp(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ip.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Op});var n=t.store("collectionParents"),r=new fk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:wp(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new zd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=I(e,3),r=(n[0],n[1]),a=(n[2],xp(r));return i(a.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Pg(r),a=Og(t.serializer,i);return n.put(a)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Kd(zd.fromString(i.document.name).popFirst(5)):i.noDocument?Kd.fromSegments(i.noDocument.path):i.unknownDocument?Kd.fromSegments(i.unknownDocument.path):kd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return ip.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),i=zk(this.serializer),a=new iw(ow.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Wm();Rg(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),ip.forEach(r,(function(e,r){var o=new fd(r),u=Bg.ie(n.serializer,o),s=a.getIndexManager(o),c=xk.ie(o,n.serializer,s,a.referenceDelegate);return new Yk(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Wp(t,mp.ct),e).next()}))}))}}]),e}();function sw(e){e.createObjectStore("targetDocuments",{keyPath:Rp}).createIndex("documentTargetsIndex",Pp,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Dp,{unique:!0}),e.createObjectStore("targetGlobal")}var cw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lw=function(){function e(t,n,r,a,o,u,s,c,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(i(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=o,this.window=u,this.document=s,this.Hs=l,this.Js=f,this.Ys=h,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new xd(_d.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fk(this,a),this.si=n+"main",this.serializer=new Tg(c),this.ii=new op(this.si,this.Ys,new uw(this.serializer)),this.Ds=new Nk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zk(this.serializer),this.xs=new Vg,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===f&&md("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return s(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new xd(_d.FAILED_PRECONDITION,cw);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new mp(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=y(v().mark((function n(r){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=y(v().mark((function t(n){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return hw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(cp(t))return vd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return vd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return fw(e).get("owner").next((function(e){return ip.resolve(t._i(e))}))}},{key:"mi",value:function(e){return hw(e).delete(this.clientId)}},{key:"gi",value:function(){var e=y(v().mark((function e(){var t,n,r,i,a=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Qp(e,"clientMetadata");return t.j().next((function(e){var n=a.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ip.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=b(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ri.removeItem(this.Ii(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?ip.resolve(!0):fw(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new xd(_d.FAILED_PRECONDITION,cw);return!1}}return!(!t.networkEnabled||!t.inForeground)||hw(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&vd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=y(v().mark((function e(){var t=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Wp(e,mp.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return hw(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return xk.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new dk(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Bg.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;vd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Ys)?Hp:14===i?Gp:13===i?Kp:12===i?qp:11===i?Bp:void kd();return this.ii.runTransaction(e,o,u,(function(i){return a=new Wp(i,r.Vs?r.Vs.next():mp.ct),"readwrite-primary"===t?r.li(a).next((function(e){return!!e||r.fi(a)})).next((function(t){if(!t)throw md("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new xd(_d.FAILED_PRECONDITION,ep);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Pi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return fw(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new xd(_d.FAILED_PRECONDITION,cw)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fw(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=fw(e);return n.get("owner").next((function(e){return t._i(e)?(vd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ip.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(md("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!U()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return vd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return md("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(kc){md("Failed to set zombie client id.",kc)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(kc){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return op.D()}}]),e}();function fw(e){return Qp(e,"owner")}function hw(e){return Qp(e,"clientMetadata")}function dw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var pw=function(){function e(t,n,r,a){i(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=a}return s(e,null,[{key:"Di",value:function(t,n){var r,i=Wm(),a=Wm(),o=b(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),vw=function(){function e(){i(this,e),this.Ci=!1}return s(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(bm(t))return ip.resolve(null);var r=Sm(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Cm(t,null,"F"),r=Sm(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Wm.apply(void 0,ie(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,Cm(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return bm(t)||r.isEqual(Vd.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(pd()<=ce.DEBUG&&vd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dm(t)),i.Fi(e,o,t,Jd(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new tv(Om(e));return t.forEach((function(t,r){Rm(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return pd()<=ce.DEBUG&&vd("QueryEngine","Using full collection scan to execute query:",Dm(t)),this.xi.getDocumentsMatchingQuery(e,t,Xd.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),mw=function(){function e(t,n,r,a){i(this,e),this.persistence=t,this.Bi=n,this.serializer=a,this.Li=new Xp(Ld),this.qi=new Mm((function(e){return hm(e)}),dm),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return s(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yk(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function yw(e,t,n,r){return new mw(e,t,n,r)}function gw(e,t){return kw.apply(this,arguments)}function kw(){return kw=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Wm(),s=b(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=b(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=b(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=b(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function ww(e,t){var n=bd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ip.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);wd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Wm(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function bw(e){var t=bd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function _w(e,t){var n=bd(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(ov.EMPTY_BYTE_STRING,Vd.min()).withLastLimboFreeSnapshotVersion(Vd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ds.updateTargetData(e,c))}}));var u=Um(),s=Wm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(xw(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(Vd.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return ip.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function xw(e,t,n){var r=Wm(),i=Wm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Um();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Vd.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):vd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function Iw(e,t){var n=bd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Ew(e,t){var n=bd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,ip.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new Sg(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Sw(e,t,n){return Tw.apply(this,arguments)}function Tw(){return Tw=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=bd(t),a=i.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),cp(e.t1)){e.next=12;break}throw e.t1;case 12:vd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Tw.apply(this,arguments)}function Cw(e,t,n){var r=bd(e),i=Vd.min(),a=Wm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=bd(e),i=r.qi.get(n);return void 0!==i?ip.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,Sm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:Vd.min(),n?a:Wm())})).next((function(e){return Dw(r,Pm(t),e),{documents:e,Wi:a}}))}))}function Nw(e,t){var n=bd(e),r=bd(n.Ds),i=n.Li.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function Aw(e,t){var n=bd(e),r=n.Ui.get(t)||Vd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,Jd(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Dw(n,t,e),e}))}function Dw(e,t,n){var r=e.Ui.get(t)||Vd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function Rw(e,t,n,r){return Pw.apply(this,arguments)}function Pw(){return Pw=y(v().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=bd(t),o=Wm(),u=Um(),s=b(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Hi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Ji(l)).setReadTime(n.Yi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,Ew(a,function(e){return Sm(wm(zd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return xw(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Ds.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ds.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Ow(e,t){return Lw.apply(this,arguments)}function Lw(){return Lw=y(v().mark((function e(t,n){var r,i,a,o=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Wm(),e.next=3,Ew(t,Sm(Lg(n.bundledQuery)));case 3:return i=e.sent,a=bd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=eg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.xs.saveNamedQuery(e,n);var o=i.withResumeToken(ov.EMPTY_BYTE_STRING,t);return a.Li=a.Li.insert(o.targetId,o),a.Ds.updateTargetData(e,o).next((function(){return a.Ds.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ds.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}function Mw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Fw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Uw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Vw=function(){function e(t,n,r,a){i(this,e),this.user=t,this.batchId=n,this.state=r,this.error=a}return s(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new xd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(md("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),jw=function(){function e(t,n,r){i(this,e),this.targetId=t,this.state=n,this.error=r}return s(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xd(i.error.code,i.error.message))),a?new e(t,i.state,r):(md("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),zw=function(){function e(t,n){i(this,e),this.clientId=t,this.activeTargetIds=n}return s(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ym(),o=0;i&&o<r.activeTargetIds.length;++o)i=kp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(md("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Bw=function(){function e(t,n){i(this,e),this.clientId=t,this.onlineState=n}return s(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(md("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),qw=function(){function e(){i(this,e),this.activeTargetIds=Ym()}return s(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Kw=function(){function e(t,n,r,a,o){i(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Xp(Ld),this.started=!1,this.ur=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.cr=Mw(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new qw),this.hr=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return s(e,[{key:"start",value:function(){var e=y(v().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=b(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Mw(this.persistenceKey,i)))&&(o=zw.Zi(i,a))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(u=this.storage.getItem(this.wr))&&(s=this.gr(u))&&this.yr(s),c=b(this.ur);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ir(f)}catch(d){c.e(d)}finally{c.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Uw(this.persistenceKey,e));if(n){var r=jw.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Uw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return vd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){vd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){vd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(vd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void md("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(y(v().mark((function e(){var r,i,a,o,u,s,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(a));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=mp.ct;if(null!=e)try{var n=JSON.parse(e);wd("number"==typeof n),t=n}catch(e){md("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==mp.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new Vw(this.currentUser,e,t,n),i=Fw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Tr",value:function(e){var t=Fw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=Uw(this.persistenceKey,e),i=new jw(e,t,n);this.setItem(r,i.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return zw.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Vw.Zi(new fd(i),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return jw.Zi(r,t)}},{key:"gr",value:function(e){return Bw.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:vd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=Ym();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Gw=function(){function e(){i(this,e),this.Br=new qw,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return s(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new qw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Hw=function(){function e(){i(this,e)}return s(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ww=function(){function e(){var t=this;i(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return s(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){vd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=b(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){vd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=b(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Qw=null;function Yw(){return null===Qw?Qw=268435456+Math.round(2147483648*Math.random()):Qw++,"0x"+Qw.toString(16)}var Jw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},$w=function(){function e(t){i(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return s(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),Xw="WebChannelConnection",Zw=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return s(n,[{key:"lo",value:function(e,t,n,r){var i=Yw();return new Promise((function(a,o){var u=new cd;u.setWithCredentials(!0),u.listenOnce(id.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case rd.NO_ERROR:var t=u.getResponseJson();vd(Xw,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case rd.TIMEOUT:vd(Xw,"RPC '".concat(e,"' ").concat(i," timed out")),o(new xd(_d.DEADLINE_EXCEEDED,"Request time out"));break;case rd.HTTP_ERROR:var n=u.getStatus();if(vd(Xw,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(_d).indexOf(t)>=0?t:_d.UNKNOWN}(s.status);o(new xd(c,s.message))}else o(new xd(_d.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new xd(_d.UNAVAILABLE,"Connection failed."));break;default:kd()}}finally{vd(Xw,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);vd(Xw,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=Yw(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=td(),o=nd(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new ud({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");vd(Xw,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new $w({Wr:function(t){f?vd(Xw,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(vd(Xw,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),vd(Xw,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,sd.EventType.OPEN,(function(){f||vd(Xw,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,sd.EventType.CLOSE,(function(){f||(f=!0,vd(Xw,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,sd.EventType.ERROR,(function(t){f||(f=!0,yd(Xw,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new xd(_d.UNAVAILABLE,"The operation could not be completed")))})),d(c,sd.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];wd(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){vd(Xw,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Sy[e];if(void 0!==t)return Ly(t)}(u),l=o.message;void 0===s&&(s=_d.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.so(new xd(s,l)),c.close()}else vd(Xw,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,ad.STAT_EVENT,(function(t){t.stat===od.PROXY?vd(Xw,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===od.NOPROXY&&vd(Xw,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),n}(function(){function e(t){i(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return s(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=Yw(),o=this.ao(e,t);vd("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return vd("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw yd("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=Jw[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function eb(){return"undefined"!=typeof window?window:null}function tb(){return"undefined"!=typeof document?document:null}function nb(e){return new Jy(e,!0)}var rb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;i(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=a,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return s(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&vd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),ib=function(){function e(t,n,r,a,o,u,s,c){i(this,e),this.Ws=t,this.bo=r,this.Po=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new rb(t,n)}return s(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===_d.RESOURCE_EXHAUSTED?(md(n.toString()),md("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===_d.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=I(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new xd(_d.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(y(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return vd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(vd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),ab=function(e){l(n,e);var t=p(n);function n(e,r,a,o,u,s){var c;return i(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,o,s)).serializer=u,c}return s(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:kd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(wd(void 0===t||"string"==typeof t),ov.fromBase64String(t||"")):(wd(void 0===t||t instanceof Uint8Array),ov.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?_d.UNKNOWN:Ly(e.code);return new xd(t,e.message||"")}(o);n=new By(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ig(e,s.document.name),l=eg(s.document.updateTime),f=s.document.createTime?eg(s.document.createTime):Vd.min(),h=new Fv({mapValue:{fields:s.document.fields}}),d=Vv.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new jy(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=ig(e,m.document),g=m.readTime?eg(m.readTime):Vd.min(),k=Vv.newNoDocument(y,g),w=m.removedTargetIds||[];n=new jy([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=ig(e,b.document),x=b.removedTargetIds||[];n=new jy([],x,_,null)}else{if(!("filter"in t))return kd();t.filter;var I=t.filter;I.targetId;var E=I.count||0,S=new Py(E),T=I.targetId;n=new zy(T,S)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Vd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Vd.min():t.readTime?eg(t.readTime):Vd.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=ug(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=pm(r)?{documents:pg(e,r)}:{query:vg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Xy(e,t.resumeToken):t.snapshotVersion.compareTo(Vd.min())>0&&(n.readTime=$y(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return kd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=ug(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(ib),ob=function(e){l(n,e);var t=p(n);function n(e,r,a,o,u,s){var c;return i(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,o,s)).serializer=u,c.Ho=!1,c}return s(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,Ft(f(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(wd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(wd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?eg(e.updateTime):eg(t);return n.isEqual(Vd.min())&&(n=eg(t)),new hy(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=eg(e.commitTime);return this.listener.Zo(n,t)}return wd(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=ug(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return hg(t.serializer,e)}))};this.Fo(n)}}]),n}(ib),ub=function(e){l(n,e);var t=p(n);function n(e,r,a,o){var u;return i(this,n),(u=t.call(this)).authCredentials=e,u.appCheckCredentials=r,u.connection=a,u.serializer=o,u.eu=!1,u}return s(n,[{key:"nu",value:function(){if(this.eu)throw new xd(_d.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=I(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===_d.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new xd(_d.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=I(a,2),u=o[0],s=o[1];return i.connection.fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===_d.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new xd(_d.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return s((function e(){i(this,e)}))}());var sb=function(){function e(t,n){i(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return s(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(md(t),this.ru=!1):vd("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),cb=s((function e(t,n,r,a,o){var u=this;i(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr((function(e){r.enqueueAndForget(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=wb(u),!e.t0){e.next=5;break}return vd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=bd(t)).du.add(4),e.next=4,hb(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,lb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new sb(r,a)}));function lb(e){return fb.apply(this,arguments)}function fb(){return fb=y(v().mark((function e(t){var n,r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!wb(t)){e.next=18;break}n=b(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),fb.apply(this,arguments)}function hb(e){return db.apply(this,arguments)}function db(){return db=y(v().mark((function e(t){var n,r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),db.apply(this,arguments)}function pb(e,t){var n=bd(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),kb(n)?gb(n):Yb(n).No()&&mb(n,t))}function vb(e,t){var n=bd(e),r=Yb(n);n.fu.delete(t),r.No()&&yb(n,t),0===n.fu.size&&(r.No()?r.$o():wb(n)&&n.mu.set("Unknown"))}function mb(e,t){e.gu.Ot(t.targetId),Yb(e).jo(t)}function yb(e,t){e.gu.Ot(t),Yb(e).Wo(t)}function gb(e){e.gu=new Ky({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),Yb(e).start(),e.mu.ou()}function kb(e){return wb(e)&&!Yb(e).xo()&&e.fu.size>0}function wb(e){return 0===bd(e).du.size}function bb(e){e.gu=void 0}function _b(e){return xb.apply(this,arguments)}function xb(){return xb=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){mb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function Ib(e,t){return Eb.apply(this,arguments)}function Eb(){return Eb=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bb(t),kb(t)?(t.mu.au(n),gb(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Sb(e,t,n){return Tb.apply(this,arguments)}function Tb(){return Tb=y(v().mark((function e(t,n,r){var i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof By&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=y(v().mark((function e(t,n){var r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=b(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),vd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Cb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof jy?t.gu.Kt(n):n instanceof zy?t.gu.Jt(n):t.gu.zt(n),r.isEqual(Vd.min())){e.next=29;break}return e.prev=14,e.next=17,bw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(ov.EMPTY_BYTE_STRING,n.snapshotVersion)),yb(e,t);var r=new Sg(n.target,t,1,n.sequenceNumber);mb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),vd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Cb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Tb.apply(this,arguments)}function Cb(e,t,n){return Nb.apply(this,arguments)}function Nb(){return Nb=y(v().mark((function e(t,n,r){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cp(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,hb(t);case 5:t.mu.set("Offline"),r||(r=function(){return bw(t.localStore)}),t.asyncQueue.enqueueRetryable(y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,lb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}function Ab(e,t){return t().catch((function(n){return Cb(e,n,t)}))}function Db(e){return Rb.apply(this,arguments)}function Rb(){return Rb=y(v().mark((function e(t){var n,r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=bd(t),r=Jb(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!Pb(n)){e.next=19;break}return e.prev=3,e.next=6,Iw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Ob(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Cb(n,e.t0);case 17:e.next=2;break;case 19:Lb(n)&&Mb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Rb.apply(this,arguments)}function Pb(e){return wb(e)&&e.lu.length<10}function Ob(e,t){e.lu.push(t);var n=Jb(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function Lb(e){return wb(e)&&!Jb(e).xo()&&e.lu.length>0}function Mb(e){Jb(e).start()}function Fb(e){return Ub.apply(this,arguments)}function Ub(){return Ub=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jb(t).tu();case 1:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}function Vb(e){return jb.apply(this,arguments)}function jb(){return jb=y(v().mark((function e(t){var n,r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jb(t),r=b(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),jb.apply(this,arguments)}function zb(e,t,n){return Bb.apply(this,arguments)}function Bb(){return Bb=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=Dy.from(i,n,r),e.next=3,Ab(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Db(t);case 5:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function qb(e,t){return Kb.apply(this,arguments)}function Kb(){return Kb=y(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Jb(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=y(v().mark((function e(t,n){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Oy(i=n.code)||i===_d.ABORTED){e.next=7;break}return r=t.lu.shift(),Jb(t).Oo(),e.next=5,Ab(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Db(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Lb(t)&&Mb(t);case 5:case"end":return e.stop()}}),e)}))),Kb.apply(this,arguments)}function Gb(e,t){return Hb.apply(this,arguments)}function Hb(){return Hb=y(v().mark((function e(t,n){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=bd(t)).asyncQueue.verifyOperationInProgress(),vd("RemoteStore","RemoteStore received new credentials"),i=wb(r),r.du.add(3),e.next=6,hb(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,lb(r);case 12:case"end":return e.stop()}}),e)}))),Hb.apply(this,arguments)}function Wb(e,t){return Qb.apply(this,arguments)}function Qb(){return Qb=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bd(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,lb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,hb(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}function Yb(e){return e.yu||(e.yu=function(e,t,n){var r=bd(e);return r.nu(),new ab(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:_b.bind(null,e),Zr:Ib.bind(null,e),zo:Sb.bind(null,e)}),e.wu.push(function(){var t=y(v().mark((function t(n){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),kb(e)?gb(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:bb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function Jb(e){return e.pu||(e.pu=function(e,t,n){var r=bd(e);return r.nu(),new ob(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:Fb.bind(null,e),Zr:qb.bind(null,e),Xo:Vb.bind(null,e),Zo:zb.bind(null,e)}),e.wu.push(function(){var t=y(v().mark((function t(n){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,Db(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(vd("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var $b=function(){function e(t,n,r,a,o){i(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new Id,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return s(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xd(_d.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Xb(e,t){if(md("AsyncQueue","".concat(t,": ").concat(e)),cp(e))return new xd(_d.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Zb=function(){function e(t){i(this,e),this.comparator=t?function(e,n){return t(e,n)||Kd.comparator(e.key,n.key)}:function(e,t){return Kd.comparator(e.key,t.key)},this.keyedMap=jm(),this.sortedSet=new Xp(this.comparator)}return s(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),e_=function(){function e(){i(this,e),this.Iu=new Xp(Kd.comparator)}return s(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):kd():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),t_=function(){function e(t,n,r,a,o,u,s,c,l){i(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=l}return s(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Zb.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),n_=s((function e(){i(this,e),this.Eu=void 0,this.listeners=[]})),r_=s((function e(){i(this,e),this.queries=new Mm((function(e){return Am(e)}),Nm),this.onlineState="Unknown",this.Au=new Set}));function i_(e,t){return a_.apply(this,arguments)}function a_(){return a_=y(v().mark((function e(t,n){var r,i,a,o,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new n_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Xb(e.t0,"Initialization of query '".concat(Dm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&l_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),a_.apply(this,arguments)}function o_(e,t){return u_.apply(this,arguments)}function u_(){return u_=y(v().mark((function e(t,n){var r,i,a,o,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}function s_(e,t){var n,r=bd(e),i=!1,a=b(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=b(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Eu=o}}}catch(f){a.e(f)}finally{a.f()}i&&l_(r)}function c_(e,t,n){var r=bd(e),i=r.queries.get(t);if(i){var a,o=b(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function l_(e){e.Au.forEach((function(e){e.next()}))}var f_=function(){function e(t,n,r){i(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return s(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=b(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new t_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=t_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),h_=function(){function e(t,n){i(this,e),this.Nu=t,this.byteLength=n}return s(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),d_=function(){function e(t){i(this,e),this.serializer=t}return s(e,[{key:"Hi",value:function(e){return ig(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?lg(this.serializer,e.document,!1):Vv.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return eg(e)}}]),e}(),p_=function(){function e(t,n,r){i(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=v_(t)}return s(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=zd.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new d_(this.serializer),i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hi(a.metadata.name),s=b(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Wm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=y(v().mark((function e(){var t,n,r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rw(this.localStore,new d_(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=b(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Ow(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function v_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var m_=s((function e(t){i(this,e),this.key=t})),y_=s((function e(t){i(this,e),this.key=t})),g_=function(){function e(t,n){i(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Wm(),this.mutatedKeys=Wm(),this.Ku=Om(t),this.Gu=new Zb(this.Ku)}return s(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new e_,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Rm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kd()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new t_(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new e_,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=Wm(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new y_(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new m_(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=Wm();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return t_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),k_=s((function e(t,n,r){i(this,e),this.query=t,this.targetId=n,this.view=r})),w_=s((function e(t){i(this,e),this.key=t,this.ec=!1})),b_=function(){function e(t,n,r,a,o,u){i(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new Mm((function(e){return Am(e)}),Nm),this.ic=new Map,this.rc=new Set,this.oc=new Xp(Kd.comparator),this.uc=new Map,this.cc=new Xk,this.ac={},this.hc=new Map,this.lc=Ck.bn(),this.onlineState="Unknown",this.fc=void 0}return s(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function __(e,t){return x_.apply(this,arguments)}function x_(){return x_=y(v().mark((function e(t,n){var r,i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vx(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,Ew(r.localStore,Sm(n));case 8:return u=e.sent,r.isPrimaryClient&&pb(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,I_(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}function I_(e,t,n,r,i){return E_.apply(this,arguments)}function E_(){return E_=y(v().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=y(v().mark((function e(t,n,r,i){var a,o,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Cw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(G_(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Cw(t.localStore,n,!0);case 3:return o=e.sent,u=new g_(n,o.Wi),s=u.zu(o.documents),c=Vy.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),G_(t,r,l.Yu),f=new k_(n,r,u),e.abrupt("return",(t.sc.set(n,f),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function S_(e,t){return T_.apply(this,arguments)}function T_(){return T_=y(v().mark((function e(t,n){var r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bd(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!Nm(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Sw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),vb(r.remoteStore,i.targetId),q_(r,i.targetId)})).catch(np);case 9:e.next=14;break;case 11:return q_(r,i.targetId),e.next=14,Sw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),T_.apply(this,arguments)}function C_(e,t,n){return N_.apply(this,arguments)}function N_(){return N_=y(v().mark((function e(t,n,r){var i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mx(t),e.prev=1,e.next=4,function(e,t){var n,r,i=bd(e),a=Ud.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Wm());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Um(),s=Wm();return i.Ki.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=b(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ky(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new _y(c.key,l,Uv(l.value.mapValue),dy.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:zm(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Xp(Ld)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Q_(i,a.changes);case 9:return e.next=11,Db(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Xb(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),N_.apply(this,arguments)}function A_(e,t){return D_.apply(this,arguments)}function D_(){return D_=y(v().mark((function e(t,n){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bd(t),e.prev=1,e.next=4,_w(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(wd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?wd(n.ec):e.removedDocuments.size>0&&(wd(n.ec),n.ec=!1))})),e.next=8,Q_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,np(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),D_.apply(this,arguments)}function R_(e,t,n){var r=bd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=bd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=b(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&l_(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function P_(e,t,n){return O_.apply(this,arguments)}function O_(){return O_=y(v().mark((function e(t,n,r){var i,a,o,u,s,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=bd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Xp(Kd.comparator)).insert(o,Vv.newNoDocument(o,Vd.min())),s=Wm().add(o),c=new Uy(Vd.min(),new Map,new tv(Ld),u,s),e.next=9,A_(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),W_(i),e.next=16;break;case 14:return e.next=16,Sw(i.localStore,n,!1).then((function(){return q_(i,n,r)})).catch(np);case 16:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=y(v().mark((function e(t,n){var r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bd(t),i=n.batch.batchId,e.prev=1,e.next=4,ww(r.localStore,n);case 4:return a=e.sent,B_(r,i,null),z_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Q_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,np(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),M_.apply(this,arguments)}function F_(e,t,n){return U_.apply(this,arguments)}function U_(){return U_=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bd(t),e.prev=1,e.next=4,function(e,t){var n=bd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return wd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,B_(i,n,r),z_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Q_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,np(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),U_.apply(this,arguments)}function V_(e,t){return j_.apply(this,arguments)}function j_(){return j_=y(v().mark((function e(t,n){var r,i,a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wb((r=bd(t)).remoteStore)||vd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=bd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Xb(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),j_.apply(this,arguments)}function z_(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function B_(e,t,n){var r=bd(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function q_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=b(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||K_(e,t)}))}function K_(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(vb(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),W_(e))}function G_(e,t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof m_?(e.cc.addReference(a.key,t),H_(e,a)):a instanceof y_?(vd("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||K_(e,a.key)):kd()}}catch(o){i.e(o)}finally{i.f()}}function H_(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(vd("SyncEngine","New document in limbo: "+n),e.rc.add(r),W_(e))}function W_(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new Kd(zd.fromString(t)),r=e.lc.next();e.uc.set(r,new w_(n)),e.oc=e.oc.insert(n,r),pb(e.remoteStore,new Sg(Sm(wm(n.path)),r,2,mp.ct))}}function Q_(e,t,n){return Y_.apply(this,arguments)}function Y_(){return Y_=y(v().mark((function e(t,n,r){var i,a,o,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=bd(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=pw.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.zo(a),e.next=9,function(){var e=y(v().mark((function e(t,n){var r,i,a,o,u,s,c,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ip.forEach(n,(function(t){return ip.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ip.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),cp(e.t0)){e.next=10;break}throw e.t0;case 10:vd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=b(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Li.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function J_(e,t){return $_.apply(this,arguments)}function $_(){return $_=y(v().mark((function e(t,n){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=bd(t)).currentUser.isEqual(n)){e.next=11;break}return vd("SyncEngine","User change. New user:",n.toKey()),e.next=5,gw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new xd(_d.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Q_(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),$_.apply(this,arguments)}function X_(e,t){var n=bd(e),r=n.uc.get(t);if(r&&r.ec)return Wm().add(r.key);var i=Wm(),a=n.ic.get(t);if(!a)return i;var o,u=b(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Z_(e,t){return ex.apply(this,arguments)}function ex(){return ex=y(v().mark((function e(t,n){var r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bd(t),e.next=3,Cw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Xu(i),e.abrupt("return",(r.isPrimaryClient&&G_(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e,t){return nx.apply(this,arguments)}function nx(){return nx=y(v().mark((function e(t,n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bd(t),e.abrupt("return",Aw(r.localStore,n).then((function(e){return Q_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t,n,r){return ix.apply(this,arguments)}function ix(){return ix=y(v().mark((function e(t,n,r,i){var a,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=bd(t),e.next=3,function(e,t){var n=bd(e),r=bd(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):ip.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Db(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(B_(a,n,i||null),z_(a,n),function(e,t){bd(bd(e).mutationQueue).En(t)}(a.localStore,n)):kd();case 11:return e.next=13,Q_(a,o);case 13:e.next=16;break;case 15:vd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e,t){return ox.apply(this,arguments)}function ox(){return ox=y(v().mark((function e(t,n){var r,i,a,o,u,s,c,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vx(r=bd(t)),mx(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,ux(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,Wb(r.remoteStore,!0);case 9:o=b(a);try{for(o.s();!(u=o.n()).done;)s=u.value,pb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return q_(r,t),Sw(r.localStore,t,!0)})),vb(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,ux(r,c);case 21:return function(e){var t=bd(e);t.uc.forEach((function(e,n){vb(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new Xp(Kd.comparator)}(r),r.fc=!1,e.next=25,Wb(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e,t,n){return sx.apply(this,arguments)}function sx(){return sx=y(v().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,m,y,g;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=bd(t),a=[],o=[],u=b(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ic.get(c))||0===f.length){e.next=34;break}return e.next=11,Ew(i.localStore,Sm(f[0]));case 11:l=e.sent,h=b(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,m=i.sc.get(p),e.next=20,Z_(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Nw(i.localStore,c);case 36:return g=e.sent,e.next=39,Ew(i.localStore,g);case 39:return l=e.sent,e.next=42,I_(i,cx(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),sx.apply(this,arguments)}function cx(e){return km(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function lx(e){var t=bd(e);return bd(bd(t.localStore).persistence).bi()}function fx(e,t,n,r){return hx.apply(this,arguments)}function hx(){return hx=y(v().mark((function e(t,n,r,i){var a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=bd(t)).fc){e.next=3;break}return e.abrupt("return",void vd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Aw(a.localStore,Pm(o[0]));case 10:return u=e.sent,s=Uy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ov.EMPTY_BYTE_STRING),e.next=14,Q_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Sw(a.localStore,n,!0);case 17:return q_(a,n,i),e.abrupt("break",20);case 19:kd();case 20:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t,n){return px.apply(this,arguments)}function px(){return px=y(v().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=vx(t)).fc){e.next=45;break}a=b(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ic.has(u)){e.next=10;break}return vd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Nw(i.localStore,u);case 12:return s=e.sent,e.next=15,Ew(i.localStore,s);case 15:return c=e.sent,e.next=18,I_(i,cx(s),c.targetId,!1,c.resumeToken);case 18:pb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=b(r),e.prev=30,h=v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,Sw(i.localStore,t,!1).then((function(){vb(i.remoteStore,t),q_(i,t)})).catch(np);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),px.apply(this,arguments)}function vx(e){var t=bd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=A_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=X_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=P_.bind(null,t),t.nc.zo=s_.bind(null,t.eventManager),t.nc.wc=c_.bind(null,t.eventManager),t}function mx(e){var t=bd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=L_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=F_.bind(null,t),t}function yx(e,t,n){var r=bd(e);(function(){var e=y(v().mark((function e(t,n,r){var i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=bd(e),r=eg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(v_(i)),a=new p_(i,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.$u(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Q_(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=bd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(yd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var gx=function(){function e(){i(this,e),this.synchronizeTabs=!1}return s(e,[{key:"initialize",value:function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=nb(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return yw(this.persistence,new vw,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new iw(ow.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Gw}},{key:"terminate",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),kx=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).mc=e,o.cacheSizeBytes=r,o.forceOwnership=a,o.synchronizeTabs=!1,o}return s(n,[{key:"initialize",value:function(){var e=y(v().mark((function e(t){var r=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(f(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,mx(this.mc.syncEngine);case 6:return e.next=8,Db(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return yw(this.persistence,new vw,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Lk(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new vp(t,this.persistence);return new pp(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=dw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?wk.withCacheSize(this.cacheSizeBytes):wk.DEFAULT;return new lw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,eb(),tb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Gw}}]),n}(gx),wx=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,r,!1)).mc=e,a.cacheSizeBytes=r,a.synchronizeTabs=!0,a}return s(n,[{key:"initialize",value:function(){var e=y(v().mark((function e(t){var r,i=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(f(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof Kw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:rx.bind(null,r),Mr:fx.bind(null,r),Fr:dx.bind(null,r),bi:lx.bind(null,r),Or:tx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ax(i.mc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=eb();if(!Kw.D(t))throw new xd(_d.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=dw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(kx),bx=function(){function e(){i(this,e)}return s(e,[{key:"initialize",value:function(){var e=y(v().mark((function e(t,n){var r=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return R_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=J_.bind(null,this.syncEngine),e.next=12,Wb(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new r_}},{key:"createDatastore",value:function(e){var t,n=nb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Zw(t));return function(e,t,n,r){return new ub(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return R_(o.syncEngine,e,0)},a=Ww.D()?new Ww:new Hw,new cb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new b_(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bd(t),vd("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,hb(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function _x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return y(v().mark((function r(){var i;return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var xx=function(){function e(t){i(this,e),this.observer=t,this.muted=!1}return s(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):md("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Ix=function(){function e(t,n){var r=this;i(this,e),this.Ic=t,this.serializer=n,this.metadata=new Id,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return s(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=y(v().mark((function e(){var t,n,r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new h_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=y(v().mark((function e(){var t,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=y(v().mark((function e(){var t,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ex=function(){function e(t){i(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return s(e,[{key:"lookup",value:function(){var e=y(v().mark((function e(t){var n,r=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new xd(_d.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=y(v().mark((function e(t,n){var r,i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bd(t),i=ug(r.serializer)+"/documents",a={documents:n.map((function(e){return rg(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=fg(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());wd(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Cy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=y(v().mark((function e(){var t,n=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Kd.fromPath(t);n.mutations.push(new Ny(r,n.precondition(r)))})),e.next=7,function(){var e=y(v().mark((function e(t,n){var r,i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bd(t),i=ug(r.serializer)+"/documents",a={writes:n.map((function(e){return hg(r.serializer,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw kd();t=Vd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new xd(_d.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Vd.min())?dy.exists(!1):dy.updateTime(t):dy.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vd.min()))throw new xd(_d.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dy.updateTime(t)}return dy.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Sx=function(){function e(t,n,r,a,o){i(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=a,this.deferred=o,this.Vc=r.maxAttempts,this.Co=new rb(this.asyncQueue,"transaction_retry")}return s(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao(y(v().mark((function t(){var n,r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ex(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!yp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Oy(t)}return!1}}]),e}(),Tx=function(){function e(t,n,r,a){var o=this;i(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=fd.UNAUTHENTICATED,this.clientId=Od.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vd("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return vd("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return s(e,[{key:"getConfiguration",value:function(){var e=y(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new xd(_d.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Id;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(y(v().mark((function n(){var r;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Xb(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=y(v().mark((function e(t,n){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),vd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,gw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=y(v().mark((function e(t,n){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Px(t);case 3:return r=e.sent,vd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Gb(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Gb(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Rx(e){return"FirebaseError"===e.name?e.code===_d.FAILED_PRECONDITION||e.code===_d.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Px(e){return Ox.apply(this,arguments)}function Ox(){return Ox=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return vd("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Cx(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Rx(n=e.t0)){e.next=13;break}throw n;case 13:return yd("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Cx(t,new gx);case 16:e.next=21;break;case 18:return vd("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Cx(t,new gx);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),Ox.apply(this,arguments)}function Lx(e){return Mx.apply(this,arguments)}function Mx(){return Mx=y(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return vd("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Ax(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return vd("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Ax(t,new bx);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e){return Px(e).then((function(e){return e.persistence}))}function Ux(e){return Px(e).then((function(e){return e.localStore}))}function Vx(e){return Lx(e).then((function(e){return e.remoteStore}))}function jx(e){return Lx(e).then((function(e){return e.syncEngine}))}function zx(e){return Lx(e).then((function(e){return e.datastore}))}function Bx(e){return qx.apply(this,arguments)}function qx(){return qx=y(v().mark((function e(t){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=__.bind(null,n.syncEngine),r.onUnlisten=S_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function Kx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Id;return e.asyncQueue.enqueueAndForget(y(v().mark((function i(){return v().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xx({next:function(a){t.enqueueAndForget((function(){return o_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new xd(_d.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new xd(_d.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new f_(wm(n.path),a,{includeMetadataChanges:!0,xu:!0});return i_(e,o)},i.next=3,Bx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Gx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Id;return e.asyncQueue.enqueueAndForget(y(v().mark((function i(){return v().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xx({next:function(n){t.enqueueAndForget((function(){return o_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new xd(_d.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new f_(n,a,{includeMetadataChanges:!0,xu:!0});return i_(e,o)},i.next=3,Bx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Hx=new Map;function Wx(e,t,n){if(!n)throw new xd(_d.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Qx(e,t,n,r){if(!0===t&&!0===r)throw new xd(_d.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Yx(e){if(!Kd.isDocumentKey(e))throw new xd(_d.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jx(e){if(Kd.isDocumentKey(e))throw new xd(_d.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function $x(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":kd()}function Xx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xd(_d.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$x(e);throw new xd(_d.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Zx(e,t){if(t<=0)throw new xd(_d.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var eI=function(){function e(t){var n;if(i(this,e),void 0===t.host){if(void 0!==t.ssl)throw new xd(_d.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xd(_d.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Qx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return s(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),tI=function(){function e(t,n,r,a){i(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eI({}),this._settingsFrozen=!1}return s(e,[{key:"app",get:function(){if(!this._app)throw new xd(_d.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new xd(_d.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sd;switch(e.type){case"firstParty":return new Ad(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xd(_d.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Hx.get(e);t&&(vd("ComponentProvider","Removing Datastore"),Hx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function nI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Xx(e,tI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&yd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=fd.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[A(JSON.stringify({alg:"none",type:"JWT"})),A(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new xd(_d.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new fd(s)}e._authCredentials=new Td(new Ed(o,u))}}var rI=function(){function e(t,n,r){i(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return s(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new aI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),iI=function(){function e(t,n,r){i(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return s(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),aI=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,e,r,wm(a)))._path=a,o.type="collection",o}return s(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new rI(this.firestore,null,new Kd(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(iI);function oI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ne(e),Wx("collection","path",t),e instanceof tI){var a=zd.fromString.apply(zd,[t].concat(r));return Jx(a),new aI(e,null,a)}if(!(e instanceof rI||e instanceof aI))throw new xd(_d.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zd.fromString.apply(zd,[t].concat(r)));return Jx(o),new aI(e.firestore,null,o)}function uI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ne(e),1===arguments.length&&(t=Od.A()),Wx("doc","path",t),e instanceof tI){var a=zd.fromString.apply(zd,[t].concat(r));return Yx(a),new rI(e,null,new Kd(a))}if(!(e instanceof rI||e instanceof aI))throw new xd(_d.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(zd.fromString.apply(zd,[t].concat(r)));return Yx(o),new rI(e.firestore,e instanceof aI?e.converter:null,new Kd(o))}function sI(e,t){return e=ne(e),t=ne(t),(e instanceof rI||e instanceof aI)&&(t instanceof rI||t instanceof aI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cI(e,t){return e=ne(e),t=ne(t),e instanceof iI&&t instanceof iI&&e.firestore===t.firestore&&Nm(e._query,t._query)&&e.converter===t.converter}var lI=function(){function e(){var t=this;i(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new rb(this,"async_queue_retry"),this.qc=function(){var e=tb();e&&vd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=tb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return s(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=tb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new Id;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=y(v().mark((function e(){var t=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),cp(e.t0)){e.next=12;break}throw e.t0;case 12:vd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw md("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=$b.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&kd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=b(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=b(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function fI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=b(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var hI=function(){function e(){i(this,e),this._progressObserver={},this._taskCompletionResolver=new Id,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return s(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),dI=function(e){l(n,e);var t=p(n);function n(e,r,a,o){var u;return i(this,n),(u=t.call(this,e,r,a,o)).type="firestore",u._queue=new lI,u._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]",u}return s(n,[{key:"_terminate",value:function(){return this._firestoreClient||vI(this),this._firestoreClient.terminate()}}]),n}(tI);function pI(e){return e._firestoreClient||vI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vI(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new pv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Tx(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function mI(e,t,n){var r=new Id;return e.asyncQueue.enqueue(y(v().mark((function i(){var a;return v().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Cx(e,n);case 3:return i.next=5,Ax(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Rx(a=i.t0)){i.next=13;break}throw a;case 13:yd("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function yI(e){return function(e){return e.asyncQueue.enqueue(y(v().mark((function t(){var n,r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fx(e);case 2:return n=t.sent,t.next=5,Vx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=bd(e);return t.du.delete(0),lb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(pI(e=Xx(e,dI)))}function gI(e){return function(e){return e.asyncQueue.enqueue(y(v().mark((function t(){var n,r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fx(e);case 2:return n=t.sent,t.next=5,Vx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=bd(t)).du.add(0),e.next=4,hb(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(pI(e=Xx(e,dI)))}function kI(e,t){var n=pI(e=Xx(e,dI)),r=new hI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Ix(e,t)}(function(e,t){if(e instanceof Uint8Array)return _x(e,t);if(e instanceof ArrayBuffer)return _x(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,nb(t));e.asyncQueue.enqueueAndForget(y(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=yx,t.next=3,jx(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function wI(e,t){return function(e,t){return e.asyncQueue.enqueue(y(v().mark((function n(){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=bd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,Ux(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(pI(e=Xx(e,dI)),t).then((function(t){return t?new iI(e,null,t.query):null}))}function bI(e){if(e._initialized||e._terminated)throw new xd(_d.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var _I=function(){function e(t){i(this,e),this._byteString=t}return s(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ov.fromBase64String(t))}catch(t){throw new xd(_d.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ov.fromUint8Array(t))}}]),e}(),xI=function(){function e(){i(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new xd(_d.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qd(n)}return s(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var II=s((function e(t){i(this,e),this._methodName=t})),EI=function(){function e(t,n){if(i(this,e),!isFinite(t)||t<-90||t>90)throw new xd(_d.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new xd(_d.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return s(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ld(this._lat,e._lat)||Ld(this._long,e._long)}}]),e}(),SI=/^__.*__$/,TI=function(){function e(t,n,r){i(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return s(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new _y(e,this.data,this.fieldMask,t,this.fieldTransforms):new by(e,this.data,t,this.fieldTransforms)}}]),e}(),CI=function(){function e(t,n,r){i(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return s(e,[{key:"toMutation",value:function(e,t){return new _y(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function NI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kd()}}var AI=function(){function e(t,n,r,a,o,u){i(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,void 0===o&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}return s(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return JI(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(NI(this.Yc)&&SI.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),DI=function(){function e(t,n,r){i(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||nb(t)}return s(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new AI({Yc:e,methodName:t,oa:n,path:qd.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function RI(e){var t=e._freezeSettings(),n=nb(e._databaseId);return new DI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function PI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);HI("Data must be an object, but it was:",o,r);var u,s,c=KI(r,o);if(a.merge)u=new iv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=b(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=WI(t,l.value,n);if(!o.contains(d))throw new xd(_d.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));$I(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new iv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new TI(new Fv(c),u,s)}var OI=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(II);function LI(e,t,n){return new AI({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var MI=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"_toFieldTransform",value:function(e){return new fy(e.path,new ry)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(II),FI=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).ca=r,a}return s(n,[{key:"_toFieldTransform",value:function(e){var t=LI(this,e,!0),n=this.ca.map((function(e){return qI(e,t)})),r=new iy(n);return new fy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(II),UI=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).ca=r,a}return s(n,[{key:"_toFieldTransform",value:function(e){var t=LI(this,e,!0),n=this.ca.map((function(e){return qI(e,t)})),r=new oy(n);return new fy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(II),VI=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).aa=r,a}return s(n,[{key:"_toFieldTransform",value:function(e){var t=new sy(e.serializer,Xm(e.serializer,this.aa));return new fy(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(II);function jI(e,t,n,r){var i=e.ua(1,t,n);HI("Data must be an object, but it was:",i,r);var a=[],o=Fv.empty();Jp(r,(function(e,r){var u=YI(t,e,n);r=ne(r);var s=i.na(u);if(r instanceof OI)a.push(u);else{var c=qI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new iv(a);return new CI(o,u,i.fieldTransforms)}function zI(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[WI(t,r,n)],s=[i];if(a.length%2!=0)throw new xd(_d.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(WI(t,a[c])),s.push(a[c+1]);for(var l=[],f=Fv.empty(),h=u.length-1;h>=0;--h)if(!$I(l,u[h])){var d=u[h],p=s[h];p=ne(p);var v=o.na(d);if(p instanceof OI)l.push(d);else{var m=qI(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new iv(l);return new CI(f,y,o.fieldTransforms)}function BI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qI(n,e.ua(r?4:3,t))}function qI(e,t){if(GI(e=ne(e)))return HI("Unsupported field value:",t,e),KI(e,t);if(e instanceof II)return function(e,t){if(!NI(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var o=qI(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ne(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xm(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ud.fromDate(e);return{timestampValue:$y(t.serializer,n)}}if(e instanceof Ud){var r=new Ud(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$y(t.serializer,r)}}if(e instanceof EI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _I)return{bytesValue:Xy(t.serializer,e._byteString)};if(e instanceof rI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:tg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat($x(e)))}(e,t)}function KI(e,t){var n={};return $p(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jp(e,(function(e,r){var i=qI(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function GI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ud||e instanceof EI||e instanceof _I||e instanceof rI||e instanceof II)}function HI(e,t,n){if(!GI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=$x(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function WI(e,t,n){if((t=ne(t))instanceof xI)return t._internalPath;if("string"==typeof t)return YI(e,t);throw JI("Field path arguments must be of type string or ",e,!1,void 0,n)}var QI=new RegExp("[~\\*/\\[\\]]");function YI(e,t,n){if(t.search(QI)>=0)throw JI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(xI,ie(t.split(".")))._internalPath}catch(r){throw JI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function JI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new xd(_d.INVALID_ARGUMENT,u+e+s)}function $I(e,t){return e.some((function(e){return e.isEqual(t)}))}var XI=function(){function e(t,n,r,a,o){i(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=o}return s(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new rI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(eE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ZI=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"data",value:function(){return Ft(f(n.prototype),"data",this).call(this)}}]),n}(XI);function eE(e,t){return"string"==typeof t?YI(e,t):t instanceof xI?t._internalPath:t._delegate._internalPath}function tE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xd(_d.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nE=s((function e(){i(this,e)})),rE=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n)}(nE);function iE(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof nE&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof oE})).length,n=e.filter((function(e){return e instanceof aE})).length;if(t>1||t>0&&n>0)throw new xd(_d.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=b(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var aE=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this))._field=e,o._op=r,o._value=a,o.type="where",o}return s(n,[{key:"_apply",value:function(e){var t=this._parse(e);return gE(e._query,t),new iI(e.firestore,e.converter,Tm(e._query,t))}},{key:"_parse",value:function(e){var t=RI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new xd(_d.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){yE(o,a);var s,c=[],l=b(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(mE(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=mE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||yE(o,a),u=BI(n,"where",o,"in"===a||"not-in"===a);return Hv.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rE);var oE=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this)).type=e,a._queryConstraints=r,a}return s(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Wv.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=b(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;gE(r,a),r=Tm(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new iI(e.firestore,e.converter,Tm(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(nE);var uE=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this))._field=e,a._direction=r,a.type="orderBy",a}return s(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new xd(_d.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xd(_d.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new qv(t,n);return function(e,t){if(null===_m(e)){var n=xm(e);null!==n&&kE(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new iI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new gm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(rE);var sE=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).type=e,o._limit=r,o._limitType=a,o}return s(n,[{key:"_apply",value:function(e){return new iI(e.firestore,e.converter,Cm(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rE);var cE=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).type=e,o._docOrFields=r,o._inclusive=a,o}return s(n,[{key:"_apply",value:function(e){var t=vE(e,this.type,this._docOrFields,this._inclusive);return new iI(e.firestore,e.converter,function(e,t){return new gm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rE);function lE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cE._create("startAt",t,!0)}function fE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cE._create("startAfter",t,!1)}var hE=function(e){l(n,e);var t=p(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this)).type=e,o._docOrFields=r,o._inclusive=a,o}return s(n,[{key:"_apply",value:function(e){var t=vE(e,this.type,this._docOrFields,this._inclusive);return new iI(e.firestore,e.converter,function(e,t){return new gm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rE);function dE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hE._create("endBefore",t,!1)}function pE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hE._create("endAt",t,!0)}function vE(e,t,n,r){if(n[0]=ne(n[0]),n[0]instanceof XI)return function(e,t,n,r,i){if(!r)throw new xd(_d.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=b(Em(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ev(t,r.key));else{var c=r.data.field(s.field);if(fv(c))throw new xd(_d.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new xd(_d.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new jv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=RI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new xd(_d.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new xd(_d.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Im(e)&&-1!==c.indexOf("/"))throw new xd(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(zd.fromString(c));if(!Kd.isDocumentKey(l))throw new xd(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Kd(l);u.push(Ev(t,f))}else{var h=BI(n,r,c);u.push(h)}}return new jv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function mE(e,t,n){if("string"==typeof(n=ne(n))){if(""===n)throw new xd(_d.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Im(t)&&-1!==n.indexOf("/"))throw new xd(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(zd.fromString(n));if(!Kd.isDocumentKey(r))throw new xd(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ev(e,new Kd(r))}if(n instanceof rI)return Ev(e,n._key);throw new xd(_d.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat($x(n),"."))}function yE(e,t){if(!Array.isArray(e)||0===e.length)throw new xd(_d.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function gE(e,t){if(t.isInequality()){var n=xm(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new xd(_d.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=_m(e);null!==i&&kE(e,r,i)}var a=function(e,t){var n,r=b(e);try{for(r.s();!(n=r.n()).done;){var i,a=b(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new xd(_d.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new xd(_d.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function kE(e,t,n){if(!n.isEqual(t))throw new xd(_d.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var wE=function(){function e(){i(this,e)}return s(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(gv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw kd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Jp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new EI(cv(e.latitude),cv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=hv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=sv(e);return new Ud(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=zd.fromString(e);wd(Eg(n));var r=new vv(n.get(1),n.get(3)),i=new Kd(n.popFirst(5));return r.isEqual(t)||md("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function bE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var _E=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).firestore=e,r}return s(n,[{key:"convertBytes",value:function(e){return new _I(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new rI(this.firestore,null,t)}}]),n}(wE);var xE=function(){function e(t,n){i(this,e),this.hasPendingWrites=t,this.fromCache=n}return s(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),IE=function(e){l(n,e);var t=p(n);function n(e,r,a,o,u,s){var c;return i(this,n),(c=t.call(this,e,r,a,o,s))._firestore=e,c._firestoreImpl=e,c.metadata=u,c}return s(n,[{key:"exists",value:function(){return Ft(f(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new EE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(eE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(XI),EE=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ft(f(n.prototype),"data",this).call(this,e)}}]),n}(IE),SE=function(){function e(t,n,r,a){i(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new xE(a.hasPendingWrites,a.fromCache),this.query=r}return s(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new EE(n._firestore,n._userDataWriter,r.key,r,new xE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xd(_d.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new EE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new EE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:TE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function TE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kd()}}function CE(e,t){return e instanceof IE&&t instanceof IE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof SE&&t instanceof SE&&e._firestore===t._firestore&&cI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var NE=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).firestore=e,r}return s(n,[{key:"convertBytes",value:function(e){return new _I(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new rI(this.firestore,null,t)}}]),n}(wE);function AE(e){e=Xx(e,rI);var t=Xx(e.firestore,dI),n=pI(t),r=new NE(t);return function(e,t){var n=new Id;return e.asyncQueue.enqueueAndForget(y(v().mark((function r(){return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=y(v().mark((function e(t,n,r){var i,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=bd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new xd(_d.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Xb(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Ux(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new IE(t,r,e._key,n,new xE(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function DE(e){e=Xx(e,iI);var t=Xx(e.firestore,dI),n=pI(t),r=new NE(t);return function(e,t){var n=new Id;return e.asyncQueue.enqueueAndForget(y(v().mark((function r(){return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=y(v().mark((function e(t,n,r){var i,a,o,u,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cw(t,n,!0);case 3:i=e.sent,a=new g_(n,i.Wi),o=a.zu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Xb(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Ux(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new SE(t,r,e,n)}))}function RE(e,t,n){e=Xx(e,rI);var r=Xx(e.firestore,dI),i=bE(e.converter,t,n);return ME(r,[PI(RI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dy.none())])}function PE(e,t,n){e=Xx(e,rI);for(var r=Xx(e.firestore,dI),i=RI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return ME(r,[("string"==typeof(t=ne(t))||t instanceof xI?zI(i,"updateDoc",e._key,t,n,o):jI(i,"updateDoc",e._key,t)).toMutation(e._key,dy.exists(!0))])}function OE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ne(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||fI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(fI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof rI)l=Xx(e.firestore,dI),f=wm(e._key.path),c={next:function(t){n[s]&&n[s](FE(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Xx(e,iI);l=Xx(p.firestore,dI),f=p._query;var m=new NE(l);c={next:function(e){n[s]&&n[s](new SE(l,m,p,e))},error:n[s+1],complete:n[s+2]},tE(e._query)}return function(e,t,n,r){var i=new xx(r),a=new f_(t,i,n);return e.asyncQueue.enqueueAndForget(y(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i_,t.next=3,Bx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(y(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=o_,t.next=3,Bx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(pI(l),f,h,c)}function LE(e,t){return function(e,t){var n=new xx(t);return e.asyncQueue.enqueueAndForget(y(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){bd(e).Au.add(t),t.next()},t.next=3,Bx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget(y(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){bd(e).Au.delete(t)},t.next=3,Bx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(pI(e=Xx(e,dI)),fI(t)?t:{next:t})}function ME(e,t){return function(e,t){var n=new Id;return e.asyncQueue.enqueueAndForget(y(v().mark((function r(){return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=C_,r.next=3,jx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(pI(e),t)}function FE(e,t,n){var r=n.docs.get(t._key),i=new NE(e);return new IE(e,i,t._key,r,new xE(n.hasPendingWrites,n.fromCache),t.converter)}var UE={maxAttempts:5},VE=function(){function e(t,n){i(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=RI(t)}return s(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=jE(e,this._firestore),i=bE(r.converter,t,n),a=PI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,dy.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=jE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ne(t))||t instanceof xI?zI(this._dataReader,"WriteBatch.update",i._key,t,n,o):jI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,dy.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=jE(e,this._firestore);return this._mutations=this._mutations.concat(new Cy(t._key,dy.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new xd(_d.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function jE(e,t){if((e=ne(e)).firestore!==t)throw new xd(_d.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var zE=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,r))._firestore=e,a}return s(n,[{key:"get",value:function(e){var t=this,r=jE(e,this._firestore),i=new NE(this._firestore);return Ft(f(n.prototype),"get",this).call(this,e).then((function(e){return new IE(t._firestore,i,r._key,e._document,new xE(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){i(this,e),this._firestore=t,this._transaction=n,this._dataReader=RI(t)}return s(e,[{key:"get",value:function(e){var t=this,n=jE(e,this._firestore),r=new _E(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return kd();var i=e[0];if(i.isFoundDocument())return new XI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new XI(t._firestore,r,n._key,null,n.converter);throw kd()}))}},{key:"set",value:function(e,t,n){var r=jE(e,this._firestore),i=bE(r.converter,t,n),a=PI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=jE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ne(t))||t instanceof xI?zI(this._dataReader,"Transaction.update",i._key,t,n,o):jI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=jE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function BE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FI("arrayUnion",t)}function qE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new UI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){hd=e}(tt),Qe(new ae("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new dI(new Cd(e.getProvider("auth-internal")),new Rd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xd(_d.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vv(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ut(ld,"3.10.0",e),ut(ld,"3.10.0","esm2017")}();var KE="@firebase/firestore-compat",GE="0.3.6";function HE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function WE(){if("undefined"===typeof Uint8Array)throw new xd("unimplemented","Uint8Arrays are not available in this environment.")}function QE(){if("undefined"==typeof atob)throw new xd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var YE=function(){function e(t){i(this,e),this._delegate=t}return s(e,[{key:"toBase64",value:function(){return QE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return WE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return QE(),new e(_I.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return WE(),new e(_I.fromUint8Array(t))}}]),e}();function JE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var $E=function(){function e(){i(this,e)}return s(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){bI(e=Xx(e,dI));var n=pI(e);if(n._uninitializedComponentsProvider)throw new xd(_d.FAILED_PRECONDITION,"SDK cache is already specified.");yd("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new bx;return mI(n,i,new kx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){bI(e=Xx(e,dI));var t=pI(e);if(t._uninitializedComponentsProvider)throw new xd(_d.FAILED_PRECONDITION,"SDK cache is already specified.");yd("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new bx;return mI(t,r,new wx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new xd(_d.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Id;return e._queue.enqueueAndForgetEvenWhileRestricted(y(v().mark((function n(){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=y(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(op.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,op.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(dw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),XE=function(){function e(t,n,r){var a=this;i(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return a.terminate()}},t instanceof vv||(this._appCompat=t)}return s(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||yd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};nI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return yI(this._delegate)}},{key:"disableNetwork",value:function(){return gI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Qx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Id;return e.asyncQueue.enqueueAndForget(y(v().mark((function n(){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=V_,n.next=3,jx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(pI(e=Xx(e,dI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return LE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new xd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hS(this,oI(this._delegate,e))}catch(t){throw iS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rS(this,uI(this._delegate,e))}catch(t){throw iS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cS(this,function(e,t){if(e=Xx(e,tI),Wx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xd(_d.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new iI(e,null,function(e){return new gm(zd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw iS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Xx(e,dI);var r=Object.assign(Object.assign({},UE),n);return function(e){if(e.maxAttempts<1)throw new xd(_d.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Id;return e.asyncQueue.enqueueAndForget(y(v().mark((function i(){var a;return v().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,zx(e);case 2:a=i.sent,new Sx(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(pI(e),(function(n){return t(new zE(e,n))}),r)}(this._delegate,(function(n){return e(new eS(t,n))}))}},{key:"batch",value:function(){var e=this;return pI(this._delegate),new tS(new VE(this._delegate,(function(t){return ME(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return kI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return wI(this._delegate,e).then((function(e){return e?new cS(t,e):null}))}}]),e}(),ZE=function(e){l(n,e);var t=p(n);function n(e){var r;return i(this,n),(r=t.call(this)).firestore=e,r}return s(n,[{key:"convertBytes",value:function(e){return new YE(new _I(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rS.forKey(t,this.firestore,null)}}]),n}(wE);var eS=function(){function e(t,n){i(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new ZE(t)}return s(e,[{key:"get",value:function(e){var t=this,n=dS(e);return this._delegate.get(n).then((function(e){return new uS(t._firestore,new IE(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dS(e);return n?(HE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dS(e);return this._delegate.delete(t),this}}]),e}(),tS=function(){function e(t){i(this,e),this._delegate=t}return s(e,[{key:"set",value:function(e,t,n){var r=dS(e);return n?(HE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dS(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),nS=function(){function e(t,n,r){i(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return s(e,[{key:"fromFirestore",value:function(e,t){var n=new EE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sS(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new ZE(t),n),i.set(n,a)),a}}]),e}();nS.INSTANCES=new WeakMap;var rS=function(){function e(t,n){i(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ZE(t)}return s(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hS(this.firestore,oI(this._delegate,e))}catch(t){throw iS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ne(e))instanceof rI&&sI(this._delegate,e)}},{key:"set",value:function(e,t){t=HE("DocumentReference.set",t);try{return t?RE(this._delegate,e,t):RE(this._delegate,e)}catch(n){throw iS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?PE(this._delegate,e):PE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw iS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return ME(Xx(e.firestore,dI),[new Cy(e._key,dy.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aS(n),a=oS(n,(function(t){return new uS(e.firestore,new IE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return OE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?AE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Xx(e,rI);var t=Xx(e.firestore,dI);return Kx(pI(t),e._key,{source:"server"}).then((function(n){return FE(t,e,n)}))}(this._delegate):function(e){e=Xx(e,rI);var t=Xx(e.firestore,dI);return Kx(pI(t),e._key).then((function(n){return FE(t,e,n)}))}(this._delegate),t.then((function(e){return new uS(n.firestore,new IE(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new xd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new rI(n._delegate,r,new Kd(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new rI(n._delegate,r,t))}}]),e}();function iS(e,t,n){return e.message=e.message.replace(t,n),e}function aS(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!JE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function oS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=JE(e[0])?e[0]:JE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uS=function(){function e(t,n){i(this,e),this._firestore=t,this._delegate=n}return s(e,[{key:"ref",get:function(){return new rS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return CE(this._delegate,e._delegate)}}]),e}(),sS=function(e){l(n,e);var t=p(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||kd()}(void 0!==t),t}}]),n}(uS),cS=function(){function e(t,n){i(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ZE(t)}return s(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,iE(this._delegate,function(e,t,n){var r=t,i=eE("where",e);return aE._create(i,r,n)}(t,n,r)))}catch(i){throw iS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,iE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=eE("orderBy",e);return uE._create(n,t)}(t,n)))}catch(r){throw iS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,iE(this._delegate,function(e){return Zx("limit",e),sE._create("limit",e,"F")}(t)))}catch(n){throw iS(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,iE(this._delegate,function(e){return Zx("limitToLast",e),sE._create("limitToLast",e,"L")}(t)))}catch(n){throw iS(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,iE(this._delegate,lE.apply(void 0,arguments)))}catch(t){throw iS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,iE(this._delegate,fE.apply(void 0,arguments)))}catch(t){throw iS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,iE(this._delegate,dE.apply(void 0,arguments)))}catch(t){throw iS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,iE(this._delegate,pE.apply(void 0,arguments)))}catch(t){throw iS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return cI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?DE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Xx(e,iI);var t=Xx(e.firestore,dI),n=pI(t),r=new NE(t);return Gx(n,e._query,{source:"server"}).then((function(n){return new SE(t,r,e,n)}))}(this._delegate):function(e){e=Xx(e,iI);var t=Xx(e.firestore,dI),n=pI(t),r=new NE(t);return tE(e._query),Gx(n,e._query).then((function(n){return new SE(t,r,e,n)}))}(this._delegate),t.then((function(e){return new fS(n.firestore,new SE(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aS(n),a=oS(n,(function(t){return new fS(e.firestore,new SE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return OE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lS=function(){function e(t,n){i(this,e),this._firestore=t,this._delegate=n}return s(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sS(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fS=function(){function e(t,n){i(this,e),this._firestore=t,this._delegate=n}return s(e,[{key:"query",get:function(){return new cS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sS(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sS(n._firestore,r))}))}},{key:"isEqual",value:function(e){return CE(this._delegate,e._delegate)}}]),e}(),hS=function(e){l(n,e);var t=p(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e,r)).firestore=e,a._delegate=r,a}return s(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rS(this.firestore,void 0===e?uI(this._delegate):uI(this._delegate,e))}catch(t){throw iS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Xx(e.firestore,dI),r=uI(e),i=bE(e.converter,t);return ME(n,[PI(RI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dy.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return sI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(nS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cS);function dS(e){return Xx(e,rI)}var pS=function(){function e(){i(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=E(xI,n)}return s(e,[{key:"isEqual",value:function(e){return(e=ne(e))instanceof xI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(qd.keyField().canonicalString())}}]),e}(),vS=function(){function e(t){i(this,e),this._delegate=t}return s(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new MI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new OI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=BE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=qE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new VI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),mS={Firestore:XE,GeoPoint:EI,Timestamp:Ud,Blob:YE,Transaction:eS,WriteBatch:tS,DocumentReference:rS,DocumentSnapshot:uS,Query:cS,QueryDocumentSnapshot:sS,QuerySnapshot:fS,CollectionReference:hS,FieldPath:pS,FieldValue:vS,setLogLevel:function(e){!function(e){dd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ae("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},mS)))}(e,(function(e,t){return new XE(e,t,new $E)})),e.registerVersion(KE,GE)}(Mt);Mt.initializeApp({apiKey:"AIzaSyDDEtvcE8T4BCnvICWn-VXH67KIPIP9DKQ",authDomain:"che-hsuan-wedding-form.firebaseapp.com",databaseURL:"https://che-hsuan-wedding-form.asia-east1.firebasedatabase.app",projectId:"che-hsuan-wedding-form",storageBucket:"che-hsuan-wedding-form.appspot.com",messagingSenderId:"889485886292",appId:"889485886292:web:d2e872024b9544bebbfec1"});var yS=Mt.firestore(),gS=function(e){try{var t=function(){var e=y(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yS.collection("testdata").get();case 2:t=e.sent,console.log("^^^^^ doc:",t),t.forEach((function(e){console.log("item.data()",e.data())}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}catch(n){console.log(n)}},kS=n(184),wS=function(e){var t=e.embedId;return(0,kS.jsx)("div",{className:"video-responsive",children:(0,kS.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/".concat(t),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})},bS=function(e){l(n,e);var t=p(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).submitHandler=function(){gS("123")},e}return s(n,[{key:"render",value:function(){return(0,kS.jsxs)("div",{className:"container",children:[(0,kS.jsxs)("div",{className:"page",children:[(0,kS.jsxs)("div",{className:"box",children:[(0,kS.jsx)("div",{children:(0,kS.jsx)("button",{onClick:this.submitHandler,children:"\u6309\u6211"})}),(0,kS.jsxs)("div",{className:"photo_text_box width_50",children:[(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic1_1.png"}),(0,kS.jsx)("div",{className:"center_text",children:"With love and thanks"})]}),(0,kS.jsx)("img",{className:"pic1_1",src:"/Che_Hsuan/images/photo1.jpg"})]}),(0,kS.jsx)("div",{className:"margin_top_20"}),(0,kS.jsxs)("div",{className:"photo_text_box width_90 middle",children:[(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic1_2.png"}),(0,kS.jsxs)("div",{className:"center_text text_align_left line_height",children:["\u6709\u7de3\u7684\u4eba\uff0c",(0,kS.jsx)("p",{children:"\u7e3d\u662f\u5728\u82b1\u597d\u6708\u5713\u7684\u6642\u5019\u76f8\u9047\uff0c"}),(0,kS.jsx)("p",{children:"\u5728\u525b\u597d\u7684\u6642\u9593\u88e1\u660e\u767d\u61c9\u8a72\u660e\u767d\u7684\u4e8b\uff0c"}),(0,kS.jsx)("p",{children:"\u4e0d\u591a\u4e5f\u4e0d\u5c11\uff0c\u4e0d\u65e9\u4e5f\u4e0d\u9072\uff0c"}),(0,kS.jsx)("p",{children:"\u624d\u80fd\u5728\u525b\u597d\u7684\u6642\u523b\u88e1\u8aaa\u51fa\u525b\u597d\u7684\u8a71\uff0c"}),(0,kS.jsx)("p",{children:"\u7d50\u6210\u525b\u597d\u7684\u59fb\u7de3\u3002"})]}),(0,kS.jsx)("div",{className:"bottom_right",children:"\u2014\u2014 \u5e2d\u6155\u5bb9"})]}),(0,kS.jsx)("div",{className:"display_flex pic1_3",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic1_3.png"})})]}),(0,kS.jsxs)("div",{className:"page margin_top_45",children:[(0,kS.jsxs)("div",{className:"box display_flex",children:[(0,kS.jsxs)("div",{className:"box_left width_40 ",children:[(0,kS.jsx)("img",{className:"pic2_1",src:"/Che_Hsuan/images/pic2_1.png"}),(0,kS.jsx)("img",{className:"photo2",src:"/Che_Hsuan/images/photo2.jpg"})]}),(0,kS.jsx)("div",{className:"box_right width_60",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/photo3.jpg"})})]}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsxs)("div",{className:"display_flex text_align_center",children:[(0,kS.jsx)("p",{children:"\u5c0f\u6642\u5019\uff0c"}),(0,kS.jsx)("p",{children:"\u7e3d\u89ba\u5f97\u9577\u5927\u96e2\u81ea\u5df1\u597d\u9059\u9060\uff0c"}),(0,kS.jsx)("p",{children:"\u5f9e\u6c92\u60f3\u904e\u4e00\u8f49\u773c\uff0c"})]}),(0,kS.jsx)("div",{className:"margin_top_20"}),(0,kS.jsx)("div",{className:"display_flex text_align_center",children:(0,kS.jsx)("img",{className:"width_80",src:"/Che_Hsuan/images/pic2_2.png",alt:""})})]}),(0,kS.jsxs)("div",{className:"page margin_top_45",children:[(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsxs)("div",{className:"box display_flex",children:[(0,kS.jsxs)("div",{className:"box_left width_60",children:[(0,kS.jsx)("img",{className:"pic3_1",src:"/Che_Hsuan/images/pic3_1.png"}),(0,kS.jsx)("img",{className:"photo4",src:"/Che_Hsuan/images/photo4.jpg"})]}),(0,kS.jsx)("div",{className:"text_align_center display_flex width_40",children:(0,kS.jsx)("p",{children:"\u6211\u5011\u5df2\u6210\u5bb6\u3002"})})]}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"display_flex flex_row_reverse",children:(0,kS.jsx)("img",{className:"width_50",src:"/Che_Hsuan/images/pic3_2.png"})})]}),(0,kS.jsx)("div",{className:"page margin_top_45",children:(0,kS.jsxs)("div",{className:"box display_flex flex_column",children:[(0,kS.jsx)("img",{className:"width_100",src:"/Che_Hsuan/images/photo5.jpg"}),(0,kS.jsxs)("div",{className:"box3_1",children:[(0,kS.jsx)("div",{className:"width_60 margin_right_3",children:(0,kS.jsx)("img",{className:"width_100",src:"/Che_Hsuan/images/photo6.jpg"})}),(0,kS.jsxs)("div",{className:"box3_2",children:[(0,kS.jsx)("img",{className:"width_100",src:"/Che_Hsuan/images/photo7.jpg"}),(0,kS.jsxs)("div",{className:"photo_text_box text_right",children:[(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic1_2.png"}),(0,kS.jsxs)("div",{className:"text3_1",children:[(0,kS.jsx)("p",{children:"\u4e09\u829d"}),(0,kS.jsx)("p",{children:"\u662f\u6211\u5011\u76f8\u9047\u7684\u5730\u65b9\uff0c"})]})]})]})]})]})}),(0,kS.jsxs)("div",{className:"page margin_top_45 relative overflow_hidden",children:[(0,kS.jsx)("div",{className:"display_flex width_100 pic5_1",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic567.png"})}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsxs)("div",{className:"box display_flex",children:[(0,kS.jsx)("div",{className:"width_50 margin_right_3",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo8.jpg"})}),(0,kS.jsxs)("div",{className:"box4_1 width_50",children:[(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo9.jpg"}),(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo10.jpg"})]})]}),(0,kS.jsx)("div",{className:"width_100 text5_1",children:(0,kS.jsx)("p",{children:"\u4e00\u8d77\u5403\u5c0f\u5403\u7f8e\u98df\uff0c"})}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"width_100 text5_2",children:(0,kS.jsx)("p",{children:"\u8d70\u904e\u5927\u8857\u5c0f\u5df7\uff0c"})}),(0,kS.jsx)("div",{className:"display_flex width_100 pic5_2",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic567.png"})}),(0,kS.jsxs)("div",{className:"box display_flex",children:[(0,kS.jsx)("div",{className:"width_60 margin_right_3",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo11.jpg"})}),(0,kS.jsx)("div",{className:"width_40",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo12.jpg"})})]})]}),(0,kS.jsxs)("div",{className:"page margin_top_45 relative",children:[(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsxs)("div",{className:"box_m display_flex",children:[(0,kS.jsx)("div",{className:"width_40 display_flex text_align_center_bottom padding_5",children:(0,kS.jsx)("p",{children:"\u4e00\u8d77\u563b\u7b11\u6253\u9b27\uff0c"})}),(0,kS.jsx)("div",{className:"width_60",children:(0,kS.jsx)("img",{className:"width_100",src:"/Che_Hsuan/images/photo13.jpg"})})]}),(0,kS.jsx)("div",{className:"box_m margin_top_minus13",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo14.jpg"})}),(0,kS.jsx)("div",{className:"margin_top_30"}),(0,kS.jsx)("div",{className:"width_100 text6_1",children:(0,kS.jsx)("p",{children:"\u4e5f\u66fe\u7d93\u6b77\u96e3\u904e\u8207\u4f4e\u6f6e\u3002"})}),(0,kS.jsx)("div",{className:"box_m",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo15.jpg"})}),(0,kS.jsx)("div",{className:"display_flex width_100 pic6",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic567.png"})})]}),(0,kS.jsxs)("div",{className:"page margin_top_45 relative overflow_hidden",children:[(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"box_s",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo16.jpg"})}),(0,kS.jsxs)("div",{className:"box display_flex text_align_center",children:[(0,kS.jsx)("p",{children:"\u6162\u6162\u5730\uff0c"}),(0,kS.jsx)("p",{children:"\u6210\u4e86\u5f7c\u6b64\u5fc3\u4e2d\u7684\u5c0f\u592a\u967d\uff0c"}),(0,kS.jsx)("p",{children:"\u4e5f\u5b78\u8457\u70ba\u5c0d\u65b9\u6490\u8d77\u96e8\u5098\u3002"})]}),(0,kS.jsx)("div",{className:"box_s",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo17.jpg"})}),(0,kS.jsx)("div",{className:"display_flex width_100 pic7_1",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic567.png"})}),(0,kS.jsx)("div",{className:"display_flex width_100 pic7_2",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic567.png"})}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"margin_top_45"})]}),(0,kS.jsxs)("div",{className:"page margin_top_45",children:[(0,kS.jsxs)("div",{className:"box display_flex text_align_center",children:[(0,kS.jsx)("p",{children:"\u4e00\u8d77\u8d70\u904e\u7684\u9019\u4e9b\u65e5\u5b50\uff0c"}),(0,kS.jsx)("p",{children:"\u8b93\u6211\u5011\u6c7a\u5b9a\uff0c"}),(0,kS.jsx)("p",{children:"\u6210\u70ba\u5f7c\u6b64\u7684\u5bb6\u4eba\u3002"})]}),(0,kS.jsx)("div",{className:"box_m margin_top_minus5",children:(0,kS.jsx)("img",{className:"width_100",src:"/Che_Hsuan/images/photo18.jpg"})})]}),(0,kS.jsxs)("div",{className:"page margin_top_45",children:[(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"box_s",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo19.jpg"})}),(0,kS.jsx)("div",{className:"box_s margin_top_20",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo20.jpg"})}),(0,kS.jsx)("div",{className:"box_s margin_top_20",children:(0,kS.jsx)("img",{className:"width_100 z_1",src:"/Che_Hsuan/images/photo21.jpg"})})]}),(0,kS.jsxs)("div",{className:"page margin_top_45 relative overflow_hidden",children:[(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsxs)("div",{className:"box display_flex text_align_center",children:[(0,kS.jsx)("p",{children:"\u8b1d\u8b1d\u5927\u5bb6\uff0c"}),(0,kS.jsx)("p",{children:"\u966a\u4f34\u6211\u5011\u7d93\u6b77\u5404\u500b\u6210\u9577\u968e\u6bb5\uff0c"}),(0,kS.jsx)("p",{children:"\u60f3\u9080\u8acb\u4f60\u5011\uff0c"}),(0,kS.jsx)("p",{children:"\u8207\u6211\u5011\u4e00\u8d77\u56de\u9867\uff1a"})]}),(0,kS.jsx)("div",{className:"display_flex width_100 pic10_1_1",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic10_1.png"})}),(0,kS.jsx)("div",{className:"display_flex width_100 pic10_1_2",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic10_1.png"})}),(0,kS.jsx)(wS,{embedId:"TbhgQXTPGB8"}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsxs)("div",{className:"box display_flex text_align_center",children:[(0,kS.jsx)("p",{children:"\u751c\u871c\u7684\u611b\u60c5\uff0c"}),(0,kS.jsx)("p",{children:"\u6eab\u6696\u7684\u89aa\u60c5\uff0c"}),(0,kS.jsx)("p",{children:"\u771f\u646f\u7684\u53cb\u60c5\uff0c"}),(0,kS.jsx)("p",{children:"\u7576\u6211\u64c1\u6709\u9019\u4e09\u7a2e\u611f\u60c5\uff0c"}),(0,kS.jsx)("p",{children:"\u6211\u5df2\u662f\u9019\u4e16\u754c\u4e0a\u6700\u5e78\u798f\u7684\u4eba\u3002"})]}),(0,kS.jsx)("div",{className:"display_flex width_100 pic10_1_3",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic10_1.png"})}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"margin_top_45"}),(0,kS.jsx)("div",{className:"margin_top_45"})]}),(0,kS.jsxs)("div",{className:"page",children:[(0,kS.jsxs)("div",{className:"box width_100 display_flex",children:[(0,kS.jsx)("div",{className:"width_50 margin_right_3",children:(0,kS.jsx)("img",{className:"width_100",src:"/Che_Hsuan/images/photo22.jpg"})}),(0,kS.jsx)("div",{className:"width_50",children:(0,kS.jsx)("img",{className:"width_100",src:"/Che_Hsuan/images/photo23.jpg"})})]}),(0,kS.jsxs)("div",{className:"box margin_top_20 relative",children:[(0,kS.jsxs)("div",{className:"photo_text_box width_70 margin_auto",children:[(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic11_2.png"}),(0,kS.jsxs)("div",{className:"center_text",children:[(0,kS.jsx)("p",{children:"\u672a\u4f86\u7684\u65e5\u5b50\uff0c"}),(0,kS.jsx)("p",{children:"\u9858\u6211\u5011\u4e0d\u8ad6\u9047\u5230\u4ec0\u9ebc"}),(0,kS.jsx)("p",{children:"\u90fd\u80fd\u651c\u624b\u5171\u5ea6\uff0c"}),(0,kS.jsx)("p",{children:"\u4e26\u4fdd\u6709\u7b11\u5bb9\u53ca\u7d14\u771f\u3002"}),(0,kS.jsx)("br",{}),(0,kS.jsx)("br",{}),(0,kS.jsx)("p",{children:"\u5f80\u5f8c\u4e5f\u5c07\u4ee5\u592b\u59bb\u7684\u8eab\u4efd\uff0c"}),(0,kS.jsx)("p",{children:"\u8acb\u5927\u5bb6\u591a\u591a\u6307\u6559\uff1a\uff09"})]})]}),(0,kS.jsx)("div",{className:"display_flex width_100 pic11_1",children:(0,kS.jsx)("img",{src:"/Che_Hsuan/images/pic11_1.png"})})]})]})]})}}]),n}(t.Component),_S=bS,xS=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,kS.jsx)(t.StrictMode,{children:(0,kS.jsx)("div",{children:(0,kS.jsx)(_S,{})})})),xS()}()}();
//# sourceMappingURL=main.26b4248a.js.map